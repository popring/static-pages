{"version":3,"sources":["js/Chart.js","C:/Users/Harry/AppData/Local/Yarn/Data/global/node_modules/parcel-bundler/src/builtins/hmr-runtime.js"],"names":["root","previous","Chart","context","chart","canvas","ctx","computeDimension","element","dimension","document","defaultView","getComputedStyle","getPropertyValue","width","height","aspectRatio","helpers","retinaScale","defaults","global","animation","animationSteps","animationEasing","showScale","scaleOverride","scaleSteps","scaleStepWidth","scaleStartValue","scaleLineColor","scaleLineWidth","scaleShowLabels","scaleLabel","scaleIntegersOnly","scaleBeginAtZero","scaleFontFamily","scaleFontSize","scaleFontStyle","scaleFontColor","responsive","maintainAspectRatio","showTooltips","customTooltips","tooltipEvents","tooltipFillColor","tooltipFontFamily","tooltipFontSize","tooltipFontStyle","tooltipFontColor","tooltipTitleFontFamily","tooltipTitleFontSize","tooltipTitleFontStyle","tooltipTitleFontColor","tooltipYPadding","tooltipXPadding","tooltipCaretSize","tooltipCornerRadius","tooltipXOffset","tooltipTemplate","multiTooltipTemplate","multiTooltipKeyBackground","onAnimationProgress","onAnimationComplete","types","each","loopable","callback","self","additionalArgs","Array","prototype","slice","call","arguments","length","i","apply","concat","item","clone","obj","objClone","value","key","hasOwnProperty","extend","base","extensionObject","merge","master","args","unshift","indexOf","arrayToSearch","where","collection","filterCallback","filtered","push","findNextWhere","startIndex","currentItem","findPreviousWhere","inherits","extensions","parent","ChartElement","constructor","Surrogate","__super__","noop","uid","id","warn","str","window","console","amd","define","isNumber","n","isNaN","parseFloat","isFinite","max","array","Math","min","cap","valueToCap","maxValue","minValue","getDecimalPlaces","num","toString","split","toRadians","radians","degrees","PI","getAngleFromPoint","centrePoint","anglePoint","distanceFromXCenter","x","distanceFromYCenter","y","radialDistanceFromCenter","sqrt","angle","atan2","distance","aliasPixel","pixelWidth","splineCurve","FirstPoint","MiddlePoint","AfterPoint","t","d01","pow","d12","fa","fb","inner","outer","calculateOrderOfMagnitude","val","floor","log","LN10","calculateScaleRange","valuesArray","drawingSize","textSize","startFromZero","integersOnly","minSteps","maxSteps","skipFitting","valueRange","abs","rangeOrderOfMagnitude","graphMax","ceil","graphMin","graphRange","stepValue","numberOfSteps","round","steps","template","templateString","valuesObject","Function","cache","tmpl","data","fn","test","replace","join","generateLabels","labelsArray","labelTemplateString","index","easingEffects","linear","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","easeInQuart","easeOutQuart","easeInOutQuart","easeInQuint","easeOutQuint","easeInOutQuint","easeInSine","cos","easeOutSine","sin","easeInOutSine","easeInExpo","easeOutExpo","easeInOutExpo","easeInCirc","easeOutCirc","easeInOutCirc","easeInElastic","s","p","a","asin","easeOutElastic","easeInOutElastic","easeInBack","easeOutBack","easeInOutBack","easeInBounce","easeOutBounce","easeInOutBounce","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","setTimeout","cancelAnimFrame","cancelAnimationFrame","webkitCancelAnimationFrame","mozCancelAnimationFrame","oCancelAnimationFrame","msCancelAnimationFrame","clearTimeout","animationLoop","totalSteps","easingString","onProgress","onComplete","chartInstance","currentStep","easingFunction","animationFrame","stepDecimal","easeDecimal","getRelativePosition","evt","mouseX","mouseY","e","originalEvent","currentTarget","srcElement","boundingRect","getBoundingClientRect","touches","clientX","left","clientY","top","addEvent","node","eventType","method","addEventListener","attachEvent","removeEvent","handler","removeEventListener","detachEvent","bindEvents","arrayOfEvents","events","eventName","unbindEvents","getMaximumWidth","domNode","container","parentNode","clientWidth","getMaximumHeight","clientHeight","getMaximumSize","devicePixelRatio","style","scale","clear","clearRect","fontString","pixelSize","fontStyle","fontFamily","longestText","font","arrayOfStrings","longest","string","textWidth","measureText","drawRoundedRectangle","radius","beginPath","moveTo","lineTo","quadraticCurveTo","closePath","instances","Type","options","resize","initialize","stop","newWidth","newHeight","reflow","render","draw","generateLegend","legendTemplate","destroy","removeProperty","removeAttribute","showTooltip","ChartElements","forceRedraw","activeElements","isChanged","Elements","changed","datasets","dataArray","dataIndex","points","bars","segments","tooltipLabels","tooltipColors","medianPosition","dataCollection","xPositions","yPositions","xMax","yMax","xMin","yMin","dataset","hasValue","fill","_saved","fillColor","stroke","strokeColor","MultiTooltip","xPadding","yPadding","xOffset","textColor","fontSize","titleTextColor","titleFontFamily","titleFontStyle","titleFontSize","cornerRadius","labels","legendColors","legendColorBackground","title","label","custom","Element","tooltipPosition","Tooltip","caretHeight","text","toBase64Image","toDataURL","ChartType","name","chartName","baseDefaults","config","configuration","save","restore","props","update","newProps","transition","ease","Point","display","inRange","chartX","chartY","hitDetectionRange","hitDetectionRadius","arc","strokeStyle","lineWidth","strokeWidth","fillStyle","Arc","pointRelativePosition","betweenAngles","startAngle","endAngle","withinRadius","innerRadius","outerRadius","centreAngle","rangeFromCentre","animationPercent","easingDecimal","lineJoin","showStroke","Rectangle","halfWidth","leftX","rightX","halfStroke","xAlign","yAlign","caretPadding","tooltipWidth","tooltipRectHeight","tooltipHeight","tooltipX","tooltipY","textAlign","textBaseline","fillText","titleFont","titleWidth","labelWidth","longestTextWidth","halfHeight","getLineHeight","baseLineHeight","afterTitleIndex","fillRect","Scale","fit","buildYLabels","yLabels","stepDecimalPlaces","toFixed","yLabelWidth","showLabels","addXLabel","xLabels","valuesCount","removeXLabel","shift","startPoint","endPoint","padding","cachedHeight","cachedYLabelWidth","calculateYRange","calculateXLabelRotation","firstWidth","lastWidth","firstRotated","lastRotated","xScalePaddingRight","xScalePaddingLeft","xLabelRotation","originalLabelWidth","cosRotation","firstRotatedWidth","xLabelWidth","xGridWidth","calculateX","drawingArea","calculateY","scalingFactor","isRotated","innerWidth","valueWidth","offsetGridLines","valueOffset","yLabelGap","xStart","labelString","yLabelCenter","linePositionY","drawHorizontalLine","showHorizontalLines","gridLineWidth","gridLineColor","lineColor","xPos","linePos","drawVerticalLine","showVerticalLines","translate","rotate","RadialScale","size","backdropPaddingY","calculateCenterOffset","lineArc","setScaleSize","getCircumference","largestPossibleRadius","pointLabelFontSize","pointPosition","halfTextWidth","furthestRight","furthestRightIndex","furthestRightAngle","furthestLeft","furthestLeftIndex","furthestLeftAngle","xProtrusionLeft","xProtrusionRight","radiusReductionRight","radiusReductionLeft","maxWidthRadius","pointLabelFontStyle","pointLabelFontFamily","getPointPosition","getIndexAngle","setCenterPoint","leftMovement","rightMovement","maxRight","maxLeft","xCenter","yCenter","angleMultiplier","distanceFromCenter","thisAngle","yCenterOffset","yHeight","showLabelBackdrop","backdropColor","backdropPaddingX","fontColor","angleLineWidth","angleLineColor","outerPosition","pointLabelPosition","pointLabelFontColor","labelsCount","halfLabelsCount","quarterLabelsCount","upperHalf","exactQuarter","timeout","instance","module","exports","noConflict","defaultConfig","scaleShowGridLines","scaleGridLineColor","scaleGridLineWidth","scaleShowHorizontalLines","scaleShowVerticalLines","barShowStroke","barStrokeWidth","barValueSpacing","barDatasetSpacing","ScaleClass","calculateBarX","datasetCount","datasetIndex","barIndex","xWidth","calculateBaseWidth","xAbsolute","barWidth","calculateBarWidth","baseWidth","activeBars","type","getBarsAtEvent","eachBars","bar","activeBar","highlightFill","highlightStroke","BarClass","datasetObject","dataPoint","datasetLabel","buildScale","activeElement","barsArray","eventPosition","datasetIterator","dataTotal","values","scaleOptions","beginAtZero","currentHeight","updatedRanges","addData","removeData","newScaleProps","segmentShowStroke","segmentStrokeColor","segmentStrokeWidth","percentageInnerCutout","animateRotate","animateScale","SegmentArc","activeSegments","getSegmentsAtEvent","segment","activeSegment","highlightColor","calculateTotal","datapoint","segmentsArray","location","atIndex","silent","splice","color","highlight","circumference","calculateCircumference","total","indexToDelete","animDecimal","Doughnut","bezierCurve","bezierCurveTension","pointDot","pointDotRadius","pointDotStrokeWidth","pointHitDetectionRadius","datasetStroke","datasetStrokeWidth","datasetFill","PointClass","activePoints","getPointsAtEvent","eachPoints","point","activePoint","pointColor","pointStrokeColor","pointHighlightFill","pointHighlightStroke","pointsArray","nextPoint","previousPoint","pointsWithValues","tension","controlPoints","bezierCurveTo","scaleShowLabelBackdrop","scaleBackdropColor","scaleBackdropPaddingY","scaleBackdropPaddingX","scaleShowLine","updateScaleRange","datapoints","scaleSizes","angleShowLineOut","activePointsCollection","mousePosition","fromCenter","anglePerIndex","pointIndex","totalDataArray","OVERLAY_ID","OldModule","bundle","Module","moduleName","hot","hotData","_acceptCallbacks","_disposeCallbacks","accept","dispose","checkedAssets","assetsToAccept","isParcelRequire","WebSocket","hostname","protocol","ws","onmessage","event","JSON","parse","handled","assets","forEach","asset","isNew","didAccept","hmrAcceptCheck","parcelRequire","every","generated","js","hmrApply","v","hmrAcceptRun","reload","close","onclose","removeErrorOverlay","error","message","stack","overlay","createErrorOverlay","body","appendChild","getElementById","remove","createElement","stackTrace","innerText","innerHTML","getParents","modules","parents","k","d","dep","isArray","deps","cached","some","cb"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;AAWA,CAAC,YAAU;AAEV,eAFU,CAIV;;AACA,MAAIA,IAAI,GAAG,IAAX;AAAA,MACCC,QAAQ,GAAGD,IAAI,CAACE,KADjB,CALU,CAQV;;AACA,MAAIA,KAAK,GAAG,SAARA,KAAQ,CAASC,OAAT,EAAiB;AAC5B,QAAIC,KAAK,GAAG,IAAZ;AACA,SAAKC,MAAL,GAAcF,OAAO,CAACE,MAAtB;AAEA,SAAKC,GAAL,GAAWH,OAAX,CAJ4B,CAM5B;;AACA,QAAII,gBAAgB,GAAG,SAAnBA,gBAAmB,CAASC,OAAT,EAAiBC,SAAjB,EACvB;AACC,UAAID,OAAO,CAAC,WAASC,SAAV,CAAX,EACA;AACC,eAAOD,OAAO,CAAC,WAASC,SAAV,CAAd;AACA,OAHD,MAKA;AACC,eAAOC,QAAQ,CAACC,WAAT,CAAqBC,gBAArB,CAAsCJ,OAAtC,EAA+CK,gBAA/C,CAAgEJ,SAAhE,CAAP;AACA;AACD,KAVD;;AAYA,QAAIK,KAAK,GAAG,KAAKA,KAAL,GAAaP,gBAAgB,CAACJ,OAAO,CAACE,MAAT,EAAgB,OAAhB,CAAzC;AACA,QAAIU,MAAM,GAAG,KAAKA,MAAL,GAAcR,gBAAgB,CAACJ,OAAO,CAACE,MAAT,EAAgB,QAAhB,CAA3C,CApB4B,CAsB5B;;AACAF,IAAAA,OAAO,CAACE,MAAR,CAAeS,KAAf,GAAwBA,KAAxB;AACAX,IAAAA,OAAO,CAACE,MAAR,CAAeU,MAAf,GAAwBA,MAAxB;AAEA,QAAID,KAAK,GAAG,KAAKA,KAAL,GAAaX,OAAO,CAACE,MAAR,CAAeS,KAAxC;AACA,QAAIC,MAAM,GAAG,KAAKA,MAAL,GAAcZ,OAAO,CAACE,MAAR,CAAeU,MAA1C;AACA,SAAKC,WAAL,GAAmB,KAAKF,KAAL,GAAa,KAAKC,MAArC,CA5B4B,CA6B5B;;AACAE,IAAAA,OAAO,CAACC,WAAR,CAAoB,IAApB;AAEA,WAAO,IAAP;AACA,GAjCD,CATU,CA2CV;;;AACAhB,EAAAA,KAAK,CAACiB,QAAN,GAAiB;AAChBC,IAAAA,MAAM,EAAE;AACP;AACAC,MAAAA,SAAS,EAAE,IAFJ;AAIP;AACAC,MAAAA,cAAc,EAAE,EALT;AAOP;AACAC,MAAAA,eAAe,EAAE,cARV;AAUP;AACAC,MAAAA,SAAS,EAAE,IAXJ;AAaP;AACAC,MAAAA,aAAa,EAAE,KAdR;AAgBP;AACA;AACAC,MAAAA,UAAU,EAAE,IAlBL;AAmBP;AACAC,MAAAA,cAAc,EAAE,IApBT;AAqBP;AACAC,MAAAA,eAAe,EAAE,IAtBV;AAwBP;AACAC,MAAAA,cAAc,EAAE,gBAzBT;AA2BP;AACAC,MAAAA,cAAc,EAAE,CA5BT;AA8BP;AACAC,MAAAA,eAAe,EAAE,IA/BV;AAiCP;AACAC,MAAAA,UAAU,EAAE,YAlCL;AAoCP;AACAC,MAAAA,iBAAiB,EAAE,IArCZ;AAuCP;AACAC,MAAAA,gBAAgB,EAAE,KAxCX;AA0CP;AACAC,MAAAA,eAAe,EAAE,oDA3CV;AA6CP;AACAC,MAAAA,aAAa,EAAE,EA9CR;AAgDP;AACAC,MAAAA,cAAc,EAAE,QAjDT;AAmDP;AACAC,MAAAA,cAAc,EAAE,MApDT;AAsDP;AACAC,MAAAA,UAAU,EAAE,KAvDL;AAyDP;AACAC,MAAAA,mBAAmB,EAAE,IA1Dd;AA4DP;AACAC,MAAAA,YAAY,EAAE,IA7DP;AA+DP;AACAC,MAAAA,cAAc,EAAE,KAhET;AAkEP;AACAC,MAAAA,aAAa,EAAE,CAAC,WAAD,EAAc,YAAd,EAA4B,WAA5B,EAAyC,UAAzC,CAnER;AAqEP;AACAC,MAAAA,gBAAgB,EAAE,iBAtEX;AAwEP;AACAC,MAAAA,iBAAiB,EAAE,oDAzEZ;AA2EP;AACAC,MAAAA,eAAe,EAAE,EA5EV;AA8EP;AACAC,MAAAA,gBAAgB,EAAE,QA/EX;AAiFP;AACAC,MAAAA,gBAAgB,EAAE,MAlFX;AAoFP;AACAC,MAAAA,sBAAsB,EAAE,oDArFjB;AAuFP;AACAC,MAAAA,oBAAoB,EAAE,EAxFf;AA0FP;AACAC,MAAAA,qBAAqB,EAAE,MA3FhB;AA6FP;AACAC,MAAAA,qBAAqB,EAAE,MA9FhB;AAgGP;AACAC,MAAAA,eAAe,EAAE,CAjGV;AAmGP;AACAC,MAAAA,eAAe,EAAE,CApGV;AAsGP;AACAC,MAAAA,gBAAgB,EAAE,CAvGX;AAyGP;AACAC,MAAAA,mBAAmB,EAAE,CA1Gd;AA4GP;AACAC,MAAAA,cAAc,EAAE,EA7GT;AA+GP;AACAC,MAAAA,eAAe,EAAE,8CAhHV;AAkHP;AACAC,MAAAA,oBAAoB,EAAE,cAnHf;AAqHP;AACAC,MAAAA,yBAAyB,EAAE,MAtHpB;AAwHP;AACAC,MAAAA,mBAAmB,EAAE,+BAAU,CAAE,CAzH1B;AA2HP;AACAC,MAAAA,mBAAmB,EAAE,+BAAU,CAAE;AA5H1B;AADQ,GAAjB,CA5CU,CA8KV;;AACA5D,EAAAA,KAAK,CAAC6D,KAAN,GAAc,EAAd,CA/KU,CAiLV;;AACA,MAAI9C,OAAO,GAAGf,KAAK,CAACe,OAAN,GAAgB,EAA9B,CAlLU,CAoLT;;AACD,MAAI+C,IAAI,GAAG/C,OAAO,CAAC+C,IAAR,GAAe,UAASC,QAAT,EAAkBC,QAAlB,EAA2BC,IAA3B,EAAgC;AACxD,QAAIC,cAAc,GAAGC,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAsC,CAAtC,CAArB,CADwD,CAExD;;AACA,QAAIR,QAAJ,EAAa;AACZ,UAAIA,QAAQ,CAACS,MAAT,KAAoB,CAACT,QAAQ,CAACS,MAAlC,EAAyC;AACxC,YAAIC,CAAJ;;AACA,aAAKA,CAAC,GAAC,CAAP,EAAUA,CAAC,GAACV,QAAQ,CAACS,MAArB,EAA6BC,CAAC,EAA9B,EAAiC;AAChCT,UAAAA,QAAQ,CAACU,KAAT,CAAeT,IAAf,EAAoB,CAACF,QAAQ,CAACU,CAAD,CAAT,EAAcA,CAAd,EAAiBE,MAAjB,CAAwBT,cAAxB,CAApB;AACA;AACD,OALD,MAMI;AACH,aAAK,IAAIU,IAAT,IAAiBb,QAAjB,EAA0B;AACzBC,UAAAA,QAAQ,CAACU,KAAT,CAAeT,IAAf,EAAoB,CAACF,QAAQ,CAACa,IAAD,CAAT,EAAgBA,IAAhB,EAAsBD,MAAtB,CAA6BT,cAA7B,CAApB;AACA;AACD;AACD;AACD,GAhBF;AAAA,MAiBCW,KAAK,GAAG9D,OAAO,CAAC8D,KAAR,GAAgB,UAASC,GAAT,EAAa;AACpC,QAAIC,QAAQ,GAAG,EAAf;AACAjB,IAAAA,IAAI,CAACgB,GAAD,EAAK,UAASE,KAAT,EAAeC,GAAf,EAAmB;AAC3B,UAAIH,GAAG,CAACI,cAAJ,CAAmBD,GAAnB,CAAJ,EAA6BF,QAAQ,CAACE,GAAD,CAAR,GAAgBD,KAAhB;AAC7B,KAFG,CAAJ;AAGA,WAAOD,QAAP;AACA,GAvBF;AAAA,MAwBCI,MAAM,GAAGpE,OAAO,CAACoE,MAAR,GAAiB,UAASC,IAAT,EAAc;AACvCtB,IAAAA,IAAI,CAACK,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAqC,CAArC,CAAD,EAA0C,UAASc,eAAT,EAA0B;AACvEvB,MAAAA,IAAI,CAACuB,eAAD,EAAiB,UAASL,KAAT,EAAeC,GAAf,EAAmB;AACvC,YAAII,eAAe,CAACH,cAAhB,CAA+BD,GAA/B,CAAJ,EAAyCG,IAAI,CAACH,GAAD,CAAJ,GAAYD,KAAZ;AACzC,OAFG,CAAJ;AAGA,KAJG,CAAJ;AAKA,WAAOI,IAAP;AACA,GA/BF;AAAA,MAgCCE,KAAK,GAAGvE,OAAO,CAACuE,KAAR,GAAgB,UAASF,IAAT,EAAcG,MAAd,EAAqB;AAC5C;AACA,QAAIC,IAAI,GAAGrB,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAqC,CAArC,CAAX;AACAiB,IAAAA,IAAI,CAACC,OAAL,CAAa,EAAb;AACA,WAAON,MAAM,CAACT,KAAP,CAAa,IAAb,EAAmBc,IAAnB,CAAP;AACA,GArCF;AAAA,MAsCCE,OAAO,GAAG3E,OAAO,CAAC2E,OAAR,GAAkB,UAASC,aAAT,EAAwBf,IAAxB,EAA6B;AACxD,QAAIT,KAAK,CAACC,SAAN,CAAgBsB,OAApB,EAA6B;AAC5B,aAAOC,aAAa,CAACD,OAAd,CAAsBd,IAAtB,CAAP;AACA,KAFD,MAGI;AACH,WAAK,IAAIH,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGkB,aAAa,CAACnB,MAAlC,EAA0CC,CAAC,EAA3C,EAA+C;AAC9C,YAAIkB,aAAa,CAAClB,CAAD,CAAb,KAAqBG,IAAzB,EAA+B,OAAOH,CAAP;AAC/B;;AACD,aAAO,CAAC,CAAR;AACA;AACD,GAhDF;AAAA,MAiDCmB,KAAK,GAAG7E,OAAO,CAAC6E,KAAR,GAAgB,UAASC,UAAT,EAAqBC,cAArB,EAAoC;AAC3D,QAAIC,QAAQ,GAAG,EAAf;AAEAhF,IAAAA,OAAO,CAAC+C,IAAR,CAAa+B,UAAb,EAAyB,UAASjB,IAAT,EAAc;AACtC,UAAIkB,cAAc,CAAClB,IAAD,CAAlB,EAAyB;AACxBmB,QAAAA,QAAQ,CAACC,IAAT,CAAcpB,IAAd;AACA;AACD,KAJD;AAMA,WAAOmB,QAAP;AACA,GA3DF;AAAA,MA4DCE,aAAa,GAAGlF,OAAO,CAACkF,aAAR,GAAwB,UAASN,aAAT,EAAwBG,cAAxB,EAAwCI,UAAxC,EAAmD;AAC1F;AACA,QAAI,CAACA,UAAL,EAAgB;AACfA,MAAAA,UAAU,GAAG,CAAC,CAAd;AACA;;AACD,SAAK,IAAIzB,CAAC,GAAGyB,UAAU,GAAG,CAA1B,EAA6BzB,CAAC,GAAGkB,aAAa,CAACnB,MAA/C,EAAuDC,CAAC,EAAxD,EAA4D;AAC3D,UAAI0B,WAAW,GAAGR,aAAa,CAAClB,CAAD,CAA/B;;AACA,UAAIqB,cAAc,CAACK,WAAD,CAAlB,EAAgC;AAC/B,eAAOA,WAAP;AACA;AACD;AACD,GAvEF;AAAA,MAwECC,iBAAiB,GAAGrF,OAAO,CAACqF,iBAAR,GAA4B,UAAST,aAAT,EAAwBG,cAAxB,EAAwCI,UAAxC,EAAmD;AAClG;AACA,QAAI,CAACA,UAAL,EAAgB;AACfA,MAAAA,UAAU,GAAGP,aAAa,CAACnB,MAA3B;AACA;;AACD,SAAK,IAAIC,CAAC,GAAGyB,UAAU,GAAG,CAA1B,EAA6BzB,CAAC,IAAI,CAAlC,EAAqCA,CAAC,EAAtC,EAA0C;AACzC,UAAI0B,WAAW,GAAGR,aAAa,CAAClB,CAAD,CAA/B;;AACA,UAAIqB,cAAc,CAACK,WAAD,CAAlB,EAAgC;AAC/B,eAAOA,WAAP;AACA;AACD;AACD,GAnFF;AAAA,MAoFCE,QAAQ,GAAGtF,OAAO,CAACsF,QAAR,GAAmB,UAASC,UAAT,EAAoB;AACjD;AACA,QAAIC,MAAM,GAAG,IAAb;AACA,QAAIC,YAAY,GAAIF,UAAU,IAAIA,UAAU,CAACpB,cAAX,CAA0B,aAA1B,CAAf,GAA2DoB,UAAU,CAACG,WAAtE,GAAoF,YAAU;AAAE,aAAOF,MAAM,CAAC7B,KAAP,CAAa,IAAb,EAAmBH,SAAnB,CAAP;AAAuC,KAA1J;;AAEA,QAAImC,SAAS,GAAG,SAAZA,SAAY,GAAU;AAAE,WAAKD,WAAL,GAAmBD,YAAnB;AAAiC,KAA7D;;AACAE,IAAAA,SAAS,CAACtC,SAAV,GAAsBmC,MAAM,CAACnC,SAA7B;AACAoC,IAAAA,YAAY,CAACpC,SAAb,GAAyB,IAAIsC,SAAJ,EAAzB;AAEAF,IAAAA,YAAY,CAACrB,MAAb,GAAsBkB,QAAtB;AAEA,QAAIC,UAAJ,EAAgBnB,MAAM,CAACqB,YAAY,CAACpC,SAAd,EAAyBkC,UAAzB,CAAN;AAEhBE,IAAAA,YAAY,CAACG,SAAb,GAAyBJ,MAAM,CAACnC,SAAhC;AAEA,WAAOoC,YAAP;AACA,GApGF;AAAA,MAqGCI,IAAI,GAAG7F,OAAO,CAAC6F,IAAR,GAAe,YAAU,CAAE,CArGnC;AAAA,MAsGCC,GAAG,GAAG9F,OAAO,CAAC8F,GAAR,GAAe,YAAU;AAC9B,QAAIC,EAAE,GAAC,CAAP;AACA,WAAO,YAAU;AAChB,aAAO,WAAWA,EAAE,EAApB;AACA,KAFD;AAGA,GALmB,EAtGrB;AAAA,MA4GCC,IAAI,GAAGhG,OAAO,CAACgG,IAAR,GAAe,UAASC,GAAT,EAAa;AAClC;AACA,QAAIC,MAAM,CAACC,OAAP,IAAkB,OAAOD,MAAM,CAACC,OAAP,CAAeH,IAAtB,IAA8B,UAApD,EAAgEG,OAAO,CAACH,IAAR,CAAaC,GAAb;AAChE,GA/GF;AAAA,MAgHCG,GAAG,GAAGpG,OAAO,CAACoG,GAAR,GAAe,OAAOC,MAAP,IAAiB,UAAjB,IAA+BA,MAAM,CAACD,GAhH5D;AAAA,MAiHC;AACAE,EAAAA,QAAQ,GAAGtG,OAAO,CAACsG,QAAR,GAAmB,UAASC,CAAT,EAAW;AACxC,WAAO,CAACC,KAAK,CAACC,UAAU,CAACF,CAAD,CAAX,CAAN,IAAyBG,QAAQ,CAACH,CAAD,CAAxC;AACA,GApHF;AAAA,MAqHCI,GAAG,GAAG3G,OAAO,CAAC2G,GAAR,GAAc,UAASC,KAAT,EAAe;AAClC,WAAOC,IAAI,CAACF,GAAL,CAAShD,KAAT,CAAgBkD,IAAhB,EAAsBD,KAAtB,CAAP;AACA,GAvHF;AAAA,MAwHCE,GAAG,GAAG9G,OAAO,CAAC8G,GAAR,GAAc,UAASF,KAAT,EAAe;AAClC,WAAOC,IAAI,CAACC,GAAL,CAASnD,KAAT,CAAgBkD,IAAhB,EAAsBD,KAAtB,CAAP;AACA,GA1HF;AAAA,MA2HCG,GAAG,GAAG/G,OAAO,CAAC+G,GAAR,GAAc,UAASC,UAAT,EAAoBC,QAApB,EAA6BC,QAA7B,EAAsC;AACzD,QAAGZ,QAAQ,CAACW,QAAD,CAAX,EAAuB;AACtB,UAAID,UAAU,GAAGC,QAAjB,EAA4B;AAC3B,eAAOA,QAAP;AACA;AACD,KAJD,MAKK,IAAGX,QAAQ,CAACY,QAAD,CAAX,EAAsB;AAC1B,UAAKF,UAAU,GAAGE,QAAlB,EAA4B;AAC3B,eAAOA,QAAP;AACA;AACD;;AACD,WAAOF,UAAP;AACA,GAvIF;AAAA,MAwICG,gBAAgB,GAAGnH,OAAO,CAACmH,gBAAR,GAA2B,UAASC,GAAT,EAAa;AAC1D,QAAIA,GAAG,GAAC,CAAJ,KAAQ,CAAR,IAAad,QAAQ,CAACc,GAAD,CAAzB,EAA+B;AAC9B,aAAOA,GAAG,CAACC,QAAJ,GAAeC,KAAf,CAAqB,GAArB,EAA0B,CAA1B,EAA6B7D,MAApC;AACA,KAFD,MAGK;AACJ,aAAO,CAAP;AACA;AACD,GA/IF;AAAA,MAgJC8D,SAAS,GAAGvH,OAAO,CAACwH,OAAR,GAAkB,UAASC,OAAT,EAAiB;AAC9C,WAAOA,OAAO,IAAIZ,IAAI,CAACa,EAAL,GAAQ,GAAZ,CAAd;AACA,GAlJF;AAAA,MAmJC;AACAC,EAAAA,iBAAiB,GAAG3H,OAAO,CAAC2H,iBAAR,GAA4B,UAASC,WAAT,EAAsBC,UAAtB,EAAiC;AAChF,QAAIC,mBAAmB,GAAGD,UAAU,CAACE,CAAX,GAAeH,WAAW,CAACG,CAArD;AAAA,QACCC,mBAAmB,GAAGH,UAAU,CAACI,CAAX,GAAeL,WAAW,CAACK,CADlD;AAAA,QAECC,wBAAwB,GAAGrB,IAAI,CAACsB,IAAL,CAAWL,mBAAmB,GAAGA,mBAAtB,GAA4CE,mBAAmB,GAAGA,mBAA7E,CAF5B;AAKA,QAAII,KAAK,GAAGvB,IAAI,CAACa,EAAL,GAAU,CAAV,GAAcb,IAAI,CAACwB,KAAL,CAAWL,mBAAX,EAAgCF,mBAAhC,CAA1B,CANgF,CAQhF;;AACA,QAAIA,mBAAmB,GAAG,CAAtB,IAA2BE,mBAAmB,GAAG,CAArD,EAAuD;AACtDI,MAAAA,KAAK,IAAIvB,IAAI,CAACa,EAAL,GAAQ,CAAjB;AACA;;AAED,WAAO;AACNU,MAAAA,KAAK,EAAEA,KADD;AAENE,MAAAA,QAAQ,EAAEJ;AAFJ,KAAP;AAIA,GArKF;AAAA,MAsKCK,UAAU,GAAGvI,OAAO,CAACuI,UAAR,GAAqB,UAASC,UAAT,EAAoB;AACrD,WAAQA,UAAU,GAAG,CAAb,KAAmB,CAApB,GAAyB,CAAzB,GAA6B,GAApC;AACA,GAxKF;AAAA,MAyKCC,WAAW,GAAGzI,OAAO,CAACyI,WAAR,GAAsB,UAASC,UAAT,EAAoBC,WAApB,EAAgCC,UAAhC,EAA2CC,CAA3C,EAA6C;AAChF;AACA;AACA,QAAIC,GAAG,GAACjC,IAAI,CAACsB,IAAL,CAAUtB,IAAI,CAACkC,GAAL,CAASJ,WAAW,CAACZ,CAAZ,GAAcW,UAAU,CAACX,CAAlC,EAAoC,CAApC,IAAuClB,IAAI,CAACkC,GAAL,CAASJ,WAAW,CAACV,CAAZ,GAAcS,UAAU,CAACT,CAAlC,EAAoC,CAApC,CAAjD,CAAR;AAAA,QACCe,GAAG,GAACnC,IAAI,CAACsB,IAAL,CAAUtB,IAAI,CAACkC,GAAL,CAASH,UAAU,CAACb,CAAX,GAAaY,WAAW,CAACZ,CAAlC,EAAoC,CAApC,IAAuClB,IAAI,CAACkC,GAAL,CAASH,UAAU,CAACX,CAAX,GAAaU,WAAW,CAACV,CAAlC,EAAoC,CAApC,CAAjD,CADL;AAAA,QAECgB,EAAE,GAACJ,CAAC,GAACC,GAAF,IAAOA,GAAG,GAACE,GAAX,CAFJ;AAAA,QAEoB;AACnBE,IAAAA,EAAE,GAACL,CAAC,GAACG,GAAF,IAAOF,GAAG,GAACE,GAAX,CAHJ;AAIA,WAAO;AACNG,MAAAA,KAAK,EAAG;AACPpB,QAAAA,CAAC,EAAGY,WAAW,CAACZ,CAAZ,GAAckB,EAAE,IAAEL,UAAU,CAACb,CAAX,GAAaW,UAAU,CAACX,CAA1B,CADb;AAEPE,QAAAA,CAAC,EAAGU,WAAW,CAACV,CAAZ,GAAcgB,EAAE,IAAEL,UAAU,CAACX,CAAX,GAAaS,UAAU,CAACT,CAA1B;AAFb,OADF;AAKNmB,MAAAA,KAAK,EAAG;AACPrB,QAAAA,CAAC,EAAEY,WAAW,CAACZ,CAAZ,GAAcmB,EAAE,IAAEN,UAAU,CAACb,CAAX,GAAaW,UAAU,CAACX,CAA1B,CADZ;AAEPE,QAAAA,CAAC,EAAGU,WAAW,CAACV,CAAZ,GAAciB,EAAE,IAAEN,UAAU,CAACX,CAAX,GAAaS,UAAU,CAACT,CAA1B;AAFb;AALF,KAAP;AAUA,GA1LF;AAAA,MA2LCoB,yBAAyB,GAAGrJ,OAAO,CAACqJ,yBAAR,GAAoC,UAASC,GAAT,EAAa;AAC5E,WAAOzC,IAAI,CAAC0C,KAAL,CAAW1C,IAAI,CAAC2C,GAAL,CAASF,GAAT,IAAgBzC,IAAI,CAAC4C,IAAhC,CAAP;AACA,GA7LF;AAAA,MA8LCC,mBAAmB,GAAG1J,OAAO,CAAC0J,mBAAR,GAA8B,UAASC,WAAT,EAAsBC,WAAtB,EAAmCC,QAAnC,EAA6CC,aAA7C,EAA4DC,YAA5D,EAAyE;AAE5H;AACA,QAAIC,QAAQ,GAAG,CAAf;AAAA,QACCC,QAAQ,GAAGpD,IAAI,CAAC0C,KAAL,CAAWK,WAAW,IAAEC,QAAQ,GAAG,GAAb,CAAtB,CADZ;AAAA,QAECK,WAAW,GAAIF,QAAQ,IAAIC,QAF5B;AAIA,QAAIhD,QAAQ,GAAGN,GAAG,CAACgD,WAAD,CAAlB;AAAA,QACCzC,QAAQ,GAAGJ,GAAG,CAAC6C,WAAD,CADf,CAP4H,CAU5H;AACA;;AACA,QAAI1C,QAAQ,KAAKC,QAAjB,EAA0B;AACzBD,MAAAA,QAAQ,IAAI,GAAZ,CADyB,CAEzB;;AACA,UAAIC,QAAQ,IAAI,GAAZ,IAAmB,CAAC4C,aAAxB,EAAsC;AACrC5C,QAAAA,QAAQ,IAAI,GAAZ;AACA,OAFD,MAGI;AACH;AACAD,QAAAA,QAAQ,IAAI,GAAZ;AACA;AACD;;AAED,QAAIkD,UAAU,GAAGtD,IAAI,CAACuD,GAAL,CAASnD,QAAQ,GAAGC,QAApB,CAAjB;AAAA,QACCmD,qBAAqB,GAAGhB,yBAAyB,CAACc,UAAD,CADlD;AAAA,QAECG,QAAQ,GAAGzD,IAAI,CAAC0D,IAAL,CAAUtD,QAAQ,IAAI,IAAIJ,IAAI,CAACkC,GAAL,CAAS,EAAT,EAAasB,qBAAb,CAAR,CAAlB,IAAkExD,IAAI,CAACkC,GAAL,CAAS,EAAT,EAAasB,qBAAb,CAF9E;AAAA,QAGCG,QAAQ,GAAIV,aAAD,GAAkB,CAAlB,GAAsBjD,IAAI,CAAC0C,KAAL,CAAWrC,QAAQ,IAAI,IAAIL,IAAI,CAACkC,GAAL,CAAS,EAAT,EAAasB,qBAAb,CAAR,CAAnB,IAAmExD,IAAI,CAACkC,GAAL,CAAS,EAAT,EAAasB,qBAAb,CAHrG;AAAA,QAICI,UAAU,GAAGH,QAAQ,GAAGE,QAJzB;AAAA,QAKCE,SAAS,GAAG7D,IAAI,CAACkC,GAAL,CAAS,EAAT,EAAasB,qBAAb,CALb;AAAA,QAMCM,aAAa,GAAG9D,IAAI,CAAC+D,KAAL,CAAWH,UAAU,GAAGC,SAAxB,CANjB,CAxB4H,CAgC5H;;AACA,WAAM,CAACC,aAAa,GAAGV,QAAhB,IAA6BU,aAAa,GAAG,CAAjB,GAAsBV,QAAnD,KAAgE,CAACC,WAAvE,EAAoF;AACnF,UAAGS,aAAa,GAAGV,QAAnB,EAA4B;AAC3BS,QAAAA,SAAS,IAAG,CAAZ;AACAC,QAAAA,aAAa,GAAG9D,IAAI,CAAC+D,KAAL,CAAWH,UAAU,GAACC,SAAtB,CAAhB,CAF2B,CAG3B;;AACA,YAAIC,aAAa,GAAG,CAAhB,KAAsB,CAA1B,EAA4B;AAC3BT,UAAAA,WAAW,GAAG,IAAd;AACA;AACD,OAPD,CAQA;AARA,WASI;AACH;AACA,cAAIH,YAAY,IAAIM,qBAAqB,IAAI,CAA7C,EAA+C;AAC9C;AACA,gBAAGK,SAAS,GAAC,CAAV,GAAc,CAAd,KAAoB,CAAvB,EAAyB;AACxBA,cAAAA,SAAS,IAAG,CAAZ;AACAC,cAAAA,aAAa,GAAG9D,IAAI,CAAC+D,KAAL,CAAWH,UAAU,GAACC,SAAtB,CAAhB;AACA,aAHD,CAIA;AAJA,iBAKI;AACH;AACA;AACD,WAVD,CAWA;AAXA,eAYI;AACHA,cAAAA,SAAS,IAAG,CAAZ;AACAC,cAAAA,aAAa,GAAG9D,IAAI,CAAC+D,KAAL,CAAWH,UAAU,GAACC,SAAtB,CAAhB;AACA;AAED;AACD;;AAED,QAAIR,WAAJ,EAAgB;AACfS,MAAAA,aAAa,GAAGX,QAAhB;AACAU,MAAAA,SAAS,GAAGD,UAAU,GAAGE,aAAzB;AACA;;AAED,WAAO;AACNE,MAAAA,KAAK,EAAGF,aADF;AAEND,MAAAA,SAAS,EAAGA,SAFN;AAGN5D,MAAAA,GAAG,EAAG0D,QAHA;AAIN7D,MAAAA,GAAG,EAAG6D,QAAQ,GAAIG,aAAa,GAAGD;AAJ5B,KAAP;AAOA,GA3QF;;AA4QC;AACA;AACA;AACA;AACAI,EAAAA,QAAQ,GAAG9K,OAAO,CAAC8K,QAAR,GAAmB,UAASC,cAAT,EAAyBC,YAAzB,EAAsC;AAEnE;AAEA,QAAGD,cAAc,YAAYE,QAA7B,EAAsC;AACpC,aAAOF,cAAc,CAACC,YAAD,CAArB;AACA;;AAEF,QAAIE,KAAK,GAAG,EAAZ;;AACA,aAASC,IAAT,CAAclF,GAAd,EAAmBmF,IAAnB,EAAwB;AACvB;AACA;AACA,UAAIC,EAAE,GAAG,CAAC,KAAKC,IAAL,CAAUrF,GAAV,CAAD,GACTiF,KAAK,CAACjF,GAAD,CAAL,GAAaiF,KAAK,CAACjF,GAAD,CADT,GAGT;AACA;AACA,UAAIgF,QAAJ,CAAa,KAAb,EACC,2DAEA;AACA,0BAHA,GAKA;AACAhF,MAAAA,GAAG,CACDsF,OADF,CACU,WADV,EACuB,GADvB,EAEEjE,KAFF,CAEQ,IAFR,EAEckE,IAFd,CAEmB,IAFnB,EAGED,OAHF,CAGU,kBAHV,EAG8B,MAH9B,EAIEA,OAJF,CAIU,aAJV,EAIyB,QAJzB,EAKEjE,KALF,CAKQ,IALR,EAKckE,IALd,CAKmB,KALnB,EAMElE,KANF,CAMQ,IANR,EAMckE,IANd,CAMmB,UANnB,EAOElE,KAPF,CAOQ,IAPR,EAOckE,IAPd,CAOmB,KAPnB,CANA,GAcA,wBAfD,CALA,CAHuB,CA0BvB;;AACA,aAAOJ,IAAI,GAAGC,EAAE,CAAED,IAAF,CAAL,GAAgBC,EAA3B;AACA;;AACD,WAAOF,IAAI,CAACJ,cAAD,EAAgBC,YAAhB,CAAX;AACA,GAvTF;;AAwTC;AACAS,EAAAA,cAAc,GAAGzL,OAAO,CAACyL,cAAR,GAAyB,UAASV,cAAT,EAAwBJ,aAAxB,EAAsCH,QAAtC,EAA+CE,SAA/C,EAAyD;AAClG,QAAIgB,WAAW,GAAG,IAAItI,KAAJ,CAAUuH,aAAV,CAAlB;;AACA,QAAIgB,mBAAJ,EAAwB;AACvB5I,MAAAA,IAAI,CAAC2I,WAAD,EAAa,UAASpC,GAAT,EAAasC,KAAb,EAAmB;AACnCF,QAAAA,WAAW,CAACE,KAAD,CAAX,GAAqBd,QAAQ,CAACC,cAAD,EAAgB;AAAC9G,UAAAA,KAAK,EAAGuG,QAAQ,GAAIE,SAAS,IAAEkB,KAAK,GAAC,CAAR;AAA9B,SAAhB,CAA7B;AACA,OAFG,CAAJ;AAGA;;AACD,WAAOF,WAAP;AACA,GAjUF;AAAA,MAkUC;AACA;AACA;AACAG,EAAAA,aAAa,GAAG7L,OAAO,CAAC6L,aAAR,GAAwB;AACvCC,IAAAA,MAAM,EAAE,gBAAUjD,CAAV,EAAa;AACpB,aAAOA,CAAP;AACA,KAHsC;AAIvCkD,IAAAA,UAAU,EAAE,oBAAUlD,CAAV,EAAa;AACxB,aAAOA,CAAC,GAAGA,CAAX;AACA,KANsC;AAOvCmD,IAAAA,WAAW,EAAE,qBAAUnD,CAAV,EAAa;AACzB,aAAO,CAAC,CAAD,GAAKA,CAAL,IAAUA,CAAC,GAAG,CAAd,CAAP;AACA,KATsC;AAUvCoD,IAAAA,aAAa,EAAE,uBAAUpD,CAAV,EAAa;AAC3B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB,OAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAnB;AACtB,aAAO,CAAC,CAAD,GAAK,CAAL,IAAW,EAAEA,CAAH,IAASA,CAAC,GAAG,CAAb,IAAkB,CAA5B,CAAP;AACA,KAbsC;AAcvCqD,IAAAA,WAAW,EAAE,qBAAUrD,CAAV,EAAa;AACzB,aAAOA,CAAC,GAAGA,CAAJ,GAAQA,CAAf;AACA,KAhBsC;AAiBvCsD,IAAAA,YAAY,EAAE,sBAAUtD,CAAV,EAAa;AAC1B,aAAO,KAAK,CAACA,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,GAAsBA,CAAtB,GAA0B,CAA/B,CAAP;AACA,KAnBsC;AAoBvCuD,IAAAA,cAAc,EAAE,wBAAUvD,CAAV,EAAa;AAC5B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB,OAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAvB;AACtB,aAAO,IAAI,CAAJ,IAAS,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmB,CAA5B,CAAP;AACA,KAvBsC;AAwBvCwD,IAAAA,WAAW,EAAE,qBAAUxD,CAAV,EAAa;AACzB,aAAOA,CAAC,GAAGA,CAAJ,GAAQA,CAAR,GAAYA,CAAnB;AACA,KA1BsC;AA2BvCyD,IAAAA,YAAY,EAAE,sBAAUzD,CAAV,EAAa;AAC1B,aAAO,CAAC,CAAD,IAAM,CAACA,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,GAAsBA,CAAtB,GAA0BA,CAA1B,GAA8B,CAApC,CAAP;AACA,KA7BsC;AA8BvC0D,IAAAA,cAAc,EAAE,wBAAU1D,CAAV,EAAa;AAC5B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB,OAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAhB,GAAoBA,CAA3B;AACtB,aAAO,CAAC,CAAD,GAAK,CAAL,IAAU,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuB,CAAjC,CAAP;AACA,KAjCsC;AAkCvC2D,IAAAA,WAAW,EAAE,qBAAU3D,CAAV,EAAa;AACzB,aAAO,KAAKA,CAAC,IAAI,CAAV,IAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAAvB,GAA2BA,CAAlC;AACA,KApCsC;AAqCvC4D,IAAAA,YAAY,EAAE,sBAAU5D,CAAV,EAAa;AAC1B,aAAO,KAAK,CAACA,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,GAAsBA,CAAtB,GAA0BA,CAA1B,GAA8BA,CAA9B,GAAkC,CAAvC,CAAP;AACA,KAvCsC;AAwCvC6D,IAAAA,cAAc,EAAE,wBAAU7D,CAAV,EAAa;AAC5B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB,OAAO,IAAI,CAAJ,GAAQA,CAAR,GAAYA,CAAZ,GAAgBA,CAAhB,GAAoBA,CAApB,GAAwBA,CAA/B;AACtB,aAAO,IAAI,CAAJ,IAAS,CAACA,CAAC,IAAI,CAAN,IAAWA,CAAX,GAAeA,CAAf,GAAmBA,CAAnB,GAAuBA,CAAvB,GAA2B,CAApC,CAAP;AACA,KA3CsC;AA4CvC8D,IAAAA,UAAU,EAAE,oBAAU9D,CAAV,EAAa;AACxB,aAAO,CAAC,CAAD,GAAKhC,IAAI,CAAC+F,GAAL,CAAS/D,CAAC,GAAG,CAAJ,IAAShC,IAAI,CAACa,EAAL,GAAU,CAAnB,CAAT,CAAL,GAAuC,CAA9C;AACA,KA9CsC;AA+CvCmF,IAAAA,WAAW,EAAE,qBAAUhE,CAAV,EAAa;AACzB,aAAO,IAAIhC,IAAI,CAACiG,GAAL,CAASjE,CAAC,GAAG,CAAJ,IAAShC,IAAI,CAACa,EAAL,GAAU,CAAnB,CAAT,CAAX;AACA,KAjDsC;AAkDvCqF,IAAAA,aAAa,EAAE,uBAAUlE,CAAV,EAAa;AAC3B,aAAO,CAAC,CAAD,GAAK,CAAL,IAAUhC,IAAI,CAAC+F,GAAL,CAAS/F,IAAI,CAACa,EAAL,GAAUmB,CAAV,GAAc,CAAvB,IAA4B,CAAtC,CAAP;AACA,KApDsC;AAqDvCmE,IAAAA,UAAU,EAAE,oBAAUnE,CAAV,EAAa;AACxB,aAAQA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAgB,IAAIhC,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,MAAMF,CAAC,GAAG,CAAJ,GAAQ,CAAd,CAAZ,CAA3B;AACA,KAvDsC;AAwDvCoE,IAAAA,WAAW,EAAE,qBAAUpE,CAAV,EAAa;AACzB,aAAQA,CAAC,KAAK,CAAP,GAAY,CAAZ,GAAgB,KAAK,CAAChC,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMF,CAAN,GAAU,CAAtB,CAAD,GAA4B,CAAjC,CAAvB;AACA,KA1DsC;AA2DvCqE,IAAAA,aAAa,EAAE,uBAAUrE,CAAV,EAAa;AAC3B,UAAIA,CAAC,KAAK,CAAV,EAAa,OAAO,CAAP;AACb,UAAIA,CAAC,KAAK,CAAV,EAAa,OAAO,CAAP;AACb,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB,OAAO,IAAI,CAAJ,GAAQhC,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,MAAMF,CAAC,GAAG,CAAV,CAAZ,CAAf;AACtB,aAAO,IAAI,CAAJ,IAAS,CAAChC,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAM,EAAEF,CAApB,CAAD,GAA0B,CAAnC,CAAP;AACA,KAhEsC;AAiEvCsE,IAAAA,UAAU,EAAE,oBAAUtE,CAAV,EAAa;AACxB,UAAIA,CAAC,IAAI,CAAT,EAAY,OAAOA,CAAP;AACZ,aAAO,CAAC,CAAD,IAAMhC,IAAI,CAACsB,IAAL,CAAU,IAAI,CAACU,CAAC,IAAI,CAAN,IAAWA,CAAzB,IAA8B,CAApC,CAAP;AACA,KApEsC;AAqEvCuE,IAAAA,WAAW,EAAE,qBAAUvE,CAAV,EAAa;AACzB,aAAO,IAAIhC,IAAI,CAACsB,IAAL,CAAU,IAAI,CAACU,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAhC,CAAX;AACA,KAvEsC;AAwEvCwE,IAAAA,aAAa,EAAE,uBAAUxE,CAAV,EAAa;AAC3B,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB,OAAO,CAAC,CAAD,GAAK,CAAL,IAAUhC,IAAI,CAACsB,IAAL,CAAU,IAAIU,CAAC,GAAGA,CAAlB,IAAuB,CAAjC,CAAP;AACtB,aAAO,IAAI,CAAJ,IAAShC,IAAI,CAACsB,IAAL,CAAU,IAAI,CAACU,CAAC,IAAI,CAAN,IAAWA,CAAzB,IAA8B,CAAvC,CAAP;AACA,KA3EsC;AA4EvCyE,IAAAA,aAAa,EAAE,uBAAUzE,CAAV,EAAa;AAC3B,UAAI0E,CAAC,GAAG,OAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAI5E,CAAC,KAAK,CAAV,EAAa,OAAO,CAAP;AACb,UAAI,CAACA,CAAC,IAAI,CAAN,KAAY,CAAhB,EAAmB,OAAO,CAAP;AACnB,UAAI,CAAC2E,CAAL,EAAQA,CAAC,GAAG,IAAI,GAAR;;AACR,UAAIC,CAAC,GAAG5G,IAAI,CAACuD,GAAL,CAAS,CAAT,CAAR,EAAqB;AACpBqD,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR;AACA,OAHD,MAGOD,CAAC,GAAGC,CAAC,IAAI,IAAI3G,IAAI,CAACa,EAAb,CAAD,GAAoBb,IAAI,CAAC6G,IAAL,CAAU,IAAID,CAAd,CAAxB;;AACP,aAAO,EAAEA,CAAC,GAAG5G,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,MAAMF,CAAC,IAAI,CAAX,CAAZ,CAAJ,GAAiChC,IAAI,CAACiG,GAAL,CAAS,CAACjE,CAAC,GAAG,CAAJ,GAAQ0E,CAAT,KAAe,IAAI1G,IAAI,CAACa,EAAxB,IAA8B8F,CAAvC,CAAnC,CAAP;AACA,KAxFsC;AAyFvCG,IAAAA,cAAc,EAAE,wBAAU9E,CAAV,EAAa;AAC5B,UAAI0E,CAAC,GAAG,OAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAI5E,CAAC,KAAK,CAAV,EAAa,OAAO,CAAP;AACb,UAAI,CAACA,CAAC,IAAI,CAAN,KAAY,CAAhB,EAAmB,OAAO,CAAP;AACnB,UAAI,CAAC2E,CAAL,EAAQA,CAAC,GAAG,IAAI,GAAR;;AACR,UAAIC,CAAC,GAAG5G,IAAI,CAACuD,GAAL,CAAS,CAAT,CAAR,EAAqB;AACpBqD,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR;AACA,OAHD,MAGOD,CAAC,GAAGC,CAAC,IAAI,IAAI3G,IAAI,CAACa,EAAb,CAAD,GAAoBb,IAAI,CAAC6G,IAAL,CAAU,IAAID,CAAd,CAAxB;;AACP,aAAOA,CAAC,GAAG5G,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,GAAMF,CAAlB,CAAJ,GAA2BhC,IAAI,CAACiG,GAAL,CAAS,CAACjE,CAAC,GAAG,CAAJ,GAAQ0E,CAAT,KAAe,IAAI1G,IAAI,CAACa,EAAxB,IAA8B8F,CAAvC,CAA3B,GAAuE,CAA9E;AACA,KArGsC;AAsGvCI,IAAAA,gBAAgB,EAAE,0BAAU/E,CAAV,EAAa;AAC9B,UAAI0E,CAAC,GAAG,OAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAIC,CAAC,GAAG,CAAR;AACA,UAAI5E,CAAC,KAAK,CAAV,EAAa,OAAO,CAAP;AACb,UAAI,CAACA,CAAC,IAAI,IAAI,CAAV,KAAgB,CAApB,EAAuB,OAAO,CAAP;AACvB,UAAI,CAAC2E,CAAL,EAAQA,CAAC,GAAG,KAAK,MAAM,GAAX,CAAJ;;AACR,UAAIC,CAAC,GAAG5G,IAAI,CAACuD,GAAL,CAAS,CAAT,CAAR,EAAqB;AACpBqD,QAAAA,CAAC,GAAG,CAAJ;AACAF,QAAAA,CAAC,GAAGC,CAAC,GAAG,CAAR;AACA,OAHD,MAGOD,CAAC,GAAGC,CAAC,IAAI,IAAI3G,IAAI,CAACa,EAAb,CAAD,GAAoBb,IAAI,CAAC6G,IAAL,CAAU,IAAID,CAAd,CAAxB;;AACP,UAAI5E,CAAC,GAAG,CAAR,EAAW,OAAO,CAAC,GAAD,IAAQ4E,CAAC,GAAG5G,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,MAAMF,CAAC,IAAI,CAAX,CAAZ,CAAJ,GAAiChC,IAAI,CAACiG,GAAL,CAAS,CAACjE,CAAC,GAAG,CAAJ,GAAQ0E,CAAT,KAAe,IAAI1G,IAAI,CAACa,EAAxB,IAA8B8F,CAAvC,CAAzC,CAAP;AACX,aAAOC,CAAC,GAAG5G,IAAI,CAACkC,GAAL,CAAS,CAAT,EAAY,CAAC,EAAD,IAAOF,CAAC,IAAI,CAAZ,CAAZ,CAAJ,GAAkChC,IAAI,CAACiG,GAAL,CAAS,CAACjE,CAAC,GAAG,CAAJ,GAAQ0E,CAAT,KAAe,IAAI1G,IAAI,CAACa,EAAxB,IAA8B8F,CAAvC,CAAlC,GAA8E,GAA9E,GAAoF,CAA3F;AACA,KAnHsC;AAoHvCK,IAAAA,UAAU,EAAE,oBAAUhF,CAAV,EAAa;AACxB,UAAI0E,CAAC,GAAG,OAAR;AACA,aAAO,KAAK1E,CAAC,IAAI,CAAV,IAAeA,CAAf,IAAoB,CAAC0E,CAAC,GAAG,CAAL,IAAU1E,CAAV,GAAc0E,CAAlC,CAAP;AACA,KAvHsC;AAwHvCO,IAAAA,WAAW,EAAE,qBAAUjF,CAAV,EAAa;AACzB,UAAI0E,CAAC,GAAG,OAAR;AACA,aAAO,KAAK,CAAC1E,CAAC,GAAGA,CAAC,GAAG,CAAJ,GAAQ,CAAb,IAAkBA,CAAlB,IAAuB,CAAC0E,CAAC,GAAG,CAAL,IAAU1E,CAAV,GAAc0E,CAArC,IAA0C,CAA/C,CAAP;AACA,KA3HsC;AA4HvCQ,IAAAA,aAAa,EAAE,uBAAUlF,CAAV,EAAa;AAC3B,UAAI0E,CAAC,GAAG,OAAR;AACA,UAAI,CAAC1E,CAAC,IAAI,IAAI,CAAV,IAAe,CAAnB,EAAsB,OAAO,IAAI,CAAJ,IAASA,CAAC,GAAGA,CAAJ,IAAS,CAAC,CAAC0E,CAAC,IAAK,KAAP,IAAiB,CAAlB,IAAuB1E,CAAvB,GAA2B0E,CAApC,CAAT,CAAP;AACtB,aAAO,IAAI,CAAJ,IAAS,CAAC1E,CAAC,IAAI,CAAN,IAAWA,CAAX,IAAgB,CAAC,CAAC0E,CAAC,IAAK,KAAP,IAAiB,CAAlB,IAAuB1E,CAAvB,GAA2B0E,CAA3C,IAAgD,CAAzD,CAAP;AACA,KAhIsC;AAiIvCS,IAAAA,YAAY,EAAE,sBAAUnF,CAAV,EAAa;AAC1B,aAAO,IAAIgD,aAAa,CAACoC,aAAd,CAA4B,IAAIpF,CAAhC,CAAX;AACA,KAnIsC;AAoIvCoF,IAAAA,aAAa,EAAE,uBAAUpF,CAAV,EAAa;AAC3B,UAAI,CAACA,CAAC,IAAI,CAAN,IAAY,IAAI,IAApB,EAA2B;AAC1B,eAAO,KAAK,SAASA,CAAT,GAAaA,CAAlB,CAAP;AACA,OAFD,MAEO,IAAIA,CAAC,GAAI,IAAI,IAAb,EAAoB;AAC1B,eAAO,KAAK,UAAUA,CAAC,IAAK,MAAM,IAAtB,IAA+BA,CAA/B,GAAmC,IAAxC,CAAP;AACA,OAFM,MAEA,IAAIA,CAAC,GAAI,MAAM,IAAf,EAAsB;AAC5B,eAAO,KAAK,UAAUA,CAAC,IAAK,OAAO,IAAvB,IAAgCA,CAAhC,GAAoC,MAAzC,CAAP;AACA,OAFM,MAEA;AACN,eAAO,KAAK,UAAUA,CAAC,IAAK,QAAQ,IAAxB,IAAiCA,CAAjC,GAAqC,QAA1C,CAAP;AACA;AACD,KA9IsC;AA+IvCqF,IAAAA,eAAe,EAAE,yBAAUrF,CAAV,EAAa;AAC7B,UAAIA,CAAC,GAAG,IAAI,CAAZ,EAAe,OAAOgD,aAAa,CAACmC,YAAd,CAA2BnF,CAAC,GAAG,CAA/B,IAAoC,GAA3C;AACf,aAAOgD,aAAa,CAACoC,aAAd,CAA4BpF,CAAC,GAAG,CAAJ,GAAQ,CAApC,IAAyC,GAAzC,GAA+C,IAAI,GAA1D;AACA;AAlJsC,GArUzC;AAAA,MAydC;AACAsF,EAAAA,gBAAgB,GAAGnO,OAAO,CAACmO,gBAAR,GAA4B,YAAU;AACxD,WAAOjI,MAAM,CAACkI,qBAAP,IACNlI,MAAM,CAACmI,2BADD,IAENnI,MAAM,CAACoI,wBAFD,IAGNpI,MAAM,CAACqI,sBAHD,IAINrI,MAAM,CAACsI,uBAJD,IAKN,UAASvL,QAAT,EAAmB;AAClB,aAAOiD,MAAM,CAACuI,UAAP,CAAkBxL,QAAlB,EAA4B,OAAO,EAAnC,CAAP;AACA,KAPF;AAQA,GAT6C,EA1d/C;AAAA,MAoeCyL,eAAe,GAAG1O,OAAO,CAAC0O,eAAR,GAA2B,YAAU;AACtD,WAAOxI,MAAM,CAACyI,oBAAP,IACNzI,MAAM,CAAC0I,0BADD,IAEN1I,MAAM,CAAC2I,uBAFD,IAGN3I,MAAM,CAAC4I,qBAHD,IAIN5I,MAAM,CAAC6I,sBAJD,IAKN,UAAS9L,QAAT,EAAmB;AAClB,aAAOiD,MAAM,CAAC8I,YAAP,CAAoB/L,QAApB,EAA8B,OAAO,EAArC,CAAP;AACA,KAPF;AAQA,GAT2C,EApe7C;AAAA,MA8eCgM,aAAa,GAAGjP,OAAO,CAACiP,aAAR,GAAwB,UAAShM,QAAT,EAAkBiM,UAAlB,EAA6BC,YAA7B,EAA0CC,UAA1C,EAAqDC,UAArD,EAAgEC,aAAhE,EAA8E;AAErH,QAAIC,WAAW,GAAG,CAAlB;AAAA,QACCC,cAAc,GAAG3D,aAAa,CAACsD,YAAD,CAAb,IAA+BtD,aAAa,CAACC,MAD/D;;AAGA,QAAI2D,cAAc,GAAG,SAAjBA,cAAiB,GAAU;AAC9BF,MAAAA,WAAW;AACX,UAAIG,WAAW,GAAGH,WAAW,GAACL,UAA9B;AACA,UAAIS,WAAW,GAAGH,cAAc,CAACE,WAAD,CAAhC;AAEAzM,MAAAA,QAAQ,CAACM,IAAT,CAAc+L,aAAd,EAA4BK,WAA5B,EAAwCD,WAAxC,EAAqDH,WAArD;AACAH,MAAAA,UAAU,CAAC7L,IAAX,CAAgB+L,aAAhB,EAA8BK,WAA9B,EAA0CD,WAA1C;;AACA,UAAIH,WAAW,GAAGL,UAAlB,EAA6B;AAC5BI,QAAAA,aAAa,CAACG,cAAd,GAA+BtB,gBAAgB,CAACsB,cAAD,CAA/C;AACA,OAFD,MAEM;AACLJ,QAAAA,UAAU,CAAC1L,KAAX,CAAiB2L,aAAjB;AACA;AACD,KAZD;;AAaAnB,IAAAA,gBAAgB,CAACsB,cAAD,CAAhB;AACA,GAjgBF;AAAA,MAkgBC;AACAG,EAAAA,mBAAmB,GAAG5P,OAAO,CAAC4P,mBAAR,GAA8B,UAASC,GAAT,EAAa;AAChE,QAAIC,MAAJ,EAAYC,MAAZ;AACA,QAAIC,CAAC,GAAGH,GAAG,CAACI,aAAJ,IAAqBJ,GAA7B;AAAA,QACCzQ,MAAM,GAAGyQ,GAAG,CAACK,aAAJ,IAAqBL,GAAG,CAACM,UADnC;AAAA,QAECC,YAAY,GAAGhR,MAAM,CAACiR,qBAAP,EAFhB;;AAIA,QAAIL,CAAC,CAACM,OAAN,EAAc;AACbR,MAAAA,MAAM,GAAGE,CAAC,CAACM,OAAF,CAAU,CAAV,EAAaC,OAAb,GAAuBH,YAAY,CAACI,IAA7C;AACAT,MAAAA,MAAM,GAAGC,CAAC,CAACM,OAAF,CAAU,CAAV,EAAaG,OAAb,GAAuBL,YAAY,CAACM,GAA7C;AAEA,KAJD,MAKI;AACHZ,MAAAA,MAAM,GAAGE,CAAC,CAACO,OAAF,GAAYH,YAAY,CAACI,IAAlC;AACAT,MAAAA,MAAM,GAAGC,CAAC,CAACS,OAAF,GAAYL,YAAY,CAACM,GAAlC;AACA;;AAED,WAAO;AACN3I,MAAAA,CAAC,EAAG+H,MADE;AAEN7H,MAAAA,CAAC,EAAG8H;AAFE,KAAP;AAKA,GAxhBF;AAAA,MAyhBCY,QAAQ,GAAG3Q,OAAO,CAAC2Q,QAAR,GAAmB,UAASC,IAAT,EAAcC,SAAd,EAAwBC,MAAxB,EAA+B;AAC5D,QAAIF,IAAI,CAACG,gBAAT,EAA0B;AACzBH,MAAAA,IAAI,CAACG,gBAAL,CAAsBF,SAAtB,EAAgCC,MAAhC;AACA,KAFD,MAEO,IAAIF,IAAI,CAACI,WAAT,EAAqB;AAC3BJ,MAAAA,IAAI,CAACI,WAAL,CAAiB,OAAKH,SAAtB,EAAiCC,MAAjC;AACA,KAFM,MAEA;AACNF,MAAAA,IAAI,CAAC,OAAKC,SAAN,CAAJ,GAAuBC,MAAvB;AACA;AACD,GAjiBF;AAAA,MAkiBCG,WAAW,GAAGjR,OAAO,CAACiR,WAAR,GAAsB,UAASL,IAAT,EAAeC,SAAf,EAA0BK,OAA1B,EAAkC;AACrE,QAAIN,IAAI,CAACO,mBAAT,EAA6B;AAC5BP,MAAAA,IAAI,CAACO,mBAAL,CAAyBN,SAAzB,EAAoCK,OAApC,EAA6C,KAA7C;AACA,KAFD,MAEO,IAAIN,IAAI,CAACQ,WAAT,EAAqB;AAC3BR,MAAAA,IAAI,CAACQ,WAAL,CAAiB,OAAKP,SAAtB,EAAgCK,OAAhC;AACA,KAFM,MAED;AACLN,MAAAA,IAAI,CAAC,OAAOC,SAAR,CAAJ,GAAyBhL,IAAzB;AACA;AACD,GA1iBF;AAAA,MA2iBCwL,UAAU,GAAGrR,OAAO,CAACqR,UAAR,GAAqB,UAAS/B,aAAT,EAAwBgC,aAAxB,EAAuCJ,OAAvC,EAA+C;AAChF;AACA,QAAI,CAAC5B,aAAa,CAACiC,MAAnB,EAA2BjC,aAAa,CAACiC,MAAd,GAAuB,EAAvB;AAE3BxO,IAAAA,IAAI,CAACuO,aAAD,EAAe,UAASE,SAAT,EAAmB;AACrClC,MAAAA,aAAa,CAACiC,MAAd,CAAqBC,SAArB,IAAkC,YAAU;AAC3CN,QAAAA,OAAO,CAACvN,KAAR,CAAc2L,aAAd,EAA6B9L,SAA7B;AACA,OAFD;;AAGAmN,MAAAA,QAAQ,CAACrB,aAAa,CAACnQ,KAAd,CAAoBC,MAArB,EAA4BoS,SAA5B,EAAsClC,aAAa,CAACiC,MAAd,CAAqBC,SAArB,CAAtC,CAAR;AACA,KALG,CAAJ;AAMA,GArjBF;AAAA,MAsjBCC,YAAY,GAAGzR,OAAO,CAACyR,YAAR,GAAuB,UAAUnC,aAAV,EAAyBgC,aAAzB,EAAwC;AAC7EvO,IAAAA,IAAI,CAACuO,aAAD,EAAgB,UAASJ,OAAT,EAAiBM,SAAjB,EAA2B;AAC9CP,MAAAA,WAAW,CAAC3B,aAAa,CAACnQ,KAAd,CAAoBC,MAArB,EAA6BoS,SAA7B,EAAwCN,OAAxC,CAAX;AACA,KAFG,CAAJ;AAGA,GA1jBF;AAAA,MA2jBCQ,eAAe,GAAG1R,OAAO,CAAC0R,eAAR,GAA0B,UAASC,OAAT,EAAiB;AAC5D,QAAIC,SAAS,GAAGD,OAAO,CAACE,UAAxB,CAD4D,CAE5D;;AACA,WAAOD,SAAS,CAACE,WAAjB;AACA,GA/jBF;AAAA,MAgkBCC,gBAAgB,GAAG/R,OAAO,CAAC+R,gBAAR,GAA2B,UAASJ,OAAT,EAAiB;AAC9D,QAAIC,SAAS,GAAGD,OAAO,CAACE,UAAxB,CAD8D,CAE9D;;AACA,WAAOD,SAAS,CAACI,YAAjB;AACA,GApkBF;AAAA,MAqkBCC,cAAc,GAAGjS,OAAO,CAACiS,cAAR,GAAyBjS,OAAO,CAAC0R,eArkBnD;AAAA,MAqkBoE;AACnEzR,EAAAA,WAAW,GAAGD,OAAO,CAACC,WAAR,GAAsB,UAASd,KAAT,EAAe;AAClD,QAAIE,GAAG,GAAGF,KAAK,CAACE,GAAhB;AAAA,QACCQ,KAAK,GAAGV,KAAK,CAACC,MAAN,CAAaS,KADtB;AAAA,QAECC,MAAM,GAAGX,KAAK,CAACC,MAAN,CAAaU,MAFvB;;AAIA,QAAIoG,MAAM,CAACgM,gBAAX,EAA6B;AAC5B7S,MAAAA,GAAG,CAACD,MAAJ,CAAW+S,KAAX,CAAiBtS,KAAjB,GAAyBA,KAAK,GAAG,IAAjC;AACAR,MAAAA,GAAG,CAACD,MAAJ,CAAW+S,KAAX,CAAiBrS,MAAjB,GAA0BA,MAAM,GAAG,IAAnC;AACAT,MAAAA,GAAG,CAACD,MAAJ,CAAWU,MAAX,GAAoBA,MAAM,GAAGoG,MAAM,CAACgM,gBAApC;AACA7S,MAAAA,GAAG,CAACD,MAAJ,CAAWS,KAAX,GAAmBA,KAAK,GAAGqG,MAAM,CAACgM,gBAAlC;AACA7S,MAAAA,GAAG,CAAC+S,KAAJ,CAAUlM,MAAM,CAACgM,gBAAjB,EAAmChM,MAAM,CAACgM,gBAA1C;AACA;AACD,GAllBF;AAAA,MAmlBC;AACAG,EAAAA,MAAK,GAAGrS,OAAO,CAACqS,KAAR,GAAgB,UAASlT,KAAT,EAAe;AACtCA,IAAAA,KAAK,CAACE,GAAN,CAAUiT,SAAV,CAAoB,CAApB,EAAsB,CAAtB,EAAwBnT,KAAK,CAACU,KAA9B,EAAoCV,KAAK,CAACW,MAA1C;AACA,GAtlBF;AAAA,MAulBCyS,UAAU,GAAGvS,OAAO,CAACuS,UAAR,GAAqB,UAASC,SAAT,EAAmBC,SAAnB,EAA6BC,UAA7B,EAAwC;AACzE,WAAOD,SAAS,GAAG,GAAZ,GAAkBD,SAAlB,GAA4B,KAA5B,GAAoCE,UAA3C;AACA,GAzlBF;AAAA,MA0lBCC,WAAW,GAAG3S,OAAO,CAAC2S,WAAR,GAAsB,UAAStT,GAAT,EAAauT,IAAb,EAAkBC,cAAlB,EAAiC;AACpExT,IAAAA,GAAG,CAACuT,IAAJ,GAAWA,IAAX;AACA,QAAIE,OAAO,GAAG,CAAd;AACA/P,IAAAA,IAAI,CAAC8P,cAAD,EAAgB,UAASE,MAAT,EAAgB;AACnC,UAAIC,SAAS,GAAG3T,GAAG,CAAC4T,WAAJ,CAAgBF,MAAhB,EAAwBlT,KAAxC;AACAiT,MAAAA,OAAO,GAAIE,SAAS,GAAGF,OAAb,GAAwBE,SAAxB,GAAoCF,OAA9C;AACA,KAHG,CAAJ;AAIA,WAAOA,OAAP;AACA,GAlmBF;AAAA,MAmmBCI,oBAAoB,GAAGlT,OAAO,CAACkT,oBAAR,GAA+B,UAAS7T,GAAT,EAAa0I,CAAb,EAAeE,CAAf,EAAiBpI,KAAjB,EAAuBC,MAAvB,EAA8BqT,MAA9B,EAAqC;AAC1F9T,IAAAA,GAAG,CAAC+T,SAAJ;AACA/T,IAAAA,GAAG,CAACgU,MAAJ,CAAWtL,CAAC,GAAGoL,MAAf,EAAuBlL,CAAvB;AACA5I,IAAAA,GAAG,CAACiU,MAAJ,CAAWvL,CAAC,GAAGlI,KAAJ,GAAYsT,MAAvB,EAA+BlL,CAA/B;AACA5I,IAAAA,GAAG,CAACkU,gBAAJ,CAAqBxL,CAAC,GAAGlI,KAAzB,EAAgCoI,CAAhC,EAAmCF,CAAC,GAAGlI,KAAvC,EAA8CoI,CAAC,GAAGkL,MAAlD;AACA9T,IAAAA,GAAG,CAACiU,MAAJ,CAAWvL,CAAC,GAAGlI,KAAf,EAAsBoI,CAAC,GAAGnI,MAAJ,GAAaqT,MAAnC;AACA9T,IAAAA,GAAG,CAACkU,gBAAJ,CAAqBxL,CAAC,GAAGlI,KAAzB,EAAgCoI,CAAC,GAAGnI,MAApC,EAA4CiI,CAAC,GAAGlI,KAAJ,GAAYsT,MAAxD,EAAgElL,CAAC,GAAGnI,MAApE;AACAT,IAAAA,GAAG,CAACiU,MAAJ,CAAWvL,CAAC,GAAGoL,MAAf,EAAuBlL,CAAC,GAAGnI,MAA3B;AACAT,IAAAA,GAAG,CAACkU,gBAAJ,CAAqBxL,CAArB,EAAwBE,CAAC,GAAGnI,MAA5B,EAAoCiI,CAApC,EAAuCE,CAAC,GAAGnI,MAAJ,GAAaqT,MAApD;AACA9T,IAAAA,GAAG,CAACiU,MAAJ,CAAWvL,CAAX,EAAcE,CAAC,GAAGkL,MAAlB;AACA9T,IAAAA,GAAG,CAACkU,gBAAJ,CAAqBxL,CAArB,EAAwBE,CAAxB,EAA2BF,CAAC,GAAGoL,MAA/B,EAAuClL,CAAvC;AACA5I,IAAAA,GAAG,CAACmU,SAAJ;AACA,GA/mBF,CArLU,CAuyBV;AACA;;;AACAvU,EAAAA,KAAK,CAACwU,SAAN,GAAkB,EAAlB;;AAEAxU,EAAAA,KAAK,CAACyU,IAAN,GAAa,UAAStI,IAAT,EAAcuI,OAAd,EAAsBxU,KAAtB,EAA4B;AACxC,SAAKwU,OAAL,GAAeA,OAAf;AACA,SAAKxU,KAAL,GAAaA,KAAb;AACA,SAAK4G,EAAL,GAAUD,GAAG,EAAb,CAHwC,CAIxC;;AACA7G,IAAAA,KAAK,CAACwU,SAAN,CAAgB,KAAK1N,EAArB,IAA2B,IAA3B,CALwC,CAOxC;AACA;;AACA,QAAI4N,OAAO,CAACrS,UAAZ,EAAuB;AACtB,WAAKsS,MAAL;AACA;;AACD,SAAKC,UAAL,CAAgBtQ,IAAhB,CAAqB,IAArB,EAA0B6H,IAA1B;AACA,GAbD,CA3yBU,CA0zBV;;;AACAhH,EAAAA,MAAM,CAACnF,KAAK,CAACyU,IAAN,CAAWrQ,SAAZ,EAAsB;AAC3BwQ,IAAAA,UAAU,EAAG,sBAAU;AAAC,aAAO,IAAP;AAAa,KADV;AAE3BxB,IAAAA,KAAK,EAAG,iBAAU;AACjBA,MAAAA,MAAK,CAAC,KAAKlT,KAAN,CAAL;;AACA,aAAO,IAAP;AACA,KAL0B;AAM3B2U,IAAAA,IAAI,EAAG,gBAAU;AAChB;AACApF,MAAAA,eAAe,CAAC,KAAKe,cAAN,CAAf;AACA,aAAO,IAAP;AACA,KAV0B;AAW3BmE,IAAAA,MAAM,EAAG,gBAAS3Q,QAAT,EAAkB;AAC1B,WAAK6Q,IAAL;AACA,UAAI1U,MAAM,GAAG,KAAKD,KAAL,CAAWC,MAAxB;AAAA,UACC2U,QAAQ,GAAGrC,eAAe,CAAC,KAAKvS,KAAL,CAAWC,MAAZ,CAD3B;AAAA,UAEC4U,SAAS,GAAG,KAAKL,OAAL,CAAapS,mBAAb,GAAmCwS,QAAQ,GAAG,KAAK5U,KAAL,CAAWY,WAAzD,GAAuEgS,gBAAgB,CAAC,KAAK5S,KAAL,CAAWC,MAAZ,CAFpG;AAIAA,MAAAA,MAAM,CAACS,KAAP,GAAe,KAAKV,KAAL,CAAWU,KAAX,GAAmBkU,QAAlC;AACA3U,MAAAA,MAAM,CAACU,MAAP,GAAgB,KAAKX,KAAL,CAAWW,MAAX,GAAoBkU,SAApC;AAEA/T,MAAAA,WAAW,CAAC,KAAKd,KAAN,CAAX;;AAEA,UAAI,OAAO8D,QAAP,KAAoB,UAAxB,EAAmC;AAClCA,QAAAA,QAAQ,CAACU,KAAT,CAAe,IAAf,EAAqBP,KAAK,CAACC,SAAN,CAAgBC,KAAhB,CAAsBC,IAAtB,CAA2BC,SAA3B,EAAsC,CAAtC,CAArB;AACA;;AACD,aAAO,IAAP;AACA,KA1B0B;AA2B3ByQ,IAAAA,MAAM,EAAGpO,IA3BkB;AA4B3BqO,IAAAA,MAAM,EAAG,gBAASD,MAAT,EAAgB;AACxB,UAAIA,MAAJ,EAAW;AACV,aAAKA,MAAL;AACA;;AACD,UAAI,KAAKN,OAAL,CAAavT,SAAb,IAA0B,CAAC6T,MAA/B,EAAsC;AACrCjU,QAAAA,OAAO,CAACiP,aAAR,CACC,KAAKkF,IADN,EAEC,KAAKR,OAAL,CAAatT,cAFd,EAGC,KAAKsT,OAAL,CAAarT,eAHd,EAIC,KAAKqT,OAAL,CAAa/Q,mBAJd,EAKC,KAAK+Q,OAAL,CAAa9Q,mBALd,EAMC,IAND;AAQA,OATD,MAUI;AACH,aAAKsR,IAAL;AACA,aAAKR,OAAL,CAAa9Q,mBAAb,CAAiCU,IAAjC,CAAsC,IAAtC;AACA;;AACD,aAAO,IAAP;AACA,KA/C0B;AAgD3B6Q,IAAAA,cAAc,EAAG,0BAAU;AAC1B,aAAOtJ,QAAQ,CAAC,KAAK6I,OAAL,CAAaU,cAAd,EAA6B,IAA7B,CAAf;AACA,KAlD0B;AAmD3BC,IAAAA,OAAO,EAAG,mBAAU;AACnB,WAAKjC,KAAL;AACAZ,MAAAA,YAAY,CAAC,IAAD,EAAO,KAAKF,MAAZ,CAAZ;AACA,UAAInS,MAAM,GAAG,KAAKD,KAAL,CAAWC,MAAxB,CAHmB,CAKnB;;AACAA,MAAAA,MAAM,CAACS,KAAP,GAAe,KAAKV,KAAL,CAAWU,KAA1B;AACAT,MAAAA,MAAM,CAACU,MAAP,GAAgB,KAAKX,KAAL,CAAWW,MAA3B,CAPmB,CASnB;;AACA,UAAIV,MAAM,CAAC+S,KAAP,CAAaoC,cAAjB,EAAiC;AAChCnV,QAAAA,MAAM,CAAC+S,KAAP,CAAaoC,cAAb,CAA4B,OAA5B;AACAnV,QAAAA,MAAM,CAAC+S,KAAP,CAAaoC,cAAb,CAA4B,QAA5B;AACA,OAHD,MAGO;AACNnV,QAAAA,MAAM,CAAC+S,KAAP,CAAaqC,eAAb,CAA6B,OAA7B;AACApV,QAAAA,MAAM,CAAC+S,KAAP,CAAaqC,eAAb,CAA6B,QAA7B;AACA;;AAED,aAAOvV,KAAK,CAACwU,SAAN,CAAgB,KAAK1N,EAArB,CAAP;AACA,KAtE0B;AAuE3B0O,IAAAA,WAAW,EAAG,qBAASC,aAAT,EAAwBC,WAAxB,EAAoC;AACjD;AACA,UAAI,OAAO,KAAKC,cAAZ,KAA+B,WAAnC,EAAgD,KAAKA,cAAL,GAAsB,EAAtB;;AAEhD,UAAIC,SAAS,GAAI,UAASC,QAAT,EAAkB;AAClC,YAAIC,OAAO,GAAG,KAAd;;AAEA,YAAID,QAAQ,CAACrR,MAAT,KAAoB,KAAKmR,cAAL,CAAoBnR,MAA5C,EAAmD;AAClDsR,UAAAA,OAAO,GAAG,IAAV;AACA,iBAAOA,OAAP;AACA;;AAEDhS,QAAAA,IAAI,CAAC+R,QAAD,EAAW,UAASvV,OAAT,EAAkBqM,KAAlB,EAAwB;AACtC,cAAIrM,OAAO,KAAK,KAAKqV,cAAL,CAAoBhJ,KAApB,CAAhB,EAA2C;AAC1CmJ,YAAAA,OAAO,GAAG,IAAV;AACA;AACD,SAJG,EAID,IAJC,CAAJ;AAKA,eAAOA,OAAP;AACA,OAde,CAcbxR,IAda,CAcR,IAdQ,EAcFmR,aAdE,CAAhB;;AAgBA,UAAI,CAACG,SAAD,IAAc,CAACF,WAAnB,EAA+B;AAC9B;AACA,OAFD,MAGI;AACH,aAAKC,cAAL,GAAsBF,aAAtB;AACA;;AACD,WAAKP,IAAL;;AACA,UAAG,KAAKR,OAAL,CAAalS,cAAhB,EAA+B;AAC9B,aAAKkS,OAAL,CAAalS,cAAb,CAA4B,KAA5B;AACA;;AACD,UAAIiT,aAAa,CAACjR,MAAd,GAAuB,CAA3B,EAA6B;AAC5B;AACA,YAAI,KAAKuR,QAAL,IAAiB,KAAKA,QAAL,CAAcvR,MAAd,GAAuB,CAA5C,EAA+C;AAC9C,cAAIwR,SAAJ,EACCC,SADD;;AAGA,eAAK,IAAIxR,CAAC,GAAG,KAAKsR,QAAL,CAAcvR,MAAd,GAAuB,CAApC,EAAuCC,CAAC,IAAI,CAA5C,EAA+CA,CAAC,EAAhD,EAAoD;AACnDuR,YAAAA,SAAS,GAAG,KAAKD,QAAL,CAActR,CAAd,EAAiByR,MAAjB,IAA2B,KAAKH,QAAL,CAActR,CAAd,EAAiB0R,IAA5C,IAAoD,KAAKJ,QAAL,CAActR,CAAd,EAAiB2R,QAAjF;AACAH,YAAAA,SAAS,GAAGvQ,OAAO,CAACsQ,SAAD,EAAYP,aAAa,CAAC,CAAD,CAAzB,CAAnB;;AACA,gBAAIQ,SAAS,KAAK,CAAC,CAAnB,EAAqB;AACpB;AACA;AACD;;AACD,cAAII,aAAa,GAAG,EAApB;AAAA,cACCC,aAAa,GAAG,EADjB;AAAA,cAECC,cAAc,GAAI,UAAS5J,KAAT,EAAgB;AAEjC;AACA,gBAAIkJ,QAAQ,GAAG,EAAf;AAAA,gBACCW,cADD;AAAA,gBAECC,UAAU,GAAG,EAFd;AAAA,gBAGCC,UAAU,GAAG,EAHd;AAAA,gBAICC,IAJD;AAAA,gBAKCC,IALD;AAAA,gBAMCC,IAND;AAAA,gBAOCC,IAPD;AAQA/V,YAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA4B,UAASgB,OAAT,EAAiB;AAC5CP,cAAAA,cAAc,GAAGO,OAAO,CAACb,MAAR,IAAkBa,OAAO,CAACZ,IAA1B,IAAkCY,OAAO,CAACX,QAA3D;;AACA,kBAAII,cAAc,CAACP,SAAD,CAAd,IAA6BO,cAAc,CAACP,SAAD,CAAd,CAA0Be,QAA1B,EAAjC,EAAsE;AACrEnB,gBAAAA,QAAQ,CAAC7P,IAAT,CAAcwQ,cAAc,CAACP,SAAD,CAA5B;AACA;AACD,aALD;AAOAlV,YAAAA,OAAO,CAAC+C,IAAR,CAAa+R,QAAb,EAAuB,UAASvV,OAAT,EAAkB;AACxCmW,cAAAA,UAAU,CAACzQ,IAAX,CAAgB1F,OAAO,CAACwI,CAAxB;AACA4N,cAAAA,UAAU,CAAC1Q,IAAX,CAAgB1F,OAAO,CAAC0I,CAAxB,EAFwC,CAKxC;;AACAqN,cAAAA,aAAa,CAACrQ,IAAd,CAAmBjF,OAAO,CAAC8K,QAAR,CAAiB,KAAK6I,OAAL,CAAajR,oBAA9B,EAAoDnD,OAApD,CAAnB;AACAgW,cAAAA,aAAa,CAACtQ,IAAd,CAAmB;AAClBiR,gBAAAA,IAAI,EAAE3W,OAAO,CAAC4W,MAAR,CAAeC,SAAf,IAA4B7W,OAAO,CAAC6W,SADxB;AAElBC,gBAAAA,MAAM,EAAE9W,OAAO,CAAC4W,MAAR,CAAeG,WAAf,IAA8B/W,OAAO,CAAC+W;AAF5B,eAAnB;AAKA,aAZD,EAYG,IAZH;AAcAP,YAAAA,IAAI,GAAGjP,GAAG,CAAC6O,UAAD,CAAV;AACAE,YAAAA,IAAI,GAAGlP,GAAG,CAACgP,UAAD,CAAV;AAEAG,YAAAA,IAAI,GAAGhP,GAAG,CAAC4O,UAAD,CAAV;AACAE,YAAAA,IAAI,GAAGjP,GAAG,CAAC+O,UAAD,CAAV;AAEA,mBAAO;AACN3N,cAAAA,CAAC,EAAG+N,IAAI,GAAG,KAAK3W,KAAL,CAAWU,KAAX,GAAiB,CAAzB,GAA8BiW,IAA9B,GAAqCF,IADlC;AAEN3N,cAAAA,CAAC,EAAE,CAAC8N,IAAI,GAAGF,IAAR,IAAc;AAFX,aAAP;AAIA,WA1CgB,CA0CdtS,IA1Cc,CA0CT,IA1CS,EA0CH2R,SA1CG,CAFlB;;AA8CA,cAAIjW,KAAK,CAACsX,YAAV,CAAuB;AACtBxO,YAAAA,CAAC,EAAEyN,cAAc,CAACzN,CADI;AAEtBE,YAAAA,CAAC,EAAEuN,cAAc,CAACvN,CAFI;AAGtBuO,YAAAA,QAAQ,EAAE,KAAK7C,OAAL,CAAatR,eAHD;AAItBoU,YAAAA,QAAQ,EAAE,KAAK9C,OAAL,CAAavR,eAJD;AAKtBsU,YAAAA,OAAO,EAAE,KAAK/C,OAAL,CAAanR,cALA;AAMtB4T,YAAAA,SAAS,EAAE,KAAKzC,OAAL,CAAahS,gBANF;AAOtBgV,YAAAA,SAAS,EAAE,KAAKhD,OAAL,CAAa5R,gBAPF;AAQtB2Q,YAAAA,UAAU,EAAE,KAAKiB,OAAL,CAAa/R,iBARH;AAStB6Q,YAAAA,SAAS,EAAE,KAAKkB,OAAL,CAAa7R,gBATF;AAUtB8U,YAAAA,QAAQ,EAAE,KAAKjD,OAAL,CAAa9R,eAVD;AAWtBgV,YAAAA,cAAc,EAAE,KAAKlD,OAAL,CAAaxR,qBAXP;AAYtB2U,YAAAA,eAAe,EAAE,KAAKnD,OAAL,CAAa3R,sBAZR;AAatB+U,YAAAA,cAAc,EAAE,KAAKpD,OAAL,CAAazR,qBAbP;AActB8U,YAAAA,aAAa,EAAE,KAAKrD,OAAL,CAAa1R,oBAdN;AAetBgV,YAAAA,YAAY,EAAE,KAAKtD,OAAL,CAAapR,mBAfL;AAgBtB2U,YAAAA,MAAM,EAAE5B,aAhBc;AAiBtB6B,YAAAA,YAAY,EAAE5B,aAjBQ;AAkBtB6B,YAAAA,qBAAqB,EAAG,KAAKzD,OAAL,CAAahR,yBAlBf;AAmBtB0U,YAAAA,KAAK,EAAE3C,aAAa,CAAC,CAAD,CAAb,CAAiB4C,KAnBF;AAoBtBnY,YAAAA,KAAK,EAAE,KAAKA,KApBU;AAqBtBE,YAAAA,GAAG,EAAE,KAAKF,KAAL,CAAWE,GArBM;AAsBtBkY,YAAAA,MAAM,EAAE,KAAK5D,OAAL,CAAalS;AAtBC,WAAvB,EAuBG0S,IAvBH;AAyBA,SAlFD,MAkFO;AACNpR,UAAAA,IAAI,CAAC2R,aAAD,EAAgB,UAAS8C,OAAT,EAAkB;AACrC,gBAAIC,eAAe,GAAGD,OAAO,CAACC,eAAR,EAAtB;AACA,gBAAIxY,KAAK,CAACyY,OAAV,CAAkB;AACjB3P,cAAAA,CAAC,EAAElB,IAAI,CAAC+D,KAAL,CAAW6M,eAAe,CAAC1P,CAA3B,CADc;AAEjBE,cAAAA,CAAC,EAAEpB,IAAI,CAAC+D,KAAL,CAAW6M,eAAe,CAACxP,CAA3B,CAFc;AAGjBuO,cAAAA,QAAQ,EAAE,KAAK7C,OAAL,CAAatR,eAHN;AAIjBoU,cAAAA,QAAQ,EAAE,KAAK9C,OAAL,CAAavR,eAJN;AAKjBgU,cAAAA,SAAS,EAAE,KAAKzC,OAAL,CAAahS,gBALP;AAMjBgV,cAAAA,SAAS,EAAE,KAAKhD,OAAL,CAAa5R,gBANP;AAOjB2Q,cAAAA,UAAU,EAAE,KAAKiB,OAAL,CAAa/R,iBAPR;AAQjB6Q,cAAAA,SAAS,EAAE,KAAKkB,OAAL,CAAa7R,gBARP;AASjB8U,cAAAA,QAAQ,EAAE,KAAKjD,OAAL,CAAa9R,eATN;AAUjB8V,cAAAA,WAAW,EAAE,KAAKhE,OAAL,CAAarR,gBAVT;AAWjB2U,cAAAA,YAAY,EAAE,KAAKtD,OAAL,CAAapR,mBAXV;AAYjBqV,cAAAA,IAAI,EAAE9M,QAAQ,CAAC,KAAK6I,OAAL,CAAalR,eAAd,EAA+B+U,OAA/B,CAZG;AAajBrY,cAAAA,KAAK,EAAE,KAAKA,KAbK;AAcjBoY,cAAAA,MAAM,EAAE,KAAK5D,OAAL,CAAalS;AAdJ,aAAlB,EAeG0S,IAfH;AAgBA,WAlBG,EAkBD,IAlBC,CAAJ;AAmBA;AACD;;AACD,aAAO,IAAP;AACA,KAhN0B;AAiN3B0D,IAAAA,aAAa,EAAG,yBAAU;AACzB,aAAO,KAAK1Y,KAAL,CAAWC,MAAX,CAAkB0Y,SAAlB,CAA4BnU,KAA5B,CAAkC,KAAKxE,KAAL,CAAWC,MAA7C,EAAqDoE,SAArD,CAAP;AACA;AAnN0B,GAAtB,CAAN;;AAsNAvE,EAAAA,KAAK,CAACyU,IAAN,CAAWtP,MAAX,GAAoB,UAASmB,UAAT,EAAoB;AAEvC,QAAIC,MAAM,GAAG,IAAb;;AAEA,QAAIuS,SAAS,GAAG,SAAZA,SAAY,GAAU;AACzB,aAAOvS,MAAM,CAAC7B,KAAP,CAAa,IAAb,EAAkBH,SAAlB,CAAP;AACA,KAFD,CAJuC,CAQvC;;;AACAuU,IAAAA,SAAS,CAAC1U,SAAV,GAAsBS,KAAK,CAAC0B,MAAM,CAACnC,SAAR,CAA3B,CATuC,CAUvC;;AACAe,IAAAA,MAAM,CAAC2T,SAAS,CAAC1U,SAAX,EAAsBkC,UAAtB,CAAN;AAEAwS,IAAAA,SAAS,CAAC3T,MAAV,GAAmBnF,KAAK,CAACyU,IAAN,CAAWtP,MAA9B;;AAEA,QAAImB,UAAU,CAACyS,IAAX,IAAmBxS,MAAM,CAACnC,SAAP,CAAiB2U,IAAxC,EAA6C;AAE5C,UAAIC,SAAS,GAAG1S,UAAU,CAACyS,IAAX,IAAmBxS,MAAM,CAACnC,SAAP,CAAiB2U,IAApD,CAF4C,CAG5C;AAEA;AACA;AACA;;AAEA,UAAIE,YAAY,GAAIjZ,KAAK,CAACiB,QAAN,CAAesF,MAAM,CAACnC,SAAP,CAAiB2U,IAAhC,CAAD,GAA0ClU,KAAK,CAAC7E,KAAK,CAACiB,QAAN,CAAesF,MAAM,CAACnC,SAAP,CAAiB2U,IAAhC,CAAD,CAA/C,GAAyF,EAA5G;AAEA/Y,MAAAA,KAAK,CAACiB,QAAN,CAAe+X,SAAf,IAA4B7T,MAAM,CAAC8T,YAAD,EAAc3S,UAAU,CAACrF,QAAzB,CAAlC;AAEAjB,MAAAA,KAAK,CAAC6D,KAAN,CAAYmV,SAAZ,IAAyBF,SAAzB,CAb4C,CAe5C;;AACA9Y,MAAAA,KAAK,CAACoE,SAAN,CAAgB4U,SAAhB,IAA6B,UAAS7M,IAAT,EAAcuI,OAAd,EAAsB;AAClD,YAAIwE,MAAM,GAAG5T,KAAK,CAACtF,KAAK,CAACiB,QAAN,CAAeC,MAAhB,EAAwBlB,KAAK,CAACiB,QAAN,CAAe+X,SAAf,CAAxB,EAAmDtE,OAAO,IAAI,EAA9D,CAAlB;AACA,eAAO,IAAIoE,SAAJ,CAAc3M,IAAd,EAAmB+M,MAAnB,EAA0B,IAA1B,CAAP;AACA,OAHD;AAIA,KApBD,MAoBM;AACLnS,MAAAA,IAAI,CAAC,gEAAD,CAAJ;AACA;;AACD,WAAOR,MAAP;AACA,GAvCD;;AAyCAvG,EAAAA,KAAK,CAACuY,OAAN,GAAgB,UAASY,aAAT,EAAuB;AACtChU,IAAAA,MAAM,CAAC,IAAD,EAAMgU,aAAN,CAAN;AACA,SAAKvE,UAAL,CAAgBlQ,KAAhB,CAAsB,IAAtB,EAA2BH,SAA3B;AACA,SAAK6U,IAAL;AACA,GAJD;;AAKAjU,EAAAA,MAAM,CAACnF,KAAK,CAACuY,OAAN,CAAcnU,SAAf,EAAyB;AAC9BwQ,IAAAA,UAAU,EAAG,sBAAU,CAAE,CADK;AAE9ByE,IAAAA,OAAO,EAAG,iBAASC,KAAT,EAAe;AACxB,UAAI,CAACA,KAAL,EAAW;AACVnU,QAAAA,MAAM,CAAC,IAAD,EAAM,KAAK+R,MAAX,CAAN;AACA,OAFD,MAEO;AACNpT,QAAAA,IAAI,CAACwV,KAAD,EAAO,UAASrU,GAAT,EAAa;AACvB,eAAKA,GAAL,IAAY,KAAKiS,MAAL,CAAYjS,GAAZ,CAAZ;AACA,SAFG,EAEF,IAFE,CAAJ;AAGA;;AACD,aAAO,IAAP;AACA,KAX6B;AAY9BmU,IAAAA,IAAI,EAAG,gBAAU;AAChB,WAAKlC,MAAL,GAAcrS,KAAK,CAAC,IAAD,CAAnB;AACA,aAAO,KAAKqS,MAAL,CAAYA,MAAnB;AACA,aAAO,IAAP;AACA,KAhB6B;AAiB9BqC,IAAAA,MAAM,EAAG,gBAASC,QAAT,EAAkB;AAC1B1V,MAAAA,IAAI,CAAC0V,QAAD,EAAU,UAASxU,KAAT,EAAeC,GAAf,EAAmB;AAChC,aAAKiS,MAAL,CAAYjS,GAAZ,IAAmB,KAAKA,GAAL,CAAnB;AACA,aAAKA,GAAL,IAAYD,KAAZ;AACA,OAHG,EAGF,IAHE,CAAJ;AAIA,aAAO,IAAP;AACA,KAvB6B;AAwB9ByU,IAAAA,UAAU,EAAG,oBAASH,KAAT,EAAeI,IAAf,EAAoB;AAChC5V,MAAAA,IAAI,CAACwV,KAAD,EAAO,UAAStU,KAAT,EAAeC,GAAf,EAAmB;AAC7B,aAAKA,GAAL,IAAa,CAACD,KAAK,GAAG,KAAKkS,MAAL,CAAYjS,GAAZ,CAAT,IAA6ByU,IAA9B,GAAsC,KAAKxC,MAAL,CAAYjS,GAAZ,CAAlD;AACA,OAFG,EAEF,IAFE,CAAJ;AAGA,aAAO,IAAP;AACA,KA7B6B;AA8B9BuT,IAAAA,eAAe,EAAG,2BAAU;AAC3B,aAAO;AACN1P,QAAAA,CAAC,EAAG,KAAKA,CADH;AAENE,QAAAA,CAAC,EAAG,KAAKA;AAFH,OAAP;AAIA,KAnC6B;AAoC9BgO,IAAAA,QAAQ,EAAE,oBAAU;AACnB,aAAO3P,QAAQ,CAAC,KAAKrC,KAAN,CAAf;AACA;AAtC6B,GAAzB,CAAN;AAyCAhF,EAAAA,KAAK,CAACuY,OAAN,CAAcpT,MAAd,GAAuBkB,QAAvB;AAGArG,EAAAA,KAAK,CAAC2Z,KAAN,GAAc3Z,KAAK,CAACuY,OAAN,CAAcpT,MAAd,CAAqB;AAClCyU,IAAAA,OAAO,EAAE,IADyB;AAElCC,IAAAA,OAAO,EAAE,iBAASC,MAAT,EAAgBC,MAAhB,EAAuB;AAC/B,UAAIC,iBAAiB,GAAG,KAAKC,kBAAL,GAA0B,KAAK/F,MAAvD;AACA,aAAStM,IAAI,CAACkC,GAAL,CAASgQ,MAAM,GAAC,KAAKhR,CAArB,EAAwB,CAAxB,IAA2BlB,IAAI,CAACkC,GAAL,CAASiQ,MAAM,GAAC,KAAK/Q,CAArB,EAAwB,CAAxB,CAA5B,GAA0DpB,IAAI,CAACkC,GAAL,CAASkQ,iBAAT,EAA2B,CAA3B,CAAlE;AACA,KALiC;AAMlC9E,IAAAA,IAAI,EAAG,gBAAU;AAChB,UAAI,KAAK0E,OAAT,EAAiB;AAChB,YAAIxZ,GAAG,GAAG,KAAKA,GAAf;AACAA,QAAAA,GAAG,CAAC+T,SAAJ;AAEA/T,QAAAA,GAAG,CAAC8Z,GAAJ,CAAQ,KAAKpR,CAAb,EAAgB,KAAKE,CAArB,EAAwB,KAAKkL,MAA7B,EAAqC,CAArC,EAAwCtM,IAAI,CAACa,EAAL,GAAQ,CAAhD;AACArI,QAAAA,GAAG,CAACmU,SAAJ;AAEAnU,QAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK9C,WAAvB;AACAjX,QAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKC,WAArB;AAEAja,QAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKnD,SAArB;AAEA/W,QAAAA,GAAG,CAAC6W,IAAJ;AACA7W,QAAAA,GAAG,CAACgX,MAAJ;AACA,OAfe,CAkBhB;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;;AAIA;AAhDiC,GAArB,CAAd;AAmDApX,EAAAA,KAAK,CAACua,GAAN,GAAYva,KAAK,CAACuY,OAAN,CAAcpT,MAAd,CAAqB;AAChC0U,IAAAA,OAAO,EAAG,iBAASC,MAAT,EAAgBC,MAAhB,EAAuB;AAEhC,UAAIS,qBAAqB,GAAGzZ,OAAO,CAAC2H,iBAAR,CAA0B,IAA1B,EAAgC;AAC3DI,QAAAA,CAAC,EAAEgR,MADwD;AAE3D9Q,QAAAA,CAAC,EAAE+Q;AAFwD,OAAhC,CAA5B,CAFgC,CAOhC;;AACA,UAAIU,aAAa,GAAID,qBAAqB,CAACrR,KAAtB,IAA+B,KAAKuR,UAApC,IAAkDF,qBAAqB,CAACrR,KAAtB,IAA+B,KAAKwR,QAA3G;AAAA,UACCC,YAAY,GAAIJ,qBAAqB,CAACnR,QAAtB,IAAkC,KAAKwR,WAAvC,IAAsDL,qBAAqB,CAACnR,QAAtB,IAAkC,KAAKyR,WAD9G;AAGA,aAAQL,aAAa,IAAIG,YAAzB,CAXgC,CAYhC;AACA,KAd+B;AAehCpC,IAAAA,eAAe,EAAG,2BAAU;AAC3B,UAAIuC,WAAW,GAAG,KAAKL,UAAL,GAAmB,CAAC,KAAKC,QAAL,GAAgB,KAAKD,UAAtB,IAAoC,CAAzE;AAAA,UACCM,eAAe,GAAG,CAAC,KAAKF,WAAL,GAAmB,KAAKD,WAAzB,IAAwC,CAAxC,GAA4C,KAAKA,WADpE;AAEA,aAAO;AACN/R,QAAAA,CAAC,EAAG,KAAKA,CAAL,GAAUlB,IAAI,CAAC+F,GAAL,CAASoN,WAAT,IAAwBC,eADhC;AAENhS,QAAAA,CAAC,EAAG,KAAKA,CAAL,GAAUpB,IAAI,CAACiG,GAAL,CAASkN,WAAT,IAAwBC;AAFhC,OAAP;AAIA,KAtB+B;AAuBhC9F,IAAAA,IAAI,EAAG,cAAS+F,gBAAT,EAA0B;AAEhC,UAAIC,aAAa,GAAGD,gBAAgB,IAAI,CAAxC;AAEA,UAAI7a,GAAG,GAAG,KAAKA,GAAf;AAEAA,MAAAA,GAAG,CAAC+T,SAAJ;AAEA/T,MAAAA,GAAG,CAAC8Z,GAAJ,CAAQ,KAAKpR,CAAb,EAAgB,KAAKE,CAArB,EAAwB,KAAK8R,WAA7B,EAA0C,KAAKJ,UAA/C,EAA2D,KAAKC,QAAhE;AAEAva,MAAAA,GAAG,CAAC8Z,GAAJ,CAAQ,KAAKpR,CAAb,EAAgB,KAAKE,CAArB,EAAwB,KAAK6R,WAA7B,EAA0C,KAAKF,QAA/C,EAAyD,KAAKD,UAA9D,EAA0E,IAA1E;AAEAta,MAAAA,GAAG,CAACmU,SAAJ;AACAnU,MAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK9C,WAAvB;AACAjX,MAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKC,WAArB;AAEAja,MAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKnD,SAArB;AAEA/W,MAAAA,GAAG,CAAC6W,IAAJ;AACA7W,MAAAA,GAAG,CAAC+a,QAAJ,GAAe,OAAf;;AAEA,UAAI,KAAKC,UAAT,EAAoB;AACnBhb,QAAAA,GAAG,CAACgX,MAAJ;AACA;AACD;AA/C+B,GAArB,CAAZ;AAkDApX,EAAAA,KAAK,CAACqb,SAAN,GAAkBrb,KAAK,CAACuY,OAAN,CAAcpT,MAAd,CAAqB;AACtC+P,IAAAA,IAAI,EAAG,gBAAU;AAChB,UAAI9U,GAAG,GAAG,KAAKA,GAAf;AAAA,UACCkb,SAAS,GAAG,KAAK1a,KAAL,GAAW,CADxB;AAAA,UAEC2a,KAAK,GAAG,KAAKzS,CAAL,GAASwS,SAFlB;AAAA,UAGCE,MAAM,GAAG,KAAK1S,CAAL,GAASwS,SAHnB;AAAA,UAIC7J,GAAG,GAAG,KAAKrM,IAAL,IAAa,KAAKA,IAAL,GAAY,KAAK4D,CAA9B,CAJP;AAAA,UAKCyS,UAAU,GAAG,KAAKpB,WAAL,GAAmB,CALjC,CADgB,CAQhB;AACA;;AACA,UAAI,KAAKe,UAAT,EAAoB;AACnBG,QAAAA,KAAK,IAAIE,UAAT;AACAD,QAAAA,MAAM,IAAIC,UAAV;AACAhK,QAAAA,GAAG,IAAIgK,UAAP;AACA;;AAEDrb,MAAAA,GAAG,CAAC+T,SAAJ;AAEA/T,MAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKnD,SAArB;AACA/W,MAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK9C,WAAvB;AACAjX,MAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKC,WAArB,CApBgB,CAsBhB;AACA;;AACAja,MAAAA,GAAG,CAACgU,MAAJ,CAAWmH,KAAX,EAAkB,KAAKnW,IAAvB;AACAhF,MAAAA,GAAG,CAACiU,MAAJ,CAAWkH,KAAX,EAAkB9J,GAAlB;AACArR,MAAAA,GAAG,CAACiU,MAAJ,CAAWmH,MAAX,EAAmB/J,GAAnB;AACArR,MAAAA,GAAG,CAACiU,MAAJ,CAAWmH,MAAX,EAAmB,KAAKpW,IAAxB;AACAhF,MAAAA,GAAG,CAAC6W,IAAJ;;AACA,UAAI,KAAKmE,UAAT,EAAoB;AACnBhb,QAAAA,GAAG,CAACgX,MAAJ;AACA;AACD,KAjCqC;AAkCtCvW,IAAAA,MAAM,EAAG,kBAAU;AAClB,aAAO,KAAKuE,IAAL,GAAY,KAAK4D,CAAxB;AACA,KApCqC;AAqCtC6Q,IAAAA,OAAO,EAAG,iBAASC,MAAT,EAAgBC,MAAhB,EAAuB;AAChC,aAAQD,MAAM,IAAI,KAAKhR,CAAL,GAAS,KAAKlI,KAAL,GAAW,CAA9B,IAAmCkZ,MAAM,IAAI,KAAKhR,CAAL,GAAS,KAAKlI,KAAL,GAAW,CAAlE,IAAyEmZ,MAAM,IAAI,KAAK/Q,CAAf,IAAoB+Q,MAAM,IAAI,KAAK3U,IAAnH;AACA;AAvCqC,GAArB,CAAlB;AA0CApF,EAAAA,KAAK,CAACyY,OAAN,GAAgBzY,KAAK,CAACuY,OAAN,CAAcpT,MAAd,CAAqB;AACpC+P,IAAAA,IAAI,EAAG,gBAAU;AAEhB,UAAI9U,GAAG,GAAG,KAAKF,KAAL,CAAWE,GAArB;AAEAA,MAAAA,GAAG,CAACuT,IAAJ,GAAWL,UAAU,CAAC,KAAKqE,QAAN,EAAe,KAAKnE,SAApB,EAA8B,KAAKC,UAAnC,CAArB;AAEA,WAAKiI,MAAL,GAAc,QAAd;AACA,WAAKC,MAAL,GAAc,OAAd,CAPgB,CAShB;;AACA,UAAIC,YAAY,GAAG,KAAKA,YAAL,GAAoB,CAAvC;AAEA,UAAIC,YAAY,GAAGzb,GAAG,CAAC4T,WAAJ,CAAgB,KAAK2E,IAArB,EAA2B/X,KAA3B,GAAmC,IAAE,KAAK2W,QAA7D;AAAA,UACCuE,iBAAiB,GAAG,KAAKnE,QAAL,GAAgB,IAAE,KAAKH,QAD5C;AAAA,UAECuE,aAAa,GAAGD,iBAAiB,GAAG,KAAKpD,WAAzB,GAAuCkD,YAFxD;;AAIA,UAAI,KAAK9S,CAAL,GAAS+S,YAAY,GAAC,CAAtB,GAAyB,KAAK3b,KAAL,CAAWU,KAAxC,EAA8C;AAC7C,aAAK8a,MAAL,GAAc,MAAd;AACA,OAFD,MAEO,IAAI,KAAK5S,CAAL,GAAS+S,YAAY,GAAC,CAAtB,GAA0B,CAA9B,EAAgC;AACtC,aAAKH,MAAL,GAAc,OAAd;AACA;;AAED,UAAI,KAAK1S,CAAL,GAAS+S,aAAT,GAAyB,CAA7B,EAA+B;AAC9B,aAAKJ,MAAL,GAAc,OAAd;AACA;;AAGD,UAAIK,QAAQ,GAAG,KAAKlT,CAAL,GAAS+S,YAAY,GAAC,CAArC;AAAA,UACCI,QAAQ,GAAG,KAAKjT,CAAL,GAAS+S,aADrB;AAGA3b,MAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKnD,SAArB,CA9BgB,CAgChB;;AACA,UAAG,KAAKmB,MAAR,EAAe;AACd,aAAKA,MAAL,CAAY,IAAZ;AACA,OAFD,MAGI;AACH,gBAAO,KAAKqD,MAAZ;AAEA,eAAK,OAAL;AACC;AACAvb,YAAAA,GAAG,CAAC+T,SAAJ;AACA/T,YAAAA,GAAG,CAACgU,MAAJ,CAAW,KAAKtL,CAAhB,EAAkB,KAAKE,CAAL,GAAS4S,YAA3B;AACAxb,YAAAA,GAAG,CAACiU,MAAJ,CAAW,KAAKvL,CAAL,GAAS,KAAK4P,WAAzB,EAAsC,KAAK1P,CAAL,IAAU4S,YAAY,GAAG,KAAKlD,WAA9B,CAAtC;AACAtY,YAAAA,GAAG,CAACiU,MAAJ,CAAW,KAAKvL,CAAL,GAAS,KAAK4P,WAAzB,EAAsC,KAAK1P,CAAL,IAAU4S,YAAY,GAAG,KAAKlD,WAA9B,CAAtC;AACAtY,YAAAA,GAAG,CAACmU,SAAJ;AACAnU,YAAAA,GAAG,CAAC6W,IAAJ;AACA;;AACD,eAAK,OAAL;AACCgF,YAAAA,QAAQ,GAAG,KAAKjT,CAAL,GAAS4S,YAAT,GAAwB,KAAKlD,WAAxC,CADD,CAEC;;AACAtY,YAAAA,GAAG,CAAC+T,SAAJ;AACA/T,YAAAA,GAAG,CAACgU,MAAJ,CAAW,KAAKtL,CAAhB,EAAmB,KAAKE,CAAL,GAAS4S,YAA5B;AACAxb,YAAAA,GAAG,CAACiU,MAAJ,CAAW,KAAKvL,CAAL,GAAS,KAAK4P,WAAzB,EAAsC,KAAK1P,CAAL,GAAS4S,YAAT,GAAwB,KAAKlD,WAAnE;AACAtY,YAAAA,GAAG,CAACiU,MAAJ,CAAW,KAAKvL,CAAL,GAAS,KAAK4P,WAAzB,EAAsC,KAAK1P,CAAL,GAAS4S,YAAT,GAAwB,KAAKlD,WAAnE;AACAtY,YAAAA,GAAG,CAACmU,SAAJ;AACAnU,YAAAA,GAAG,CAAC6W,IAAJ;AACA;AApBD;;AAuBA,gBAAO,KAAKyE,MAAZ;AAEA,eAAK,MAAL;AACCM,YAAAA,QAAQ,GAAG,KAAKlT,CAAL,GAAS+S,YAAT,IAAyB,KAAK7D,YAAL,GAAoB,KAAKU,WAAlD,CAAX;AACA;;AACD,eAAK,OAAL;AACCsD,YAAAA,QAAQ,GAAG,KAAKlT,CAAL,IAAU,KAAKkP,YAAL,GAAoB,KAAKU,WAAnC,CAAX;AACA;AAPD;;AAUAzE,QAAAA,oBAAoB,CAAC7T,GAAD,EAAK4b,QAAL,EAAcC,QAAd,EAAuBJ,YAAvB,EAAoCC,iBAApC,EAAsD,KAAK9D,YAA3D,CAApB;AAEA5X,QAAAA,GAAG,CAAC6W,IAAJ;AAEA7W,QAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAK5C,SAArB;AACAtX,QAAAA,GAAG,CAAC8b,SAAJ,GAAgB,QAAhB;AACA9b,QAAAA,GAAG,CAAC+b,YAAJ,GAAmB,QAAnB;AACA/b,QAAAA,GAAG,CAACgc,QAAJ,CAAa,KAAKzD,IAAlB,EAAwBqD,QAAQ,GAAGH,YAAY,GAAC,CAAhD,EAAmDI,QAAQ,GAAGH,iBAAiB,GAAC,CAAhF;AACA;AACD;AAhFmC,GAArB,CAAhB;AAmFA9b,EAAAA,KAAK,CAACsX,YAAN,GAAqBtX,KAAK,CAACuY,OAAN,CAAcpT,MAAd,CAAqB;AACzCyP,IAAAA,UAAU,EAAG,sBAAU;AACtB,WAAKjB,IAAL,GAAYL,UAAU,CAAC,KAAKqE,QAAN,EAAe,KAAKnE,SAApB,EAA8B,KAAKC,UAAnC,CAAtB;AAEA,WAAK4I,SAAL,GAAiB/I,UAAU,CAAC,KAAKyE,aAAN,EAAoB,KAAKD,cAAzB,EAAwC,KAAKD,eAA7C,CAA3B;AAEA,WAAKhX,MAAL,GAAe,KAAKoX,MAAL,CAAYzT,MAAZ,GAAqB,KAAKmT,QAA3B,GAAwC,CAAC,KAAKM,MAAL,CAAYzT,MAAZ,GAAmB,CAApB,KAA0B,KAAKmT,QAAL,GAAc,CAAxC,CAAxC,GAAuF,KAAKH,QAAL,GAAc,CAArG,GAA0G,KAAKO,aAAL,GAAoB,GAA5I;AAEA,WAAK3X,GAAL,CAASuT,IAAT,GAAgB,KAAK0I,SAArB;AAEA,UAAIC,UAAU,GAAG,KAAKlc,GAAL,CAAS4T,WAAT,CAAqB,KAAKoE,KAA1B,EAAiCxX,KAAlD;AAAA,UACC;AACA2b,MAAAA,UAAU,GAAG7I,WAAW,CAAC,KAAKtT,GAAN,EAAU,KAAKuT,IAAf,EAAoB,KAAKsE,MAAzB,CAAX,GAA8C,KAAKN,QAAnD,GAA8D,CAF5E;AAAA,UAGC6E,gBAAgB,GAAG9U,GAAG,CAAC,CAAC6U,UAAD,EAAYD,UAAZ,CAAD,CAHvB;AAKA,WAAK1b,KAAL,GAAa4b,gBAAgB,GAAI,KAAKjF,QAAL,GAAc,CAA/C;AAGA,UAAIkF,UAAU,GAAG,KAAK5b,MAAL,GAAY,CAA7B,CAjBsB,CAmBtB;;AACA,UAAI,KAAKmI,CAAL,GAASyT,UAAT,GAAsB,CAA1B,EAA6B;AAC5B,aAAKzT,CAAL,GAASyT,UAAT;AACA,OAFD,MAEO,IAAI,KAAKzT,CAAL,GAASyT,UAAT,GAAsB,KAAKvc,KAAL,CAAWW,MAArC,EAA4C;AAClD,aAAKmI,CAAL,GAAS,KAAK9I,KAAL,CAAWW,MAAX,GAAoB4b,UAA7B;AACA,OAxBqB,CA0BtB;;;AACA,UAAI,KAAK3T,CAAL,GAAS,KAAK5I,KAAL,CAAWU,KAAX,GAAiB,CAA9B,EAAgC;AAC/B,aAAKkI,CAAL,IAAU,KAAK2O,OAAL,GAAe,KAAK7W,KAA9B;AACA,OAFD,MAEO;AACN,aAAKkI,CAAL,IAAU,KAAK2O,OAAf;AACA;AAGD,KAnCwC;AAoCzCiF,IAAAA,aAAa,EAAG,uBAAS/P,KAAT,EAAe;AAC9B,UAAIgQ,cAAc,GAAG,KAAK3T,CAAL,GAAU,KAAKnI,MAAL,GAAY,CAAtB,GAA2B,KAAK2W,QAArD;AAAA,UACCoF,eAAe,GAAGjQ,KAAK,GAAC,CADzB,CAD8B,CAI9B;;AACA,UAAIA,KAAK,KAAK,CAAd,EAAgB;AACf,eAAOgQ,cAAc,GAAG,KAAK5E,aAAL,GAAmB,CAA3C;AACA,OAFD,MAEM;AACL,eAAO4E,cAAc,IAAK,KAAKhF,QAAL,GAAc,GAAd,GAAkBiF,eAAnB,GAAsC,KAAKjF,QAAL,GAAc,CAAxD,CAAd,GAA2E,KAAKI,aAAL,GAAqB,GAAvG;AACA;AAED,KA/CwC;AAgDzC7C,IAAAA,IAAI,EAAG,gBAAU;AAChB;AACA,UAAG,KAAKoD,MAAR,EAAe;AACd,aAAKA,MAAL,CAAY,IAAZ;AACA,OAFD,MAGI;AACHrE,QAAAA,oBAAoB,CAAC,KAAK7T,GAAN,EAAU,KAAK0I,CAAf,EAAiB,KAAKE,CAAL,GAAS,KAAKnI,MAAL,GAAY,CAAtC,EAAwC,KAAKD,KAA7C,EAAmD,KAAKC,MAAxD,EAA+D,KAAKmX,YAApE,CAApB;AACA,YAAI5X,GAAG,GAAG,KAAKA,GAAf;AACAA,QAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKnD,SAArB;AACA/W,QAAAA,GAAG,CAAC6W,IAAJ;AACA7W,QAAAA,GAAG,CAACmU,SAAJ;AAEAnU,QAAAA,GAAG,CAAC8b,SAAJ,GAAgB,MAAhB;AACA9b,QAAAA,GAAG,CAAC+b,YAAJ,GAAmB,QAAnB;AACA/b,QAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAK1C,cAArB;AACAxX,QAAAA,GAAG,CAACuT,IAAJ,GAAW,KAAK0I,SAAhB;AAEAjc,QAAAA,GAAG,CAACgc,QAAJ,CAAa,KAAKhE,KAAlB,EAAwB,KAAKtP,CAAL,GAAS,KAAKyO,QAAtC,EAAgD,KAAKmF,aAAL,CAAmB,CAAnB,CAAhD;AAEAtc,QAAAA,GAAG,CAACuT,IAAJ,GAAW,KAAKA,IAAhB;AACA5S,QAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKmU,MAAlB,EAAyB,UAASI,KAAT,EAAe1L,KAAf,EAAqB;AAC7CvM,UAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAK5C,SAArB;AACAtX,UAAAA,GAAG,CAACgc,QAAJ,CAAa/D,KAAb,EAAmB,KAAKvP,CAAL,GAAS,KAAKyO,QAAd,GAAyB,KAAKI,QAA9B,GAAyC,CAA5D,EAA+D,KAAK+E,aAAL,CAAmB/P,KAAK,GAAG,CAA3B,CAA/D,EAF6C,CAI7C;AACA;AACA;;AAEAvM,UAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKnC,qBAArB;AACA/X,UAAAA,GAAG,CAACyc,QAAJ,CAAa,KAAK/T,CAAL,GAAS,KAAKyO,QAA3B,EAAqC,KAAKmF,aAAL,CAAmB/P,KAAK,GAAG,CAA3B,IAAgC,KAAKgL,QAAL,GAAc,CAAnF,EAAsF,KAAKA,QAA3F,EAAqG,KAAKA,QAA1G;AAEAvX,UAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKpC,YAAL,CAAkBvL,KAAlB,EAAyBsK,IAAzC;AACA7W,UAAAA,GAAG,CAACyc,QAAJ,CAAa,KAAK/T,CAAL,GAAS,KAAKyO,QAA3B,EAAqC,KAAKmF,aAAL,CAAmB/P,KAAK,GAAG,CAA3B,IAAgC,KAAKgL,QAAL,GAAc,CAAnF,EAAsF,KAAKA,QAA3F,EAAqG,KAAKA,QAA1G;AAGA,SAfD,EAeE,IAfF;AAgBA;AACD;AArFwC,GAArB,CAArB;AAwFA3X,EAAAA,KAAK,CAAC8c,KAAN,GAAc9c,KAAK,CAACuY,OAAN,CAAcpT,MAAd,CAAqB;AAClCyP,IAAAA,UAAU,EAAG,sBAAU;AACtB,WAAKmI,GAAL;AACA,KAHiC;AAIlCC,IAAAA,YAAY,EAAG,wBAAU;AACxB,WAAKC,OAAL,GAAe,EAAf;AAEA,UAAIC,iBAAiB,GAAGhV,gBAAgB,CAAC,KAAKuD,SAAN,CAAxC;;AAEA,WAAK,IAAIhH,CAAC,GAAC,CAAX,EAAcA,CAAC,IAAE,KAAKmH,KAAtB,EAA6BnH,CAAC,EAA9B,EAAiC;AAChC,aAAKwY,OAAL,CAAajX,IAAb,CAAkB6F,QAAQ,CAAC,KAAKC,cAAN,EAAqB;AAAC9G,UAAAA,KAAK,EAAC,CAAC,KAAK6C,GAAL,GAAYpD,CAAC,GAAG,KAAKgH,SAAtB,EAAkC0R,OAAlC,CAA0CD,iBAA1C;AAAP,SAArB,CAA1B;AACA;;AACD,WAAKE,WAAL,GAAoB,KAAKxD,OAAL,IAAgB,KAAKyD,UAAtB,GAAoC3J,WAAW,CAAC,KAAKtT,GAAN,EAAU,KAAKuT,IAAf,EAAoB,KAAKsJ,OAAzB,CAA/C,GAAmF,CAAtG;AACA,KAbiC;AAclCK,IAAAA,SAAS,EAAG,mBAASjF,KAAT,EAAe;AAC1B,WAAKkF,OAAL,CAAavX,IAAb,CAAkBqS,KAAlB;AACA,WAAKmF,WAAL;AACA,WAAKT,GAAL;AACA,KAlBiC;AAmBlCU,IAAAA,YAAY,EAAG,wBAAU;AACxB,WAAKF,OAAL,CAAaG,KAAb;AACA,WAAKF,WAAL;AACA,WAAKT,GAAL;AACA,KAvBiC;AAwBlC;AACAA,IAAAA,GAAG,EAAE,eAAU;AACd;AAEA;AACA,WAAKY,UAAL,GAAmB,KAAK/D,OAAN,GAAiB,KAAKjC,QAAtB,GAAiC,CAAnD;AACA,WAAKiG,QAAL,GAAiB,KAAKhE,OAAN,GAAiB,KAAK/Y,MAAL,GAAe,KAAK8W,QAAL,GAAgB,GAA/B,GAAsC,CAAvD,GAA2D,KAAK9W,MAAhF,CALc,CAK0E;AAExF;;AACA,WAAK8c,UAAL,IAAmB,KAAKE,OAAxB;AACA,WAAKD,QAAL,IAAiB,KAAKC,OAAtB,CATc,CAWd;;AACA,UAAIC,YAAY,GAAG,KAAKF,QAAL,GAAgB,KAAKD,UAAxC;AAAA,UACCI,iBADD,CAZc,CAed;;AACA;;;;;;;;;;AASA,WAAKC,eAAL,CAAqBF,YAArB,EAzBc,CA2Bd;AACA;;AACA,WAAKd,YAAL;AAEA,WAAKiB,uBAAL;;AAEA,aAAOH,YAAY,GAAG,KAAKF,QAAL,GAAgB,KAAKD,UAA3C,EAAuD;AACtDG,QAAAA,YAAY,GAAG,KAAKF,QAAL,GAAgB,KAAKD,UAApC;AACAI,QAAAA,iBAAiB,GAAG,KAAKX,WAAzB;AAEA,aAAKY,eAAL,CAAqBF,YAArB;AACA,aAAKd,YAAL,GALsD,CAOtD;;AACA,YAAIe,iBAAiB,GAAG,KAAKX,WAA7B,EAAyC;AACxC,eAAKa,uBAAL;AACA;AACD;AAED,KAvEiC;AAwElCA,IAAAA,uBAAuB,EAAG,mCAAU;AACnC;AACA;AAEA,WAAK7d,GAAL,CAASuT,IAAT,GAAgB,KAAKA,IAArB;AAEA,UAAIuK,UAAU,GAAG,KAAK9d,GAAL,CAAS4T,WAAT,CAAqB,KAAKuJ,OAAL,CAAa,CAAb,CAArB,EAAsC3c,KAAvD;AAAA,UACCud,SAAS,GAAG,KAAK/d,GAAL,CAAS4T,WAAT,CAAqB,KAAKuJ,OAAL,CAAa,KAAKA,OAAL,CAAa/Y,MAAb,GAAsB,CAAnC,CAArB,EAA4D5D,KADzE;AAAA,UAECwd,YAFD;AAAA,UAGCC,WAHD;AAMA,WAAKC,kBAAL,GAA0BH,SAAS,GAAC,CAAV,GAAc,CAAxC;AACA,WAAKI,iBAAL,GAA0BL,UAAU,GAAC,CAAX,GAAe,KAAKd,WAAL,GAAmB,EAAnC,GAAyCc,UAAU,GAAC,CAApD,GAAwD,KAAKd,WAAL,GAAmB,EAApG;AAEA,WAAKoB,cAAL,GAAsB,CAAtB;;AACA,UAAI,KAAK5E,OAAT,EAAiB;AAChB,YAAI6E,kBAAkB,GAAG/K,WAAW,CAAC,KAAKtT,GAAN,EAAU,KAAKuT,IAAf,EAAoB,KAAK4J,OAAzB,CAApC;AAAA,YACCmB,WADD;AAAA,YAECC,iBAFD;AAGA,aAAKC,WAAL,GAAmBH,kBAAnB,CAJgB,CAKhB;;AACA,YAAII,UAAU,GAAGjX,IAAI,CAAC0C,KAAL,CAAW,KAAKwU,UAAL,CAAgB,CAAhB,IAAqB,KAAKA,UAAL,CAAgB,CAAhB,CAAhC,IAAsD,CAAvE,CANgB,CAQhB;;AACA,eAAQ,KAAKF,WAAL,GAAmBC,UAAnB,IAAiC,KAAKL,cAAL,KAAwB,CAA1D,IAAiE,KAAKI,WAAL,GAAmBC,UAAnB,IAAiC,KAAKL,cAAL,IAAuB,EAAxD,IAA8D,KAAKA,cAAL,GAAsB,CAA5J,EAA+J;AAC9JE,UAAAA,WAAW,GAAG9W,IAAI,CAAC+F,GAAL,CAASrF,SAAS,CAAC,KAAKkW,cAAN,CAAlB,CAAd;AAEAJ,UAAAA,YAAY,GAAGM,WAAW,GAAGR,UAA7B;AACAG,UAAAA,WAAW,GAAGK,WAAW,GAAGP,SAA5B,CAJ8J,CAM9J;;AACA,cAAIC,YAAY,GAAG,KAAKzG,QAAL,GAAgB,CAA/B,GAAmC,KAAKyF,WAAL,GAAmB,CAA1D,EAA4D;AAC3D,iBAAKmB,iBAAL,GAAyBH,YAAY,GAAG,KAAKzG,QAAL,GAAgB,CAAxD;AACA;;AACD,eAAK2G,kBAAL,GAA0B,KAAK3G,QAAL,GAAc,CAAxC;AAGA,eAAK6G,cAAL;AACA,eAAKI,WAAL,GAAmBF,WAAW,GAAGD,kBAAjC;AAEA;;AACD,YAAI,KAAKD,cAAL,GAAsB,CAA1B,EAA4B;AAC3B,eAAKZ,QAAL,IAAiBhW,IAAI,CAACiG,GAAL,CAASvF,SAAS,CAAC,KAAKkW,cAAN,CAAlB,IAAyCC,kBAAzC,GAA8D,CAA/E;AACA;AACD,OA7BD,MA8BI;AACH,aAAKG,WAAL,GAAmB,CAAnB;AACA,aAAKN,kBAAL,GAA0B,KAAKT,OAA/B;AACA,aAAKU,iBAAL,GAAyB,KAAKV,OAA9B;AACA;AAED,KA5HiC;AA6HlC;AACA;AACAG,IAAAA,eAAe,EAAEpX,IA/HiB;AAgIlCmY,IAAAA,WAAW,EAAE,uBAAU;AACtB,aAAO,KAAKpB,UAAL,GAAkB,KAAKC,QAA9B;AACA,KAlIiC;AAmIlCoB,IAAAA,UAAU,EAAG,oBAASha,KAAT,EAAe;AAC3B,UAAIia,aAAa,GAAG,KAAKF,WAAL,MAAsB,KAAKlX,GAAL,GAAW,KAAKH,GAAtC,CAApB;AACA,aAAO,KAAKkW,QAAL,GAAiBqB,aAAa,IAAIja,KAAK,GAAG,KAAK6C,GAAjB,CAArC;AACA,KAtIiC;AAuIlCiX,IAAAA,UAAU,EAAG,oBAASnS,KAAT,EAAe;AAC3B,UAAIuS,SAAS,GAAI,KAAKV,cAAL,GAAsB,CAAvC;AAAA,UACC;AACAW,MAAAA,UAAU,GAAG,KAAKve,KAAL,IAAc,KAAK2d,iBAAL,GAAyB,KAAKD,kBAA5C,CAFd;AAAA,UAGCc,UAAU,GAAGD,UAAU,GAACvX,IAAI,CAACF,GAAL,CAAU,KAAK8V,WAAL,IAAqB,KAAK6B,eAAN,GAAyB,CAAzB,GAA6B,CAAjD,CAAV,EAAgE,CAAhE,CAHzB;AAAA,UAICC,WAAW,GAAIF,UAAU,GAAGzS,KAAd,GAAuB,KAAK4R,iBAJ3C;;AAMA,UAAI,KAAKc,eAAT,EAAyB;AACxBC,QAAAA,WAAW,IAAKF,UAAU,GAAC,CAA3B;AACA;;AAED,aAAOxX,IAAI,CAAC+D,KAAL,CAAW2T,WAAX,CAAP;AACA,KAnJiC;AAoJlC/F,IAAAA,MAAM,EAAG,gBAASC,QAAT,EAAkB;AAC1BzY,MAAAA,OAAO,CAACoE,MAAR,CAAe,IAAf,EAAqBqU,QAArB;AACA,WAAKuD,GAAL;AACA,KAvJiC;AAwJlC7H,IAAAA,IAAI,EAAG,gBAAU;AAChB,UAAI9U,GAAG,GAAG,KAAKA,GAAf;AAAA,UACCmf,SAAS,GAAG,CAAC,KAAK3B,QAAL,GAAgB,KAAKD,UAAtB,IAAoC,KAAK/R,KADtD;AAAA,UAEC4T,MAAM,GAAG5X,IAAI,CAAC+D,KAAL,CAAW,KAAK4S,iBAAhB,CAFV;;AAGA,UAAI,KAAK3E,OAAT,EAAiB;AAChBxZ,QAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAK5C,SAArB;AACAtX,QAAAA,GAAG,CAACuT,IAAJ,GAAW,KAAKA,IAAhB;AACA7P,QAAAA,IAAI,CAAC,KAAKmZ,OAAN,EAAc,UAASwC,WAAT,EAAqB9S,KAArB,EAA2B;AAC5C,cAAI+S,YAAY,GAAG,KAAK9B,QAAL,GAAiB2B,SAAS,GAAG5S,KAAhD;AAAA,cACCgT,aAAa,GAAG/X,IAAI,CAAC+D,KAAL,CAAW+T,YAAX,CADjB;AAAA,cAECE,kBAAkB,GAAG,KAAKC,mBAF3B;AAIAzf,UAAAA,GAAG,CAAC8b,SAAJ,GAAgB,OAAhB;AACA9b,UAAAA,GAAG,CAAC+b,YAAJ,GAAmB,QAAnB;;AACA,cAAI,KAAKkB,UAAT,EAAoB;AACnBjd,YAAAA,GAAG,CAACgc,QAAJ,CAAaqD,WAAb,EAAyBD,MAAM,GAAG,EAAlC,EAAqCE,YAArC;AACA,WAT2C,CAW5C;;;AACA,cAAI/S,KAAK,KAAK,CAAV,IAAe,CAACiT,kBAApB,EAAuC;AACtCA,YAAAA,kBAAkB,GAAG,IAArB;AACA;;AAED,cAAIA,kBAAJ,EAAuB;AACtBxf,YAAAA,GAAG,CAAC+T,SAAJ;AACA;;AAED,cAAIxH,KAAK,GAAG,CAAZ,EAAc;AACb;AACAvM,YAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAK0F,aAArB;AACA1f,YAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK4F,aAAvB;AACA,WAJD,MAIO;AACN;AACA3f,YAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKA,SAArB;AACAha,YAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK6F,SAAvB;AACA;;AAEDL,UAAAA,aAAa,IAAI5e,OAAO,CAACuI,UAAR,CAAmBlJ,GAAG,CAACga,SAAvB,CAAjB;;AAEA,cAAGwF,kBAAH,EAAsB;AACrBxf,YAAAA,GAAG,CAACgU,MAAJ,CAAWoL,MAAX,EAAmBG,aAAnB;AACAvf,YAAAA,GAAG,CAACiU,MAAJ,CAAW,KAAKzT,KAAhB,EAAuB+e,aAAvB;AACAvf,YAAAA,GAAG,CAACgX,MAAJ;AACAhX,YAAAA,GAAG,CAACmU,SAAJ;AACA;;AAEDnU,UAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKA,SAArB;AACAha,UAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK6F,SAAvB;AACA5f,UAAAA,GAAG,CAAC+T,SAAJ;AACA/T,UAAAA,GAAG,CAACgU,MAAJ,CAAWoL,MAAM,GAAG,CAApB,EAAuBG,aAAvB;AACAvf,UAAAA,GAAG,CAACiU,MAAJ,CAAWmL,MAAX,EAAmBG,aAAnB;AACAvf,UAAAA,GAAG,CAACgX,MAAJ;AACAhX,UAAAA,GAAG,CAACmU,SAAJ;AAEA,SA/CG,EA+CF,IA/CE,CAAJ;AAiDAzQ,QAAAA,IAAI,CAAC,KAAKyZ,OAAN,EAAc,UAASlF,KAAT,EAAe1L,KAAf,EAAqB;AACtC,cAAIsT,IAAI,GAAG,KAAKnB,UAAL,CAAgBnS,KAAhB,IAAyBrD,UAAU,CAAC,KAAK8Q,SAAN,CAA9C;AAAA,cACC;AACA8F,UAAAA,OAAO,GAAG,KAAKpB,UAAL,CAAgBnS,KAAK,IAAI,KAAK0S,eAAL,GAAuB,GAAvB,GAA6B,CAAjC,CAArB,IAA4D/V,UAAU,CAAC,KAAK8Q,SAAN,CAFjF;AAAA,cAGC8E,SAAS,GAAI,KAAKV,cAAL,GAAsB,CAHpC;AAAA,cAIC2B,gBAAgB,GAAG,KAAKC,iBAJzB,CADsC,CAOtC;;AACA,cAAIzT,KAAK,KAAK,CAAV,IAAe,CAACwT,gBAApB,EAAqC;AACpCA,YAAAA,gBAAgB,GAAG,IAAnB;AACA;;AAED,cAAIA,gBAAJ,EAAqB;AACpB/f,YAAAA,GAAG,CAAC+T,SAAJ;AACA;;AAED,cAAIxH,KAAK,GAAG,CAAZ,EAAc;AACb;AACAvM,YAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAK0F,aAArB;AACA1f,YAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK4F,aAAvB;AACA,WAJD,MAIO;AACN;AACA3f,YAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKA,SAArB;AACAha,YAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK6F,SAAvB;AACA;;AAED,cAAIG,gBAAJ,EAAqB;AACpB/f,YAAAA,GAAG,CAACgU,MAAJ,CAAW8L,OAAX,EAAmB,KAAKtC,QAAxB;AACAxd,YAAAA,GAAG,CAACiU,MAAJ,CAAW6L,OAAX,EAAmB,KAAKvC,UAAL,GAAkB,CAArC;AACAvd,YAAAA,GAAG,CAACgX,MAAJ;AACAhX,YAAAA,GAAG,CAACmU,SAAJ;AACA;;AAGDnU,UAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKA,SAArB;AACAha,UAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK6F,SAAvB,CAnCsC,CAsCtC;;AACA5f,UAAAA,GAAG,CAAC+T,SAAJ;AACA/T,UAAAA,GAAG,CAACgU,MAAJ,CAAW8L,OAAX,EAAmB,KAAKtC,QAAxB;AACAxd,UAAAA,GAAG,CAACiU,MAAJ,CAAW6L,OAAX,EAAmB,KAAKtC,QAAL,GAAgB,CAAnC;AACAxd,UAAAA,GAAG,CAACgX,MAAJ;AACAhX,UAAAA,GAAG,CAACmU,SAAJ;AAEAnU,UAAAA,GAAG,CAACgZ,IAAJ;AACAhZ,UAAAA,GAAG,CAACigB,SAAJ,CAAcJ,IAAd,EAAoBf,SAAD,GAAc,KAAKtB,QAAL,GAAgB,EAA9B,GAAmC,KAAKA,QAAL,GAAgB,CAAtE;AACAxd,UAAAA,GAAG,CAACkgB,MAAJ,CAAWhY,SAAS,CAAC,KAAKkW,cAAN,CAAT,GAA+B,CAAC,CAA3C;AACApe,UAAAA,GAAG,CAACuT,IAAJ,GAAW,KAAKA,IAAhB;AACAvT,UAAAA,GAAG,CAAC8b,SAAJ,GAAiBgD,SAAD,GAAc,OAAd,GAAwB,QAAxC;AACA9e,UAAAA,GAAG,CAAC+b,YAAJ,GAAoB+C,SAAD,GAAc,QAAd,GAAyB,KAA5C;AACA9e,UAAAA,GAAG,CAACgc,QAAJ,CAAa/D,KAAb,EAAoB,CAApB,EAAuB,CAAvB;AACAjY,UAAAA,GAAG,CAACiZ,OAAJ;AACA,SArDG,EAqDF,IArDE,CAAJ;AAuDA;AACD;AAxQiC,GAArB,CAAd;AA4QArZ,EAAAA,KAAK,CAACugB,WAAN,GAAoBvgB,KAAK,CAACuY,OAAN,CAAcpT,MAAd,CAAqB;AACxCyP,IAAAA,UAAU,EAAE,sBAAU;AACrB,WAAK4L,IAAL,GAAY3Y,GAAG,CAAC,CAAC,KAAKhH,MAAN,EAAc,KAAKD,KAAnB,CAAD,CAAf;AACA,WAAKme,WAAL,GAAoB,KAAKnF,OAAN,GAAkB,KAAK4G,IAAL,GAAU,CAAX,IAAiB,KAAK7I,QAAL,GAAc,CAAd,GAAkB,KAAK8I,gBAAxC,CAAjB,GAA8E,KAAKD,IAAL,GAAU,CAA3G;AACA,KAJuC;AAKxCE,IAAAA,qBAAqB,EAAE,+BAAS1b,KAAT,EAAe;AACrC;AACA,UAAIia,aAAa,GAAG,KAAKF,WAAL,IAAoB,KAAKrX,GAAL,GAAW,KAAKG,GAApC,CAApB;AAEA,aAAO,CAAC7C,KAAK,GAAG,KAAK6C,GAAd,IAAqBoX,aAA5B;AACA,KAVuC;AAWxC1F,IAAAA,MAAM,EAAG,kBAAU;AAClB,UAAI,CAAC,KAAKoH,OAAV,EAAkB;AACjB,aAAKC,YAAL;AACA,OAFD,MAEO;AACN,aAAK7B,WAAL,GAAoB,KAAKnF,OAAN,GAAkB,KAAK4G,IAAL,GAAU,CAAX,IAAiB,KAAK7I,QAAL,GAAc,CAAd,GAAkB,KAAK8I,gBAAxC,CAAjB,GAA8E,KAAKD,IAAL,GAAU,CAA3G;AACA;;AACD,WAAKxD,YAAL;AACA,KAlBuC;AAmBxCA,IAAAA,YAAY,EAAE,wBAAU;AACvB,WAAKC,OAAL,GAAe,EAAf;AAEA,UAAIC,iBAAiB,GAAGhV,gBAAgB,CAAC,KAAKuD,SAAN,CAAxC;;AAEA,WAAK,IAAIhH,CAAC,GAAC,CAAX,EAAcA,CAAC,IAAE,KAAKmH,KAAtB,EAA6BnH,CAAC,EAA9B,EAAiC;AAChC,aAAKwY,OAAL,CAAajX,IAAb,CAAkB6F,QAAQ,CAAC,KAAKC,cAAN,EAAqB;AAAC9G,UAAAA,KAAK,EAAC,CAAC,KAAK6C,GAAL,GAAYpD,CAAC,GAAG,KAAKgH,SAAtB,EAAkC0R,OAAlC,CAA0CD,iBAA1C;AAAP,SAArB,CAA1B;AACA;AACD,KA3BuC;AA4BxC2D,IAAAA,gBAAgB,EAAG,4BAAU;AAC5B,aAASjZ,IAAI,CAACa,EAAL,GAAQ,CAAT,GAAc,KAAK+U,WAA3B;AACA,KA9BuC;AA+BxCoD,IAAAA,YAAY,EAAE,wBAAU;AACvB;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;AACA;AACA,UAAIE,qBAAqB,GAAGjZ,GAAG,CAAC,CAAE,KAAKhH,MAAL,GAAY,CAAZ,GAAgB,KAAKkgB,kBAArB,GAA0C,CAA5C,EAAgD,KAAKngB,KAAL,GAAW,CAA3D,CAAD,CAA/B;AAAA,UACCogB,aADD;AAAA,UAECvc,CAFD;AAAA,UAGCsP,SAHD;AAAA,UAICkN,aAJD;AAAA,UAKCC,aAAa,GAAG,KAAKtgB,KALtB;AAAA,UAMCugB,kBAND;AAAA,UAOCC,kBAPD;AAAA,UAQCC,YAAY,GAAG,CARhB;AAAA,UASCC,iBATD;AAAA,UAUCC,iBAVD;AAAA,UAWCC,eAXD;AAAA,UAYCC,gBAZD;AAAA,UAaCC,oBAbD;AAAA,UAcCC,mBAdD;AAAA,UAeCC,cAfD;AAgBA,WAAKxhB,GAAL,CAASuT,IAAT,GAAgBL,UAAU,CAAC,KAAKyN,kBAAN,EAAyB,KAAKc,mBAA9B,EAAkD,KAAKC,oBAAvD,CAA1B;;AACA,WAAKrd,CAAC,GAAC,CAAP,EAASA,CAAC,GAAC,KAAK+Y,WAAhB,EAA4B/Y,CAAC,EAA7B,EAAgC;AAC/B;AACAuc,QAAAA,aAAa,GAAG,KAAKe,gBAAL,CAAsBtd,CAAtB,EAAyBqc,qBAAzB,CAAhB;AACA/M,QAAAA,SAAS,GAAG,KAAK3T,GAAL,CAAS4T,WAAT,CAAqBnI,QAAQ,CAAC,KAAKC,cAAN,EAAsB;AAAE9G,UAAAA,KAAK,EAAE,KAAKiT,MAAL,CAAYxT,CAAZ;AAAT,SAAtB,CAA7B,EAA+E7D,KAA/E,GAAuF,CAAnG;;AACA,YAAI6D,CAAC,KAAK,CAAN,IAAWA,CAAC,KAAK,KAAK+Y,WAAL,GAAiB,CAAtC,EAAwC;AACvC;AACA;AACA;AACAyD,UAAAA,aAAa,GAAGlN,SAAS,GAAC,CAA1B;;AACA,cAAIiN,aAAa,CAAClY,CAAd,GAAkBmY,aAAlB,GAAkCC,aAAtC,EAAqD;AACpDA,YAAAA,aAAa,GAAGF,aAAa,CAAClY,CAAd,GAAkBmY,aAAlC;AACAE,YAAAA,kBAAkB,GAAG1c,CAArB;AACA;;AACD,cAAIuc,aAAa,CAAClY,CAAd,GAAkBmY,aAAlB,GAAkCI,YAAtC,EAAoD;AACnDA,YAAAA,YAAY,GAAGL,aAAa,CAAClY,CAAd,GAAkBmY,aAAjC;AACAK,YAAAA,iBAAiB,GAAG7c,CAApB;AACA;AACD,SAbD,MAcK,IAAIA,CAAC,GAAG,KAAK+Y,WAAL,GAAiB,CAAzB,EAA4B;AAChC;AACA,cAAIwD,aAAa,CAAClY,CAAd,GAAkBiL,SAAlB,GAA8BmN,aAAlC,EAAiD;AAChDA,YAAAA,aAAa,GAAGF,aAAa,CAAClY,CAAd,GAAkBiL,SAAlC;AACAoN,YAAAA,kBAAkB,GAAG1c,CAArB;AACA;AACD,SANI,MAOA,IAAIA,CAAC,GAAG,KAAK+Y,WAAL,GAAiB,CAAzB,EAA2B;AAC/B;AACA,cAAIwD,aAAa,CAAClY,CAAd,GAAkBiL,SAAlB,GAA8BsN,YAAlC,EAAgD;AAC/CA,YAAAA,YAAY,GAAGL,aAAa,CAAClY,CAAd,GAAkBiL,SAAjC;AACAuN,YAAAA,iBAAiB,GAAG7c,CAApB;AACA;AACD;AACD;;AAED+c,MAAAA,eAAe,GAAGH,YAAlB;AAEAI,MAAAA,gBAAgB,GAAG7Z,IAAI,CAAC0D,IAAL,CAAU4V,aAAa,GAAG,KAAKtgB,KAA/B,CAAnB;AAEAwgB,MAAAA,kBAAkB,GAAG,KAAKY,aAAL,CAAmBb,kBAAnB,CAArB;AAEAI,MAAAA,iBAAiB,GAAG,KAAKS,aAAL,CAAmBV,iBAAnB,CAApB;AAEAI,MAAAA,oBAAoB,GAAGD,gBAAgB,GAAG7Z,IAAI,CAACiG,GAAL,CAASuT,kBAAkB,GAAGxZ,IAAI,CAACa,EAAL,GAAQ,CAAtC,CAA1C;AAEAkZ,MAAAA,mBAAmB,GAAGH,eAAe,GAAG5Z,IAAI,CAACiG,GAAL,CAAS0T,iBAAiB,GAAG3Z,IAAI,CAACa,EAAL,GAAQ,CAArC,CAAxC,CA7FuB,CA+FvB;;AACAiZ,MAAAA,oBAAoB,GAAIra,QAAQ,CAACqa,oBAAD,CAAT,GAAmCA,oBAAnC,GAA0D,CAAjF;AACAC,MAAAA,mBAAmB,GAAIta,QAAQ,CAACsa,mBAAD,CAAT,GAAkCA,mBAAlC,GAAwD,CAA9E;AAEA,WAAK5C,WAAL,GAAmB+B,qBAAqB,GAAG,CAACa,mBAAmB,GAAGD,oBAAvB,IAA6C,CAAxF,CAnGuB,CAqGvB;;AACA,WAAKO,cAAL,CAAoBN,mBAApB,EAAyCD,oBAAzC;AAEA,KAvIuC;AAwIxCO,IAAAA,cAAc,EAAE,wBAASC,YAAT,EAAuBC,aAAvB,EAAqC;AAEpD,UAAIC,QAAQ,GAAG,KAAKxhB,KAAL,GAAauhB,aAAb,GAA6B,KAAKpD,WAAjD;AAAA,UACCsD,OAAO,GAAGH,YAAY,GAAG,KAAKnD,WAD/B;AAGA,WAAKuD,OAAL,GAAe,CAACD,OAAO,GAAGD,QAAX,IAAqB,CAApC,CALoD,CAMpD;;AACA,WAAKG,OAAL,GAAgB,KAAK1hB,MAAL,GAAY,CAA5B;AACA,KAhJuC;AAkJxCmhB,IAAAA,aAAa,EAAG,uBAASrV,KAAT,EAAe;AAC9B,UAAI6V,eAAe,GAAI5a,IAAI,CAACa,EAAL,GAAU,CAAX,GAAgB,KAAK+U,WAA3C,CAD8B,CAE9B;;AAEA,aAAO7Q,KAAK,GAAG6V,eAAR,GAA2B5a,IAAI,CAACa,EAAL,GAAQ,CAA1C;AACA,KAvJuC;AAwJxCsZ,IAAAA,gBAAgB,EAAG,0BAASpV,KAAT,EAAgB8V,kBAAhB,EAAmC;AACrD,UAAIC,SAAS,GAAG,KAAKV,aAAL,CAAmBrV,KAAnB,CAAhB;AACA,aAAO;AACN7D,QAAAA,CAAC,EAAIlB,IAAI,CAAC+F,GAAL,CAAS+U,SAAT,IAAsBD,kBAAvB,GAA6C,KAAKH,OADhD;AAENtZ,QAAAA,CAAC,EAAIpB,IAAI,CAACiG,GAAL,CAAS6U,SAAT,IAAsBD,kBAAvB,GAA6C,KAAKF;AAFhD,OAAP;AAIA,KA9JuC;AA+JxCrN,IAAAA,IAAI,EAAE,gBAAU;AACf,UAAI,KAAK0E,OAAT,EAAiB;AAChB,YAAIxZ,GAAG,GAAG,KAAKA,GAAf;AACA0D,QAAAA,IAAI,CAAC,KAAKmZ,OAAN,EAAe,UAAS5E,KAAT,EAAgB1L,KAAhB,EAAsB;AACxC;AACA,cAAIA,KAAK,GAAG,CAAZ,EAAc;AACb,gBAAIgW,aAAa,GAAGhW,KAAK,IAAI,KAAKoS,WAAL,GAAiB,KAAKnT,KAA1B,CAAzB;AAAA,gBACCgX,OAAO,GAAG,KAAKL,OAAL,GAAeI,aAD1B;AAAA,gBAEC3B,aAFD,CADa,CAKb;;AACA,gBAAI,KAAK5G,SAAL,GAAiB,CAArB,EAAuB;AACtBha,cAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK6F,SAAvB;AACA5f,cAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAKA,SAArB;;AAEA,kBAAG,KAAKuG,OAAR,EAAgB;AACfvgB,gBAAAA,GAAG,CAAC+T,SAAJ;AACA/T,gBAAAA,GAAG,CAAC8Z,GAAJ,CAAQ,KAAKoI,OAAb,EAAsB,KAAKC,OAA3B,EAAoCI,aAApC,EAAmD,CAAnD,EAAsD/a,IAAI,CAACa,EAAL,GAAQ,CAA9D;AACArI,gBAAAA,GAAG,CAACmU,SAAJ;AACAnU,gBAAAA,GAAG,CAACgX,MAAJ;AACA,eALD,MAKM;AACLhX,gBAAAA,GAAG,CAAC+T,SAAJ;;AACA,qBAAK,IAAI1P,CAAC,GAAC,CAAX,EAAaA,CAAC,GAAC,KAAK+Y,WAApB,EAAgC/Y,CAAC,EAAjC,EACA;AACCuc,kBAAAA,aAAa,GAAG,KAAKe,gBAAL,CAAsBtd,CAAtB,EAAyB,KAAKic,qBAAL,CAA2B,KAAK7Y,GAAL,GAAY8E,KAAK,GAAG,KAAKlB,SAApD,CAAzB,CAAhB;;AACA,sBAAIhH,CAAC,KAAK,CAAV,EAAY;AACXrE,oBAAAA,GAAG,CAACgU,MAAJ,CAAW4M,aAAa,CAAClY,CAAzB,EAA4BkY,aAAa,CAAChY,CAA1C;AACA,mBAFD,MAEO;AACN5I,oBAAAA,GAAG,CAACiU,MAAJ,CAAW2M,aAAa,CAAClY,CAAzB,EAA4BkY,aAAa,CAAChY,CAA1C;AACA;AACD;;AACD5I,gBAAAA,GAAG,CAACmU,SAAJ;AACAnU,gBAAAA,GAAG,CAACgX,MAAJ;AACA;AACD;;AACD,gBAAG,KAAKiG,UAAR,EAAmB;AAClBjd,cAAAA,GAAG,CAACuT,IAAJ,GAAWL,UAAU,CAAC,KAAKqE,QAAN,EAAe,KAAKnE,SAApB,EAA8B,KAAKC,UAAnC,CAArB;;AACA,kBAAI,KAAKoP,iBAAT,EAA2B;AAC1B,oBAAItG,UAAU,GAAGnc,GAAG,CAAC4T,WAAJ,CAAgBqE,KAAhB,EAAuBzX,KAAxC;AACAR,gBAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAKwI,aAArB;AACA1iB,gBAAAA,GAAG,CAACyc,QAAJ,CACC,KAAKyF,OAAL,GAAe/F,UAAU,GAAC,CAA1B,GAA8B,KAAKwG,gBADpC,EAECH,OAAO,GAAG,KAAKjL,QAAL,GAAc,CAAxB,GAA4B,KAAK8I,gBAFlC,EAGClE,UAAU,GAAG,KAAKwG,gBAAL,GAAsB,CAHpC,EAIC,KAAKpL,QAAL,GAAgB,KAAK8I,gBAAL,GAAsB,CAJvC;AAMA;;AACDrgB,cAAAA,GAAG,CAAC8b,SAAJ,GAAgB,QAAhB;AACA9b,cAAAA,GAAG,CAAC+b,YAAJ,GAAmB,QAAnB;AACA/b,cAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAK0I,SAArB;AACA5iB,cAAAA,GAAG,CAACgc,QAAJ,CAAa/D,KAAb,EAAoB,KAAKiK,OAAzB,EAAkCM,OAAlC;AACA;AACD;AACD,SAlDG,EAkDD,IAlDC,CAAJ;;AAoDA,YAAI,CAAC,KAAKjC,OAAV,EAAkB;AACjBvgB,UAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAK6I,cAArB;AACA7iB,UAAAA,GAAG,CAAC+Z,WAAJ,GAAkB,KAAK+I,cAAvB;;AACA,eAAK,IAAIze,CAAC,GAAG,KAAK+Y,WAAL,GAAmB,CAAhC,EAAmC/Y,CAAC,IAAI,CAAxC,EAA2CA,CAAC,EAA5C,EAAgD;AAC/C,gBAAI,KAAKwe,cAAL,GAAsB,CAA1B,EAA4B;AAC3B,kBAAIE,aAAa,GAAG,KAAKpB,gBAAL,CAAsBtd,CAAtB,EAAyB,KAAKic,qBAAL,CAA2B,KAAKhZ,GAAhC,CAAzB,CAApB;AACAtH,cAAAA,GAAG,CAAC+T,SAAJ;AACA/T,cAAAA,GAAG,CAACgU,MAAJ,CAAW,KAAKkO,OAAhB,EAAyB,KAAKC,OAA9B;AACAniB,cAAAA,GAAG,CAACiU,MAAJ,CAAW8O,aAAa,CAACra,CAAzB,EAA4Bqa,aAAa,CAACna,CAA1C;AACA5I,cAAAA,GAAG,CAACgX,MAAJ;AACAhX,cAAAA,GAAG,CAACmU,SAAJ;AACA,aAR8C,CAS/C;;;AACA,gBAAI6O,kBAAkB,GAAG,KAAKrB,gBAAL,CAAsBtd,CAAtB,EAAyB,KAAKic,qBAAL,CAA2B,KAAKhZ,GAAhC,IAAuC,CAAhE,CAAzB;AACAtH,YAAAA,GAAG,CAACuT,IAAJ,GAAWL,UAAU,CAAC,KAAKyN,kBAAN,EAAyB,KAAKc,mBAA9B,EAAkD,KAAKC,oBAAvD,CAArB;AACA1hB,YAAAA,GAAG,CAACka,SAAJ,GAAgB,KAAK+I,mBAArB;AAEA,gBAAIC,WAAW,GAAG,KAAKrL,MAAL,CAAYzT,MAA9B;AAAA,gBACC+e,eAAe,GAAG,KAAKtL,MAAL,CAAYzT,MAAZ,GAAmB,CADtC;AAAA,gBAECgf,kBAAkB,GAAGD,eAAe,GAAC,CAFtC;AAAA,gBAGCE,SAAS,GAAIhf,CAAC,GAAG+e,kBAAJ,IAA0B/e,CAAC,GAAG6e,WAAW,GAAGE,kBAH1D;AAAA,gBAICE,YAAY,GAAIjf,CAAC,KAAK+e,kBAAN,IAA4B/e,CAAC,KAAK6e,WAAW,GAAGE,kBAJjE;;AAKA,gBAAI/e,CAAC,KAAK,CAAV,EAAY;AACXrE,cAAAA,GAAG,CAAC8b,SAAJ,GAAgB,QAAhB;AACA,aAFD,MAEO,IAAGzX,CAAC,KAAK8e,eAAT,EAAyB;AAC/BnjB,cAAAA,GAAG,CAAC8b,SAAJ,GAAgB,QAAhB;AACA,aAFM,MAEA,IAAIzX,CAAC,GAAG8e,eAAR,EAAwB;AAC9BnjB,cAAAA,GAAG,CAAC8b,SAAJ,GAAgB,MAAhB;AACA,aAFM,MAEA;AACN9b,cAAAA,GAAG,CAAC8b,SAAJ,GAAgB,OAAhB;AACA,aA3B8C,CA6B/C;;;AACA,gBAAIwH,YAAJ,EAAiB;AAChBtjB,cAAAA,GAAG,CAAC+b,YAAJ,GAAmB,QAAnB;AACA,aAFD,MAEO,IAAIsH,SAAJ,EAAc;AACpBrjB,cAAAA,GAAG,CAAC+b,YAAJ,GAAmB,QAAnB;AACA,aAFM,MAEA;AACN/b,cAAAA,GAAG,CAAC+b,YAAJ,GAAmB,KAAnB;AACA;;AAED/b,YAAAA,GAAG,CAACgc,QAAJ,CAAa,KAAKnE,MAAL,CAAYxT,CAAZ,CAAb,EAA6B2e,kBAAkB,CAACta,CAAhD,EAAmDsa,kBAAkB,CAACpa,CAAtE;AACA;AACD;AACD;AACD;AAnQuC,GAArB,CAApB,CAjrDU,CAu7DV;;AACAjI,EAAAA,OAAO,CAAC2Q,QAAR,CAAiBzK,MAAjB,EAAyB,QAAzB,EAAoC,YAAU;AAC7C;AACA,QAAI0c,OAAJ;AACA,WAAO,YAAU;AAChB5T,MAAAA,YAAY,CAAC4T,OAAD,CAAZ;AACAA,MAAAA,OAAO,GAAGnU,UAAU,CAAC,YAAU;AAC9B1L,QAAAA,IAAI,CAAC9D,KAAK,CAACwU,SAAP,EAAiB,UAASoP,QAAT,EAAkB;AACtC;AACA;AACA,cAAIA,QAAQ,CAAClP,OAAT,CAAiBrS,UAArB,EAAgC;AAC/BuhB,YAAAA,QAAQ,CAACjP,MAAT,CAAgBiP,QAAQ,CAAC3O,MAAzB,EAAiC,IAAjC;AACA;AACD,SANG,CAAJ;AAOA,OARmB,EAQjB,EARiB,CAApB;AASA,KAXD;AAYA,GAfkC,EAAnC;;AAkBA,MAAI9N,GAAJ,EAAS;AACRC,IAAAA,MAAM,CAAC,YAAU;AAChB,aAAOpH,KAAP;AACA,KAFK,CAAN;AAGA,GAJD,MAIO,IAAI,QAAO6jB,MAAP,yCAAOA,MAAP,OAAkB,QAAlB,IAA8BA,MAAM,CAACC,OAAzC,EAAkD;AACxDD,IAAAA,MAAM,CAACC,OAAP,GAAiB9jB,KAAjB;AACA;;AAEDF,EAAAA,IAAI,CAACE,KAAL,GAAaA,KAAb;;AAEAA,EAAAA,KAAK,CAAC+jB,UAAN,GAAmB,YAAU;AAC5BjkB,IAAAA,IAAI,CAACE,KAAL,GAAaD,QAAb;AACA,WAAOC,KAAP;AACA,GAHD;AAKA,CAz9DD,EAy9DGsE,IAz9DH,CAy9DQ,IAz9DR;AA29DA,CAAC,YAAU;AACV;;AAEA,MAAIxE,IAAI,GAAG,IAAX;AAAA,MACCE,KAAK,GAAGF,IAAI,CAACE,KADd;AAAA,MAECe,OAAO,GAAGf,KAAK,CAACe,OAFjB;AAKA,MAAIijB,aAAa,GAAG;AACnB;AACAhiB,IAAAA,gBAAgB,EAAG,IAFA;AAInB;AACAiiB,IAAAA,kBAAkB,EAAG,IALF;AAOnB;AACAC,IAAAA,kBAAkB,EAAG,iBARF;AAUnB;AACAC,IAAAA,kBAAkB,EAAG,CAXF;AAanB;AACAC,IAAAA,wBAAwB,EAAE,IAdP;AAgBnB;AACAC,IAAAA,sBAAsB,EAAE,IAjBL;AAmBnB;AACAC,IAAAA,aAAa,EAAG,IApBG;AAsBnB;AACAC,IAAAA,cAAc,EAAG,CAvBE;AAyBnB;AACAC,IAAAA,eAAe,EAAG,CA1BC;AA4BnB;AACAC,IAAAA,iBAAiB,EAAG,CA7BD;AA+BnB;AACArP,IAAAA,cAAc,EAAG;AAhCE,GAApB;AAqCApV,EAAAA,KAAK,CAACyU,IAAN,CAAWtP,MAAX,CAAkB;AACjB4T,IAAAA,IAAI,EAAE,KADW;AAEjB9X,IAAAA,QAAQ,EAAG+iB,aAFM;AAGjBpP,IAAAA,UAAU,EAAG,oBAASzI,IAAT,EAAc;AAE1B;AACA,UAAIuI,OAAO,GAAG,KAAKA,OAAnB;AAEA,WAAKgQ,UAAL,GAAkB1kB,KAAK,CAAC8c,KAAN,CAAY3X,MAAZ,CAAmB;AACpCka,QAAAA,eAAe,EAAG,IADkB;AAEpCsF,QAAAA,aAAa,EAAG,uBAASC,YAAT,EAAuBC,YAAvB,EAAqCC,QAArC,EAA8C;AAC7D;AACA,cAAIC,MAAM,GAAG,KAAKC,kBAAL,EAAb;AAAA,cACCC,SAAS,GAAG,KAAKnG,UAAL,CAAgBgG,QAAhB,IAA6BC,MAAM,GAAC,CADjD;AAAA,cAECG,QAAQ,GAAG,KAAKC,iBAAL,CAAuBP,YAAvB,CAFZ;AAIA,iBAAOK,SAAS,GAAIC,QAAQ,GAAGL,YAAxB,GAAyCA,YAAY,GAAGnQ,OAAO,CAAC+P,iBAAhE,GAAqFS,QAAQ,GAAC,CAArG;AACA,SATmC;AAUpCF,QAAAA,kBAAkB,EAAG,8BAAU;AAC9B,iBAAQ,KAAKlG,UAAL,CAAgB,CAAhB,IAAqB,KAAKA,UAAL,CAAgB,CAAhB,CAAtB,GAA6C,IAAEpK,OAAO,CAAC8P,eAA9D;AACA,SAZmC;AAapCW,QAAAA,iBAAiB,EAAG,2BAASP,YAAT,EAAsB;AACzC;AACA,cAAIQ,SAAS,GAAG,KAAKJ,kBAAL,KAA6B,CAACJ,YAAY,GAAG,CAAhB,IAAqBlQ,OAAO,CAAC+P,iBAA1E;AAEA,iBAAQW,SAAS,GAAGR,YAApB;AACA;AAlBmC,OAAnB,CAAlB;AAqBA,WAAK7O,QAAL,GAAgB,EAAhB,CA1B0B,CA4B1B;;AACA,UAAI,KAAKrB,OAAL,CAAanS,YAAjB,EAA8B;AAC7BxB,QAAAA,OAAO,CAACqR,UAAR,CAAmB,IAAnB,EAAyB,KAAKsC,OAAL,CAAajS,aAAtC,EAAqD,UAASmO,GAAT,EAAa;AACjE,cAAIyU,UAAU,GAAIzU,GAAG,CAAC0U,IAAJ,KAAa,UAAd,GAA4B,KAAKC,cAAL,CAAoB3U,GAApB,CAA5B,GAAuD,EAAxE;AAEA,eAAK4U,QAAL,CAAc,UAASC,GAAT,EAAa;AAC1BA,YAAAA,GAAG,CAACpM,OAAJ,CAAY,CAAC,WAAD,EAAc,aAAd,CAAZ;AACA,WAFD;AAGAtY,UAAAA,OAAO,CAAC+C,IAAR,CAAauhB,UAAb,EAAyB,UAASK,SAAT,EAAmB;AAC3CA,YAAAA,SAAS,CAACvO,SAAV,GAAsBuO,SAAS,CAACC,aAAhC;AACAD,YAAAA,SAAS,CAACrO,WAAV,GAAwBqO,SAAS,CAACE,eAAlC;AACA,WAHD;AAIA,eAAKpQ,WAAL,CAAiB6P,UAAjB;AACA,SAXD;AAYA,OA1CyB,CA4C1B;;;AACA,WAAKQ,QAAL,GAAgB7lB,KAAK,CAACqb,SAAN,CAAgBlW,MAAhB,CAAuB;AACtCkV,QAAAA,WAAW,EAAG,KAAK3F,OAAL,CAAa6P,cADW;AAEtCnJ,QAAAA,UAAU,EAAG,KAAK1G,OAAL,CAAa4P,aAFY;AAGtClkB,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE;AAHqB,OAAvB,CAAhB,CA7C0B,CAmD1B;;AACAW,MAAAA,OAAO,CAAC+C,IAAR,CAAaqI,IAAI,CAAC4J,QAAlB,EAA2B,UAASgB,OAAT,EAAiB8N,YAAjB,EAA8B;AAExD,YAAIiB,aAAa,GAAG;AACnBzN,UAAAA,KAAK,EAAGtB,OAAO,CAACsB,KAAR,IAAiB,IADN;AAEnBlB,UAAAA,SAAS,EAAGJ,OAAO,CAACI,SAFD;AAGnBE,UAAAA,WAAW,EAAGN,OAAO,CAACM,WAHH;AAInBlB,UAAAA,IAAI,EAAG;AAJY,SAApB;AAOA,aAAKJ,QAAL,CAAc/P,IAAd,CAAmB8f,aAAnB;AAEA/kB,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAAC5K,IAArB,EAA0B,UAAS4Z,SAAT,EAAmBpZ,KAAnB,EAAyB;AAClD;AACAmZ,UAAAA,aAAa,CAAC3P,IAAd,CAAmBnQ,IAAnB,CAAwB,IAAI,KAAK6f,QAAT,CAAkB;AACzC7gB,YAAAA,KAAK,EAAG+gB,SADiC;AAEzC1N,YAAAA,KAAK,EAAGlM,IAAI,CAAC8L,MAAL,CAAYtL,KAAZ,CAFiC;AAGzCqZ,YAAAA,YAAY,EAAEjP,OAAO,CAACsB,KAHmB;AAIzChB,YAAAA,WAAW,EAAGN,OAAO,CAACM,WAJmB;AAKzCF,YAAAA,SAAS,EAAGJ,OAAO,CAACI,SALqB;AAMzCwO,YAAAA,aAAa,EAAG5O,OAAO,CAAC4O,aAAR,IAAyB5O,OAAO,CAACI,SANR;AAOzCyO,YAAAA,eAAe,EAAG7O,OAAO,CAAC6O,eAAR,IAA2B7O,OAAO,CAACM;AAPZ,WAAlB,CAAxB;AASA,SAXD,EAWE,IAXF;AAaA,OAxBD,EAwBE,IAxBF;AA0BA,WAAK4O,UAAL,CAAgB9Z,IAAI,CAAC8L,MAArB;AAEA,WAAK4N,QAAL,CAAczhB,SAAd,CAAwBgB,IAAxB,GAA+B,KAAK+N,KAAL,CAAWyK,QAA1C;AAEA,WAAK4H,QAAL,CAAc,UAASC,GAAT,EAAc9Y,KAAd,EAAqBkY,YAArB,EAAkC;AAC/C9jB,QAAAA,OAAO,CAACoE,MAAR,CAAesgB,GAAf,EAAoB;AACnB7kB,UAAAA,KAAK,EAAG,KAAKuS,KAAL,CAAWgS,iBAAX,CAA6B,KAAKpP,QAAL,CAAcvR,MAA3C,CADW;AAEnBsE,UAAAA,CAAC,EAAE,KAAKqK,KAAL,CAAWwR,aAAX,CAAyB,KAAK5O,QAAL,CAAcvR,MAAvC,EAA+CqgB,YAA/C,EAA6DlY,KAA7D,CAFgB;AAGnB3D,UAAAA,CAAC,EAAE,KAAKmK,KAAL,CAAWyK;AAHK,SAApB;AAKA6H,QAAAA,GAAG,CAACrM,IAAJ;AACA,OAPD,EAOG,IAPH;AASA,WAAKnE,MAAL;AACA,KA/FgB;AAgGjBsE,IAAAA,MAAM,EAAG,kBAAU;AAClB,WAAKpG,KAAL,CAAWoG,MAAX,GADkB,CAElB;;AACAxY,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAK6R,cAAlB,EAAkC,UAASuQ,aAAT,EAAuB;AACxDA,QAAAA,aAAa,CAAC7M,OAAd,CAAsB,CAAC,WAAD,EAAc,aAAd,CAAtB;AACA,OAFD;AAIA,WAAKmM,QAAL,CAAc,UAASC,GAAT,EAAa;AAC1BA,QAAAA,GAAG,CAACrM,IAAJ;AACA,OAFD;AAGA,WAAKnE,MAAL;AACA,KA3GgB;AA4GjBuQ,IAAAA,QAAQ,EAAG,kBAASxhB,QAAT,EAAkB;AAC5BjD,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAkB8N,YAAlB,EAA+B;AACzD9jB,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACZ,IAArB,EAA2BnS,QAA3B,EAAqC,IAArC,EAA2C6gB,YAA3C;AACA,OAFD,EAEE,IAFF;AAGA,KAhHgB;AAiHjBU,IAAAA,cAAc,EAAG,wBAASxU,CAAT,EAAW;AAC3B,UAAIoV,SAAS,GAAG,EAAhB;AAAA,UACCC,aAAa,GAAGrlB,OAAO,CAAC4P,mBAAR,CAA4BI,CAA5B,CADjB;AAAA,UAECsV,eAAe,GAAG,SAAlBA,eAAkB,CAAStP,OAAT,EAAiB;AAClCoP,QAAAA,SAAS,CAACngB,IAAV,CAAe+Q,OAAO,CAACZ,IAAR,CAAa2O,QAAb,CAAf;AACA,OAJF;AAAA,UAKCA,QALD;;AAOA,WAAK,IAAID,YAAY,GAAG,CAAxB,EAA2BA,YAAY,GAAG,KAAK9O,QAAL,CAAcvR,MAAxD,EAAgEqgB,YAAY,EAA5E,EAAgF;AAC/E,aAAKC,QAAQ,GAAG,CAAhB,EAAmBA,QAAQ,GAAG,KAAK/O,QAAL,CAAc8O,YAAd,EAA4B1O,IAA5B,CAAiC3R,MAA/D,EAAuEsgB,QAAQ,EAA/E,EAAmF;AAClF,cAAI,KAAK/O,QAAL,CAAc8O,YAAd,EAA4B1O,IAA5B,CAAiC2O,QAAjC,EAA2CjL,OAA3C,CAAmDuM,aAAa,CAACtd,CAAjE,EAAmEsd,aAAa,CAACpd,CAAjF,CAAJ,EAAwF;AACvFjI,YAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA4BsQ,eAA5B;AACA,mBAAOF,SAAP;AACA;AACD;AACD;;AAED,aAAOA,SAAP;AACA,KAnIgB;AAoIjBF,IAAAA,UAAU,EAAG,oBAAShO,MAAT,EAAgB;AAC5B,UAAIhU,IAAI,GAAG,IAAX;;AAEA,UAAIqiB,SAAS,GAAG,SAAZA,SAAY,GAAU;AACzB,YAAIC,MAAM,GAAG,EAAb;AACAtiB,QAAAA,IAAI,CAACuhB,QAAL,CAAc,UAASC,GAAT,EAAa;AAC1Bc,UAAAA,MAAM,CAACvgB,IAAP,CAAYyf,GAAG,CAACzgB,KAAhB;AACA,SAFD;AAGA,eAAOuhB,MAAP;AACA,OAND;;AAQA,UAAIC,YAAY,GAAG;AAClB1a,QAAAA,cAAc,EAAG,KAAK4I,OAAL,CAAa5S,UADZ;AAElBjB,QAAAA,MAAM,EAAG,KAAKX,KAAL,CAAWW,MAFF;AAGlBD,QAAAA,KAAK,EAAG,KAAKV,KAAL,CAAWU,KAHD;AAIlBR,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE,GAJC;AAKlBsX,QAAAA,SAAS,EAAG,KAAKhD,OAAL,CAAatS,cALP;AAMlBuV,QAAAA,QAAQ,EAAG,KAAKjD,OAAL,CAAaxS,aANN;AAOlBsR,QAAAA,SAAS,EAAG,KAAKkB,OAAL,CAAavS,cAPP;AAQlBsR,QAAAA,UAAU,EAAG,KAAKiB,OAAL,CAAazS,eARR;AASlBub,QAAAA,WAAW,EAAGvF,MAAM,CAACzT,MATH;AAUlBiiB,QAAAA,WAAW,EAAG,KAAK/R,OAAL,CAAa1S,gBAVT;AAWlB8I,QAAAA,YAAY,EAAG,KAAK4J,OAAL,CAAa3S,iBAXV;AAYlBic,QAAAA,eAAe,EAAE,yBAAS0I,aAAT,EAAuB;AACvC,cAAIC,aAAa,GAAG5lB,OAAO,CAAC0J,mBAAR,CACnB6b,SAAS,EADU,EAEnBI,aAFmB,EAGnB,KAAK/O,QAHc,EAInB,KAAK8O,WAJc,EAKnB,KAAK3b,YALc,CAApB;AAOA/J,UAAAA,OAAO,CAACoE,MAAR,CAAe,IAAf,EAAqBwhB,aAArB;AACA,SArBiB;AAsBlBpJ,QAAAA,OAAO,EAAGtF,MAtBQ;AAuBlBtE,QAAAA,IAAI,EAAG5S,OAAO,CAACuS,UAAR,CAAmB,KAAKoB,OAAL,CAAaxS,aAAhC,EAA+C,KAAKwS,OAAL,CAAavS,cAA5D,EAA4E,KAAKuS,OAAL,CAAazS,eAAzF,CAvBW;AAwBlBmY,QAAAA,SAAS,EAAG,KAAK1F,OAAL,CAAa9S,cAxBP;AAyBlBoe,QAAAA,SAAS,EAAG,KAAKtL,OAAL,CAAa/S,cAzBP;AA0BlBke,QAAAA,mBAAmB,EAAG,KAAKnL,OAAL,CAAa0P,wBA1BjB;AA2BlBhE,QAAAA,iBAAiB,EAAG,KAAK1L,OAAL,CAAa2P,sBA3Bf;AA4BlBvE,QAAAA,aAAa,EAAI,KAAKpL,OAAL,CAAauP,kBAAd,GAAoC,KAAKvP,OAAL,CAAayP,kBAAjD,GAAsE,CA5BpE;AA6BlBpE,QAAAA,aAAa,EAAI,KAAKrL,OAAL,CAAauP,kBAAd,GAAoC,KAAKvP,OAAL,CAAawP,kBAAjD,GAAsE,eA7BpE;AA8BlBrG,QAAAA,OAAO,EAAI,KAAKnJ,OAAL,CAAapT,SAAd,GAA2B,CAA3B,GAAgC,KAAKoT,OAAL,CAAa4P,aAAd,GAA+B,KAAK5P,OAAL,CAAa6P,cAA5C,GAA6D,CA9BpF;AA+BlBlH,QAAAA,UAAU,EAAG,KAAK3I,OAAL,CAAa7S,eA/BR;AAgClB+X,QAAAA,OAAO,EAAG,KAAKlF,OAAL,CAAapT;AAhCL,OAAnB;;AAmCA,UAAI,KAAKoT,OAAL,CAAanT,aAAjB,EAA+B;AAC9BR,QAAAA,OAAO,CAACoE,MAAR,CAAeqhB,YAAf,EAA6B;AAC5BxI,UAAAA,eAAe,EAAEjd,OAAO,CAAC6F,IADG;AAE5BgF,UAAAA,KAAK,EAAE,KAAK8I,OAAL,CAAalT,UAFQ;AAG5BiK,UAAAA,SAAS,EAAE,KAAKiJ,OAAL,CAAajT,cAHI;AAI5BoG,UAAAA,GAAG,EAAE,KAAK6M,OAAL,CAAahT,eAJU;AAK5BgG,UAAAA,GAAG,EAAE,KAAKgN,OAAL,CAAahT,eAAb,GAAgC,KAAKgT,OAAL,CAAalT,UAAb,GAA0B,KAAKkT,OAAL,CAAajT;AALhD,SAA7B;AAOA;;AAED,WAAK0R,KAAL,GAAa,IAAI,KAAKuR,UAAT,CAAoB8B,YAApB,CAAb;AACA,KA7LgB;AA8LjBI,IAAAA,OAAO,EAAG,iBAASlc,WAAT,EAAqB2N,KAArB,EAA2B;AACpC;AACAtX,MAAAA,OAAO,CAAC+C,IAAR,CAAa4G,WAAb,EAAyB,UAAS1F,KAAT,EAAe6f,YAAf,EAA4B;AACpD;AACA,aAAK9O,QAAL,CAAc8O,YAAd,EAA4B1O,IAA5B,CAAiCnQ,IAAjC,CAAsC,IAAI,KAAK6f,QAAT,CAAkB;AACvD7gB,UAAAA,KAAK,EAAGA,KAD+C;AAEvDqT,UAAAA,KAAK,EAAGA,KAF+C;AAGvDvP,UAAAA,CAAC,EAAE,KAAKqK,KAAL,CAAWwR,aAAX,CAAyB,KAAK5O,QAAL,CAAcvR,MAAvC,EAA+CqgB,YAA/C,EAA6D,KAAK1R,KAAL,CAAWqK,WAAX,GAAuB,CAApF,CAHoD;AAIvDxU,UAAAA,CAAC,EAAE,KAAKmK,KAAL,CAAWyK,QAJyC;AAKvDhd,UAAAA,KAAK,EAAG,KAAKuS,KAAL,CAAWgS,iBAAX,CAA6B,KAAKpP,QAAL,CAAcvR,MAA3C,CAL+C;AAMvDY,UAAAA,IAAI,EAAG,KAAK+N,KAAL,CAAWyK,QANqC;AAOvDvG,UAAAA,WAAW,EAAG,KAAKtB,QAAL,CAAc8O,YAAd,EAA4BxN,WAPa;AAQvDF,UAAAA,SAAS,EAAG,KAAKpB,QAAL,CAAc8O,YAAd,EAA4B1N;AARe,SAAlB,CAAtC;AAUA,OAZD,EAYE,IAZF;AAcA,WAAKhE,KAAL,CAAWmK,SAAX,CAAqBjF,KAArB,EAhBoC,CAiBpC;;AACA,WAAKkB,MAAL;AACA,KAjNgB;AAkNjBsN,IAAAA,UAAU,EAAG,sBAAU;AACtB,WAAK1T,KAAL,CAAWsK,YAAX,GADsB,CAEtB;;AACA1c,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAC3CA,QAAAA,OAAO,CAACZ,IAAR,CAAauH,KAAb;AACA,OAFD,EAEE,IAFF;AAGA,WAAKnE,MAAL;AACA,KAzNgB;AA0NjBvE,IAAAA,MAAM,EAAG,kBAAU;AAClBjU,MAAAA,OAAO,CAACoE,MAAR,CAAe,KAAK0gB,QAAL,CAAczhB,SAA7B,EAAuC;AACtC4E,QAAAA,CAAC,EAAE,KAAKmK,KAAL,CAAWyK,QADwB;AAEtCxY,QAAAA,IAAI,EAAG,KAAK+N,KAAL,CAAWyK;AAFoB,OAAvC;AAIA,UAAIkJ,aAAa,GAAG/lB,OAAO,CAACoE,MAAR,CAAe;AAClCtE,QAAAA,MAAM,EAAG,KAAKX,KAAL,CAAWW,MADc;AAElCD,QAAAA,KAAK,EAAG,KAAKV,KAAL,CAAWU;AAFe,OAAf,CAApB;AAIA,WAAKuS,KAAL,CAAWoG,MAAX,CAAkBuN,aAAlB;AACA,KApOgB;AAqOjB5R,IAAAA,IAAI,EAAG,cAASwE,IAAT,EAAc;AACpB,UAAIwB,aAAa,GAAGxB,IAAI,IAAI,CAA5B;AACA,WAAKtG,KAAL;AAEA,UAAIhT,GAAG,GAAG,KAAKF,KAAL,CAAWE,GAArB;AAEA,WAAK+S,KAAL,CAAW+B,IAAX,CAAgBgG,aAAhB,EANoB,CAQpB;;AACAna,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB8N,YAAjB,EAA8B;AACxD9jB,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACZ,IAArB,EAA0B,UAASsP,GAAT,EAAa9Y,KAAb,EAAmB;AAC5C,cAAI8Y,GAAG,CAACzO,QAAJ,EAAJ,EAAmB;AAClByO,YAAAA,GAAG,CAACrgB,IAAJ,GAAW,KAAK+N,KAAL,CAAWyK,QAAtB,CADkB,CAElB;;AACA6H,YAAAA,GAAG,CAAChM,UAAJ,CAAe;AACd3Q,cAAAA,CAAC,EAAG,KAAKqK,KAAL,CAAWwR,aAAX,CAAyB,KAAK5O,QAAL,CAAcvR,MAAvC,EAA+CqgB,YAA/C,EAA6DlY,KAA7D,CADU;AAEd3D,cAAAA,CAAC,EAAG,KAAKmK,KAAL,CAAW6L,UAAX,CAAsByG,GAAG,CAACzgB,KAA1B,CAFU;AAGdpE,cAAAA,KAAK,EAAG,KAAKuS,KAAL,CAAWgS,iBAAX,CAA6B,KAAKpP,QAAL,CAAcvR,MAA3C;AAHM,aAAf,EAIG0W,aAJH,EAIkBhG,IAJlB;AAKA;AACD,SAVD,EAUE,IAVF;AAYA,OAbD,EAaE,IAbF;AAcA;AA5PgB,GAAlB;AAgQA,CA7SD,EA6SG5Q,IA7SH,CA6SQ,IA7SR;AA+SA,CAAC,YAAU;AACV;;AAEA,MAAIxE,IAAI,GAAG,IAAX;AAAA,MACCE,KAAK,GAAGF,IAAI,CAACE,KADd;AAAA,MAEC;AACAe,EAAAA,OAAO,GAAGf,KAAK,CAACe,OAHjB;AAKA,MAAIijB,aAAa,GAAG;AACnB;AACA+C,IAAAA,iBAAiB,EAAG,IAFD;AAInB;AACAC,IAAAA,kBAAkB,EAAG,MALF;AAOnB;AACAC,IAAAA,kBAAkB,EAAG,CARF;AAUnB;AACAC,IAAAA,qBAAqB,EAAG,EAXL;AAanB;AACA9lB,IAAAA,cAAc,EAAG,GAdE;AAgBnB;AACAC,IAAAA,eAAe,EAAG,eAjBC;AAmBnB;AACA8lB,IAAAA,aAAa,EAAG,IApBG;AAsBnB;AACAC,IAAAA,YAAY,EAAG,KAvBI;AAyBnB;AACAhS,IAAAA,cAAc,EAAG;AA1BE,GAApB;AA+BApV,EAAAA,KAAK,CAACyU,IAAN,CAAWtP,MAAX,CAAkB;AACjB;AACA4T,IAAAA,IAAI,EAAE,UAFW;AAGjB;AACA9X,IAAAA,QAAQ,EAAG+iB,aAJM;AAKjB;AACA;AACApP,IAAAA,UAAU,EAAG,oBAASzI,IAAT,EAAc;AAE1B;AACA,WAAKiK,QAAL,GAAgB,EAAhB;AACA,WAAK0E,WAAL,GAAmB,CAAC/Z,OAAO,CAAC8G,GAAR,CAAY,CAAC,KAAK3H,KAAL,CAAWU,KAAZ,EAAkB,KAAKV,KAAL,CAAWW,MAA7B,CAAZ,IAAoD,KAAK6T,OAAL,CAAauS,kBAAb,GAAgC,CAArF,IAAwF,CAA3G;AAEA,WAAKI,UAAL,GAAkBrnB,KAAK,CAACua,GAAN,CAAUpV,MAAV,CAAiB;AAClC/E,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE,GADiB;AAElC0I,QAAAA,CAAC,EAAG,KAAK5I,KAAL,CAAWU,KAAX,GAAiB,CAFa;AAGlCoI,QAAAA,CAAC,EAAG,KAAK9I,KAAL,CAAWW,MAAX,GAAkB;AAHY,OAAjB,CAAlB,CAN0B,CAY1B;;AACA,UAAI,KAAK6T,OAAL,CAAanS,YAAjB,EAA8B;AAC7BxB,QAAAA,OAAO,CAACqR,UAAR,CAAmB,IAAnB,EAAyB,KAAKsC,OAAL,CAAajS,aAAtC,EAAqD,UAASmO,GAAT,EAAa;AACjE,cAAI0W,cAAc,GAAI1W,GAAG,CAAC0U,IAAJ,KAAa,UAAd,GAA4B,KAAKiC,kBAAL,CAAwB3W,GAAxB,CAA5B,GAA2D,EAAhF;AAEA7P,UAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAiB;AAC3CA,YAAAA,OAAO,CAACnO,OAAR,CAAgB,CAAC,WAAD,CAAhB;AACA,WAFD;AAGAtY,UAAAA,OAAO,CAAC+C,IAAR,CAAawjB,cAAb,EAA4B,UAASG,aAAT,EAAuB;AAClDA,YAAAA,aAAa,CAACtQ,SAAd,GAA0BsQ,aAAa,CAACC,cAAxC;AACA,WAFD;AAGA,eAAKlS,WAAL,CAAiB8R,cAAjB;AACA,SAVD;AAWA;;AACD,WAAKK,cAAL,CAAoBxb,IAApB;AAEApL,MAAAA,OAAO,CAAC+C,IAAR,CAAaqI,IAAb,EAAkB,UAASyb,SAAT,EAAoBjb,KAApB,EAA0B;AAC3C,aAAKia,OAAL,CAAagB,SAAb,EAAwBjb,KAAxB,EAA+B,IAA/B;AACA,OAFD,EAEE,IAFF;AAIA,WAAKsI,MAAL;AACA,KAxCgB;AAyCjBsS,IAAAA,kBAAkB,EAAG,4BAASxW,CAAT,EAAW;AAC/B,UAAI8W,aAAa,GAAG,EAApB;AAEA,UAAIC,QAAQ,GAAG/mB,OAAO,CAAC4P,mBAAR,CAA4BI,CAA5B,CAAf;AAEAhQ,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAiB;AAC3C,YAAIA,OAAO,CAAC3N,OAAR,CAAgBiO,QAAQ,CAAChf,CAAzB,EAA2Bgf,QAAQ,CAAC9e,CAApC,CAAJ,EAA4C6e,aAAa,CAAC7hB,IAAd,CAAmBwhB,OAAnB;AAC5C,OAFD,EAEE,IAFF;AAGA,aAAOK,aAAP;AACA,KAlDgB;AAmDjBjB,IAAAA,OAAO,EAAG,iBAASY,OAAT,EAAkBO,OAAlB,EAA2BC,MAA3B,EAAkC;AAC3C,UAAIrb,KAAK,GAAGob,OAAO,IAAI,KAAK3R,QAAL,CAAc5R,MAArC;AACA,WAAK4R,QAAL,CAAc6R,MAAd,CAAqBtb,KAArB,EAA4B,CAA5B,EAA+B,IAAI,KAAK0a,UAAT,CAAoB;AAClDriB,QAAAA,KAAK,EAAGwiB,OAAO,CAACxiB,KADkC;AAElD8V,QAAAA,WAAW,EAAI,KAAKpG,OAAL,CAAa0S,YAAd,GAA8B,CAA9B,GAAkC,KAAKtM,WAFH;AAGlDD,QAAAA,WAAW,EAAI,KAAKnG,OAAL,CAAa0S,YAAd,GAA8B,CAA9B,GAAmC,KAAKtM,WAAL,GAAiB,GAAlB,GAAyB,KAAKpG,OAAL,CAAawS,qBAHpC;AAIlD/P,QAAAA,SAAS,EAAGqQ,OAAO,CAACU,KAJ8B;AAKlDR,QAAAA,cAAc,EAAGF,OAAO,CAACW,SAAR,IAAqBX,OAAO,CAACU,KALI;AAMlD9M,QAAAA,UAAU,EAAG,KAAK1G,OAAL,CAAaqS,iBANwB;AAOlD1M,QAAAA,WAAW,EAAG,KAAK3F,OAAL,CAAauS,kBAPuB;AAQlD5P,QAAAA,WAAW,EAAG,KAAK3C,OAAL,CAAasS,kBARuB;AASlDtM,QAAAA,UAAU,EAAG9S,IAAI,CAACa,EAAL,GAAU,GAT2B;AAUlD2f,QAAAA,aAAa,EAAI,KAAK1T,OAAL,CAAayS,aAAd,GAA+B,CAA/B,GAAmC,KAAKkB,sBAAL,CAA4Bb,OAAO,CAACxiB,KAApC,CAVD;AAWlDqT,QAAAA,KAAK,EAAGmP,OAAO,CAACnP;AAXkC,OAApB,CAA/B;;AAaA,UAAI,CAAC2P,MAAL,EAAY;AACX,aAAKhT,MAAL;AACA,aAAKuE,MAAL;AACA;AACD,KAtEgB;AAuEjB8O,IAAAA,sBAAsB,EAAG,gCAASrjB,KAAT,EAAe;AACvC,aAAQ4C,IAAI,CAACa,EAAL,GAAQ,CAAT,IAAab,IAAI,CAACuD,GAAL,CAASnG,KAAT,IAAkB,KAAKsjB,KAApC,CAAP;AACA,KAzEgB;AA0EjBX,IAAAA,cAAc,EAAG,wBAASxb,IAAT,EAAc;AAC9B,WAAKmc,KAAL,GAAa,CAAb;AACAvnB,MAAAA,OAAO,CAAC+C,IAAR,CAAaqI,IAAb,EAAkB,UAASqb,OAAT,EAAiB;AAClC,aAAKc,KAAL,IAAc1gB,IAAI,CAACuD,GAAL,CAASqc,OAAO,CAACxiB,KAAjB,CAAd;AACA,OAFD,EAEE,IAFF;AAGA,KA/EgB;AAgFjBuU,IAAAA,MAAM,EAAG,kBAAU;AAClB,WAAKoO,cAAL,CAAoB,KAAKvR,QAAzB,EADkB,CAGlB;;AACArV,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAK6R,cAAlB,EAAkC,UAASuQ,aAAT,EAAuB;AACxDA,QAAAA,aAAa,CAAC7M,OAAd,CAAsB,CAAC,WAAD,CAAtB;AACA,OAFD;AAIAtY,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAiB;AAC3CA,QAAAA,OAAO,CAACpO,IAAR;AACA,OAFD;AAGA,WAAKnE,MAAL;AACA,KA5FgB;AA8FjB4R,IAAAA,UAAU,EAAE,oBAASkB,OAAT,EAAiB;AAC5B,UAAIQ,aAAa,GAAIxnB,OAAO,CAACsG,QAAR,CAAiB0gB,OAAjB,CAAD,GAA8BA,OAA9B,GAAwC,KAAK3R,QAAL,CAAc5R,MAAd,GAAqB,CAAjF;AACA,WAAK4R,QAAL,CAAc6R,MAAd,CAAqBM,aAArB,EAAoC,CAApC;AACA,WAAKvT,MAAL;AACA,WAAKuE,MAAL;AACA,KAnGgB;AAqGjBvE,IAAAA,MAAM,EAAG,kBAAU;AAClBjU,MAAAA,OAAO,CAACoE,MAAR,CAAe,KAAKkiB,UAAL,CAAgBjjB,SAA/B,EAAyC;AACxC0E,QAAAA,CAAC,EAAG,KAAK5I,KAAL,CAAWU,KAAX,GAAiB,CADmB;AAExCoI,QAAAA,CAAC,EAAG,KAAK9I,KAAL,CAAWW,MAAX,GAAkB;AAFkB,OAAzC;AAIA,WAAKia,WAAL,GAAmB,CAAC/Z,OAAO,CAAC8G,GAAR,CAAY,CAAC,KAAK3H,KAAL,CAAWU,KAAZ,EAAkB,KAAKV,KAAL,CAAWW,MAA7B,CAAZ,IAAoD,KAAK6T,OAAL,CAAauS,kBAAb,GAAgC,CAArF,IAAwF,CAA3G;AACAlmB,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA4B,UAASoR,OAAT,EAAiB;AAC5CA,QAAAA,OAAO,CAACjO,MAAR,CAAe;AACduB,UAAAA,WAAW,EAAG,KAAKA,WADL;AAEdD,UAAAA,WAAW,EAAI,KAAKC,WAAL,GAAiB,GAAlB,GAAyB,KAAKpG,OAAL,CAAawS;AAFtC,SAAf;AAIA,OALD,EAKG,IALH;AAMA,KAjHgB;AAkHjBhS,IAAAA,IAAI,EAAG,cAASxE,WAAT,EAAqB;AAC3B,UAAI8X,WAAW,GAAI9X,WAAD,GAAgBA,WAAhB,GAA8B,CAAhD;AACA,WAAK0C,KAAL;AACArS,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAiB7a,KAAjB,EAAuB;AACjD6a,QAAAA,OAAO,CAAC/N,UAAR,CAAmB;AAClB2O,UAAAA,aAAa,EAAG,KAAKC,sBAAL,CAA4Bb,OAAO,CAACxiB,KAApC,CADE;AAElB8V,UAAAA,WAAW,EAAG,KAAKA,WAFD;AAGlBD,UAAAA,WAAW,EAAI,KAAKC,WAAL,GAAiB,GAAlB,GAAyB,KAAKpG,OAAL,CAAawS;AAHlC,SAAnB,EAIEsB,WAJF;AAMAhB,QAAAA,OAAO,CAAC7M,QAAR,GAAmB6M,OAAO,CAAC9M,UAAR,GAAqB8M,OAAO,CAACY,aAAhD;AAEAZ,QAAAA,OAAO,CAACtS,IAAR;;AACA,YAAIvI,KAAK,KAAK,CAAd,EAAgB;AACf6a,UAAAA,OAAO,CAAC9M,UAAR,GAAqB9S,IAAI,CAACa,EAAL,GAAU,GAA/B;AACA,SAZgD,CAajD;;;AACA,YAAIkE,KAAK,GAAG,KAAKyJ,QAAL,CAAc5R,MAAd,GAAqB,CAAjC,EAAmC;AAClC,eAAK4R,QAAL,CAAczJ,KAAK,GAAC,CAApB,EAAuB+N,UAAvB,GAAoC8M,OAAO,CAAC7M,QAA5C;AACA;AACD,OAjBD,EAiBE,IAjBF;AAmBA;AAxIgB,GAAlB;AA2IA3a,EAAAA,KAAK,CAAC6D,KAAN,CAAY4kB,QAAZ,CAAqBtjB,MAArB,CAA4B;AAC3B4T,IAAAA,IAAI,EAAG,KADoB;AAE3B9X,IAAAA,QAAQ,EAAGF,OAAO,CAACuE,KAAR,CAAc0e,aAAd,EAA4B;AAACkD,MAAAA,qBAAqB,EAAG;AAAzB,KAA5B;AAFgB,GAA5B;AAKA,CAvLD,EAuLG5iB,IAvLH,CAuLQ,IAvLR;AAwLA,CAAC,YAAU;AACV;;AAEA,MAAIxE,IAAI,GAAG,IAAX;AAAA,MACCE,KAAK,GAAGF,IAAI,CAACE,KADd;AAAA,MAECe,OAAO,GAAGf,KAAK,CAACe,OAFjB;AAIA,MAAIijB,aAAa,GAAG;AAEnB;AACAC,IAAAA,kBAAkB,EAAG,IAHF;AAKnB;AACAC,IAAAA,kBAAkB,EAAG,iBANF;AAQnB;AACAC,IAAAA,kBAAkB,EAAG,CATF;AAWnB;AACAC,IAAAA,wBAAwB,EAAE,IAZP;AAcnB;AACAC,IAAAA,sBAAsB,EAAE,IAfL;AAiBnB;AACAqE,IAAAA,WAAW,EAAG,IAlBK;AAoBnB;AACAC,IAAAA,kBAAkB,EAAG,GArBF;AAuBnB;AACAC,IAAAA,QAAQ,EAAG,IAxBQ;AA0BnB;AACAC,IAAAA,cAAc,EAAG,CA3BE;AA6BnB;AACAC,IAAAA,mBAAmB,EAAG,CA9BH;AAgCnB;AACAC,IAAAA,uBAAuB,EAAG,EAjCP;AAmCnB;AACAC,IAAAA,aAAa,EAAG,IApCG;AAsCnB;AACAC,IAAAA,kBAAkB,EAAG,CAvCF;AAyCnB;AACAC,IAAAA,WAAW,EAAG,IA1CK;AA4CnB;AACA9T,IAAAA,cAAc,EAAG;AA7CE,GAApB;AAkDApV,EAAAA,KAAK,CAACyU,IAAN,CAAWtP,MAAX,CAAkB;AACjB4T,IAAAA,IAAI,EAAE,MADW;AAEjB9X,IAAAA,QAAQ,EAAG+iB,aAFM;AAGjBpP,IAAAA,UAAU,EAAG,oBAASzI,IAAT,EAAc;AAC1B;AACA,WAAKgd,UAAL,GAAkBnpB,KAAK,CAAC2Z,KAAN,CAAYxU,MAAZ,CAAmB;AACpCkV,QAAAA,WAAW,EAAG,KAAK3F,OAAL,CAAaoU,mBADS;AAEpC5U,QAAAA,MAAM,EAAG,KAAKQ,OAAL,CAAamU,cAFc;AAGpCjP,QAAAA,OAAO,EAAE,KAAKlF,OAAL,CAAakU,QAHc;AAIpC3O,QAAAA,kBAAkB,EAAG,KAAKvF,OAAL,CAAaqU,uBAJE;AAKpC3oB,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE,GALmB;AAMpCyZ,QAAAA,OAAO,EAAG,iBAAShJ,MAAT,EAAgB;AACzB,iBAAQjJ,IAAI,CAACkC,GAAL,CAAS+G,MAAM,GAAC,KAAK/H,CAArB,EAAwB,CAAxB,IAA6BlB,IAAI,CAACkC,GAAL,CAAS,KAAKoK,MAAL,GAAc,KAAK+F,kBAA5B,EAA+C,CAA/C,CAArC;AACA;AARmC,OAAnB,CAAlB;AAWA,WAAKlE,QAAL,GAAgB,EAAhB,CAb0B,CAe1B;;AACA,UAAI,KAAKrB,OAAL,CAAanS,YAAjB,EAA8B;AAC7BxB,QAAAA,OAAO,CAACqR,UAAR,CAAmB,IAAnB,EAAyB,KAAKsC,OAAL,CAAajS,aAAtC,EAAqD,UAASmO,GAAT,EAAa;AACjE,cAAIwY,YAAY,GAAIxY,GAAG,CAAC0U,IAAJ,KAAa,UAAd,GAA4B,KAAK+D,gBAAL,CAAsBzY,GAAtB,CAA5B,GAAyD,EAA5E;AACA,eAAK0Y,UAAL,CAAgB,UAASC,KAAT,EAAe;AAC9BA,YAAAA,KAAK,CAAClQ,OAAN,CAAc,CAAC,WAAD,EAAc,aAAd,CAAd;AACA,WAFD;AAGAtY,UAAAA,OAAO,CAAC+C,IAAR,CAAaslB,YAAb,EAA2B,UAASI,WAAT,EAAqB;AAC/CA,YAAAA,WAAW,CAACrS,SAAZ,GAAwBqS,WAAW,CAAC7D,aAApC;AACA6D,YAAAA,WAAW,CAACnS,WAAZ,GAA0BmS,WAAW,CAAC5D,eAAtC;AACA,WAHD;AAIA,eAAKpQ,WAAL,CAAiB4T,YAAjB;AACA,SAVD;AAWA,OA5ByB,CA8B1B;;;AACAroB,MAAAA,OAAO,CAAC+C,IAAR,CAAaqI,IAAI,CAAC4J,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAE3C,YAAI+O,aAAa,GAAG;AACnBzN,UAAAA,KAAK,EAAGtB,OAAO,CAACsB,KAAR,IAAiB,IADN;AAEnBlB,UAAAA,SAAS,EAAGJ,OAAO,CAACI,SAFD;AAGnBE,UAAAA,WAAW,EAAGN,OAAO,CAACM,WAHH;AAInBoS,UAAAA,UAAU,EAAG1S,OAAO,CAAC0S,UAJF;AAKnBC,UAAAA,gBAAgB,EAAG3S,OAAO,CAAC2S,gBALR;AAMnBxT,UAAAA,MAAM,EAAG;AANU,SAApB;AASA,aAAKH,QAAL,CAAc/P,IAAd,CAAmB8f,aAAnB;AAGA/kB,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAAC5K,IAArB,EAA0B,UAAS4Z,SAAT,EAAmBpZ,KAAnB,EAAyB;AAClD;AACAmZ,UAAAA,aAAa,CAAC5P,MAAd,CAAqBlQ,IAArB,CAA0B,IAAI,KAAKmjB,UAAT,CAAoB;AAC7CnkB,YAAAA,KAAK,EAAG+gB,SADqC;AAE7C1N,YAAAA,KAAK,EAAGlM,IAAI,CAAC8L,MAAL,CAAYtL,KAAZ,CAFqC;AAG7CqZ,YAAAA,YAAY,EAAEjP,OAAO,CAACsB,KAHuB;AAI7ChB,YAAAA,WAAW,EAAGN,OAAO,CAAC2S,gBAJuB;AAK7CvS,YAAAA,SAAS,EAAGJ,OAAO,CAAC0S,UALyB;AAM7C9D,YAAAA,aAAa,EAAG5O,OAAO,CAAC4S,kBAAR,IAA8B5S,OAAO,CAAC0S,UANT;AAO7C7D,YAAAA,eAAe,EAAG7O,OAAO,CAAC6S,oBAAR,IAAgC7S,OAAO,CAAC2S;AAPb,WAApB,CAA1B;AASA,SAXD,EAWE,IAXF;AAaA,aAAKzD,UAAL,CAAgB9Z,IAAI,CAAC8L,MAArB;AAGA,aAAKqR,UAAL,CAAgB,UAASC,KAAT,EAAgB5c,KAAhB,EAAsB;AACrC5L,UAAAA,OAAO,CAACoE,MAAR,CAAeokB,KAAf,EAAsB;AACrBzgB,YAAAA,CAAC,EAAE,KAAKqK,KAAL,CAAW2L,UAAX,CAAsBnS,KAAtB,CADkB;AAErB3D,YAAAA,CAAC,EAAE,KAAKmK,KAAL,CAAWyK;AAFO,WAAtB;AAIA2L,UAAAA,KAAK,CAACnQ,IAAN;AACA,SAND,EAMG,IANH;AAQA,OAtCD,EAsCE,IAtCF;AAyCA,WAAKnE,MAAL;AACA,KA5EgB;AA6EjBsE,IAAAA,MAAM,EAAG,kBAAU;AAClB,WAAKpG,KAAL,CAAWoG,MAAX,GADkB,CAElB;;AACAxY,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAK6R,cAAlB,EAAkC,UAASuQ,aAAT,EAAuB;AACxDA,QAAAA,aAAa,CAAC7M,OAAd,CAAsB,CAAC,WAAD,EAAc,aAAd,CAAtB;AACA,OAFD;AAGA,WAAKiQ,UAAL,CAAgB,UAASC,KAAT,EAAe;AAC9BA,QAAAA,KAAK,CAACnQ,IAAN;AACA,OAFD;AAGA,WAAKnE,MAAL;AACA,KAvFgB;AAwFjBqU,IAAAA,UAAU,EAAG,oBAAStlB,QAAT,EAAkB;AAC9BjD,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAC3ChW,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA4BlS,QAA5B,EAAqC,IAArC;AACA,OAFD,EAEE,IAFF;AAGA,KA5FgB;AA6FjBqlB,IAAAA,gBAAgB,EAAG,0BAAStY,CAAT,EAAW;AAC7B,UAAI8Y,WAAW,GAAG,EAAlB;AAAA,UACCzD,aAAa,GAAGrlB,OAAO,CAAC4P,mBAAR,CAA4BI,CAA5B,CADjB;AAEAhQ,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAC3ChW,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA4B,UAASqT,KAAT,EAAe;AAC1C,cAAIA,KAAK,CAAC1P,OAAN,CAAcuM,aAAa,CAACtd,CAA5B,EAA8Bsd,aAAa,CAACpd,CAA5C,CAAJ,EAAoD6gB,WAAW,CAAC7jB,IAAZ,CAAiBujB,KAAjB;AACpD,SAFD;AAGA,OAJD,EAIE,IAJF;AAKA,aAAOM,WAAP;AACA,KAtGgB;AAuGjB5D,IAAAA,UAAU,EAAG,oBAAShO,MAAT,EAAgB;AAC5B,UAAIhU,IAAI,GAAG,IAAX;;AAEA,UAAIqiB,SAAS,GAAG,SAAZA,SAAY,GAAU;AACzB,YAAIC,MAAM,GAAG,EAAb;AACAtiB,QAAAA,IAAI,CAACqlB,UAAL,CAAgB,UAASC,KAAT,EAAe;AAC9BhD,UAAAA,MAAM,CAACvgB,IAAP,CAAYujB,KAAK,CAACvkB,KAAlB;AACA,SAFD;AAIA,eAAOuhB,MAAP;AACA,OAPD;;AASA,UAAIC,YAAY,GAAG;AAClB1a,QAAAA,cAAc,EAAG,KAAK4I,OAAL,CAAa5S,UADZ;AAElBjB,QAAAA,MAAM,EAAG,KAAKX,KAAL,CAAWW,MAFF;AAGlBD,QAAAA,KAAK,EAAG,KAAKV,KAAL,CAAWU,KAHD;AAIlBR,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE,GAJC;AAKlBsX,QAAAA,SAAS,EAAG,KAAKhD,OAAL,CAAatS,cALP;AAMlBuV,QAAAA,QAAQ,EAAG,KAAKjD,OAAL,CAAaxS,aANN;AAOlBsR,QAAAA,SAAS,EAAG,KAAKkB,OAAL,CAAavS,cAPP;AAQlBsR,QAAAA,UAAU,EAAG,KAAKiB,OAAL,CAAazS,eARR;AASlBub,QAAAA,WAAW,EAAGvF,MAAM,CAACzT,MATH;AAUlBiiB,QAAAA,WAAW,EAAG,KAAK/R,OAAL,CAAa1S,gBAVT;AAWlB8I,QAAAA,YAAY,EAAG,KAAK4J,OAAL,CAAa3S,iBAXV;AAYlBic,QAAAA,eAAe,EAAG,yBAAS0I,aAAT,EAAuB;AACxC,cAAIC,aAAa,GAAG5lB,OAAO,CAAC0J,mBAAR,CACnB6b,SAAS,EADU,EAEnBI,aAFmB,EAGnB,KAAK/O,QAHc,EAInB,KAAK8O,WAJc,EAKnB,KAAK3b,YALc,CAApB;AAOA/J,UAAAA,OAAO,CAACoE,MAAR,CAAe,IAAf,EAAqBwhB,aAArB;AACA,SArBiB;AAsBlBpJ,QAAAA,OAAO,EAAGtF,MAtBQ;AAuBlBtE,QAAAA,IAAI,EAAG5S,OAAO,CAACuS,UAAR,CAAmB,KAAKoB,OAAL,CAAaxS,aAAhC,EAA+C,KAAKwS,OAAL,CAAavS,cAA5D,EAA4E,KAAKuS,OAAL,CAAazS,eAAzF,CAvBW;AAwBlBmY,QAAAA,SAAS,EAAG,KAAK1F,OAAL,CAAa9S,cAxBP;AAyBlBoe,QAAAA,SAAS,EAAG,KAAKtL,OAAL,CAAa/S,cAzBP;AA0BlBke,QAAAA,mBAAmB,EAAG,KAAKnL,OAAL,CAAa0P,wBA1BjB;AA2BlBhE,QAAAA,iBAAiB,EAAG,KAAK1L,OAAL,CAAa2P,sBA3Bf;AA4BlBvE,QAAAA,aAAa,EAAI,KAAKpL,OAAL,CAAauP,kBAAd,GAAoC,KAAKvP,OAAL,CAAayP,kBAAjD,GAAsE,CA5BpE;AA6BlBpE,QAAAA,aAAa,EAAI,KAAKrL,OAAL,CAAauP,kBAAd,GAAoC,KAAKvP,OAAL,CAAawP,kBAAjD,GAAsE,eA7BpE;AA8BlBrG,QAAAA,OAAO,EAAG,KAAKnJ,OAAL,CAAapT,SAAd,GAA2B,CAA3B,GAA+B,KAAKoT,OAAL,CAAamU,cAAb,GAA8B,KAAKnU,OAAL,CAAaoU,mBA9BjE;AA+BlBzL,QAAAA,UAAU,EAAG,KAAK3I,OAAL,CAAa7S,eA/BR;AAgClB+X,QAAAA,OAAO,EAAG,KAAKlF,OAAL,CAAapT;AAhCL,OAAnB;;AAmCA,UAAI,KAAKoT,OAAL,CAAanT,aAAjB,EAA+B;AAC9BR,QAAAA,OAAO,CAACoE,MAAR,CAAeqhB,YAAf,EAA6B;AAC5BxI,UAAAA,eAAe,EAAEjd,OAAO,CAAC6F,IADG;AAE5BgF,UAAAA,KAAK,EAAE,KAAK8I,OAAL,CAAalT,UAFQ;AAG5BiK,UAAAA,SAAS,EAAE,KAAKiJ,OAAL,CAAajT,cAHI;AAI5BoG,UAAAA,GAAG,EAAE,KAAK6M,OAAL,CAAahT,eAJU;AAK5BgG,UAAAA,GAAG,EAAE,KAAKgN,OAAL,CAAahT,eAAb,GAAgC,KAAKgT,OAAL,CAAalT,UAAb,GAA0B,KAAKkT,OAAL,CAAajT;AALhD,SAA7B;AAOA;;AAGD,WAAK0R,KAAL,GAAa,IAAInT,KAAK,CAAC8c,KAAV,CAAgB0J,YAAhB,CAAb;AACA,KAlKgB;AAmKjBI,IAAAA,OAAO,EAAG,iBAASlc,WAAT,EAAqB2N,KAArB,EAA2B;AACpC;AAEAtX,MAAAA,OAAO,CAAC+C,IAAR,CAAa4G,WAAb,EAAyB,UAAS1F,KAAT,EAAe6f,YAAf,EAA4B;AACpD;AACA,aAAK9O,QAAL,CAAc8O,YAAd,EAA4B3O,MAA5B,CAAmClQ,IAAnC,CAAwC,IAAI,KAAKmjB,UAAT,CAAoB;AAC3DnkB,UAAAA,KAAK,EAAGA,KADmD;AAE3DqT,UAAAA,KAAK,EAAGA,KAFmD;AAG3DvP,UAAAA,CAAC,EAAE,KAAKqK,KAAL,CAAW2L,UAAX,CAAsB,KAAK3L,KAAL,CAAWqK,WAAX,GAAuB,CAA7C,CAHwD;AAI3DxU,UAAAA,CAAC,EAAE,KAAKmK,KAAL,CAAWyK,QAJ6C;AAK3DvG,UAAAA,WAAW,EAAG,KAAKtB,QAAL,CAAc8O,YAAd,EAA4B6E,gBALiB;AAM3DvS,UAAAA,SAAS,EAAG,KAAKpB,QAAL,CAAc8O,YAAd,EAA4B4E;AANmB,SAApB,CAAxC;AAQA,OAVD,EAUE,IAVF;AAYA,WAAKtW,KAAL,CAAWmK,SAAX,CAAqBjF,KAArB,EAfoC,CAgBpC;;AACA,WAAKkB,MAAL;AACA,KArLgB;AAsLjBsN,IAAAA,UAAU,EAAG,sBAAU;AACtB,WAAK1T,KAAL,CAAWsK,YAAX,GADsB,CAEtB;;AACA1c,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAC3CA,QAAAA,OAAO,CAACb,MAAR,CAAewH,KAAf;AACA,OAFD,EAEE,IAFF;AAGA,WAAKnE,MAAL;AACA,KA7LgB;AA8LjBvE,IAAAA,MAAM,EAAG,kBAAU;AAClB,UAAI8R,aAAa,GAAG/lB,OAAO,CAACoE,MAAR,CAAe;AAClCtE,QAAAA,MAAM,EAAG,KAAKX,KAAL,CAAWW,MADc;AAElCD,QAAAA,KAAK,EAAG,KAAKV,KAAL,CAAWU;AAFe,OAAf,CAApB;AAIA,WAAKuS,KAAL,CAAWoG,MAAX,CAAkBuN,aAAlB;AACA,KApMgB;AAqMjB5R,IAAAA,IAAI,EAAG,cAASwE,IAAT,EAAc;AACpB,UAAIwB,aAAa,GAAGxB,IAAI,IAAI,CAA5B;AACA,WAAKtG,KAAL;AAEA,UAAIhT,GAAG,GAAG,KAAKF,KAAL,CAAWE,GAArB,CAJoB,CAMpB;;AACA,UAAI4W,QAAQ,GAAG,SAAXA,QAAW,CAASpS,IAAT,EAAc;AAC5B,eAAOA,IAAI,CAACI,KAAL,KAAe,IAAtB;AACA,OAFD;AAAA,UAGA8kB,SAAS,GAAG,SAAZA,SAAY,CAASP,KAAT,EAAgB1jB,UAAhB,EAA4B8G,KAA5B,EAAkC;AAC7C,eAAO5L,OAAO,CAACkF,aAAR,CAAsBJ,UAAtB,EAAkCmR,QAAlC,EAA4CrK,KAA5C,KAAsD4c,KAA7D;AACA,OALD;AAAA,UAMAQ,aAAa,GAAG,SAAhBA,aAAgB,CAASR,KAAT,EAAgB1jB,UAAhB,EAA4B8G,KAA5B,EAAkC;AACjD,eAAO5L,OAAO,CAACqF,iBAAR,CAA0BP,UAA1B,EAAsCmR,QAAtC,EAAgDrK,KAAhD,KAA0D4c,KAAjE;AACA,OARD;;AAUA,WAAKpW,KAAL,CAAW+B,IAAX,CAAgBgG,aAAhB;AAGAna,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAC3C,YAAIiT,gBAAgB,GAAGjpB,OAAO,CAAC6E,KAAR,CAAcmR,OAAO,CAACb,MAAtB,EAA8Bc,QAA9B,CAAvB,CAD2C,CAG3C;AACA;;AAEAjW,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA6B,UAASqT,KAAT,EAAgB5c,KAAhB,EAAsB;AAClD,cAAI4c,KAAK,CAACvS,QAAN,EAAJ,EAAqB;AACpBuS,YAAAA,KAAK,CAAC9P,UAAN,CAAiB;AAChBzQ,cAAAA,CAAC,EAAG,KAAKmK,KAAL,CAAW6L,UAAX,CAAsBuK,KAAK,CAACvkB,KAA5B,CADY;AAEhB8D,cAAAA,CAAC,EAAG,KAAKqK,KAAL,CAAW2L,UAAX,CAAsBnS,KAAtB;AAFY,aAAjB,EAGGuO,aAHH;AAIA;AACD,SAPD,EAOE,IAPF,EAN2C,CAgB3C;AACA;;AACA,YAAI,KAAKxG,OAAL,CAAagU,WAAjB,EAA6B;AAC5B3nB,UAAAA,OAAO,CAAC+C,IAAR,CAAakmB,gBAAb,EAA+B,UAAST,KAAT,EAAgB5c,KAAhB,EAAsB;AACpD,gBAAIsd,OAAO,GAAItd,KAAK,GAAG,CAAR,IAAaA,KAAK,GAAGqd,gBAAgB,CAACxlB,MAAjB,GAA0B,CAAhD,GAAqD,KAAKkQ,OAAL,CAAaiU,kBAAlE,GAAuF,CAArG;AACAY,YAAAA,KAAK,CAACW,aAAN,GAAsBnpB,OAAO,CAACyI,WAAR,CACrBugB,aAAa,CAACR,KAAD,EAAQS,gBAAR,EAA0Brd,KAA1B,CADQ,EAErB4c,KAFqB,EAGrBO,SAAS,CAACP,KAAD,EAAQS,gBAAR,EAA0Brd,KAA1B,CAHY,EAIrBsd,OAJqB,CAAtB,CAFoD,CASpD;AAEA;;AACA,gBAAIV,KAAK,CAACW,aAAN,CAAoB/f,KAApB,CAA0BnB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWyK,QAA7C,EAAsD;AACrD2L,cAAAA,KAAK,CAACW,aAAN,CAAoB/f,KAApB,CAA0BnB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWyK,QAAzC;AACA,aAFD,MAGK,IAAI2L,KAAK,CAACW,aAAN,CAAoB/f,KAApB,CAA0BnB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWwK,UAA7C,EAAwD;AAC5D4L,cAAAA,KAAK,CAACW,aAAN,CAAoB/f,KAApB,CAA0BnB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWwK,UAAzC;AACA,aAjBmD,CAmBpD;;;AACA,gBAAI4L,KAAK,CAACW,aAAN,CAAoBhgB,KAApB,CAA0BlB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWyK,QAA7C,EAAsD;AACrD2L,cAAAA,KAAK,CAACW,aAAN,CAAoBhgB,KAApB,CAA0BlB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWyK,QAAzC;AACA,aAFD,MAGK,IAAI2L,KAAK,CAACW,aAAN,CAAoBhgB,KAApB,CAA0BlB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWwK,UAA7C,EAAwD;AAC5D4L,cAAAA,KAAK,CAACW,aAAN,CAAoBhgB,KAApB,CAA0BlB,CAA1B,GAA8B,KAAKmK,KAAL,CAAWwK,UAAzC;AACA;AACD,WA1BD,EA0BE,IA1BF;AA2BA,SA9C0C,CAiD3C;;;AACAvd,QAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAK1F,OAAL,CAAauU,kBAA7B;AACA7oB,QAAAA,GAAG,CAAC+Z,WAAJ,GAAkBpD,OAAO,CAACM,WAA1B;AACAjX,QAAAA,GAAG,CAAC+T,SAAJ;AAEApT,QAAAA,OAAO,CAAC+C,IAAR,CAAakmB,gBAAb,EAA+B,UAAST,KAAT,EAAgB5c,KAAhB,EAAsB;AACpD,cAAIA,KAAK,KAAK,CAAd,EAAgB;AACfvM,YAAAA,GAAG,CAACgU,MAAJ,CAAWmV,KAAK,CAACzgB,CAAjB,EAAoBygB,KAAK,CAACvgB,CAA1B;AACA,WAFD,MAGI;AACH,gBAAG,KAAK0L,OAAL,CAAagU,WAAhB,EAA4B;AAC3B,kBAAI3oB,QAAQ,GAAGgqB,aAAa,CAACR,KAAD,EAAQS,gBAAR,EAA0Brd,KAA1B,CAA5B;AAEAvM,cAAAA,GAAG,CAAC+pB,aAAJ,CACCpqB,QAAQ,CAACmqB,aAAT,CAAuB/f,KAAvB,CAA6BrB,CAD9B,EAEC/I,QAAQ,CAACmqB,aAAT,CAAuB/f,KAAvB,CAA6BnB,CAF9B,EAGCugB,KAAK,CAACW,aAAN,CAAoBhgB,KAApB,CAA0BpB,CAH3B,EAICygB,KAAK,CAACW,aAAN,CAAoBhgB,KAApB,CAA0BlB,CAJ3B,EAKCugB,KAAK,CAACzgB,CALP,EAMCygB,KAAK,CAACvgB,CANP;AAQA,aAXD,MAYI;AACH5I,cAAAA,GAAG,CAACiU,MAAJ,CAAWkV,KAAK,CAACzgB,CAAjB,EAAmBygB,KAAK,CAACvgB,CAAzB;AACA;AACD;AACD,SArBD,EAqBG,IArBH;AAuBA5I,QAAAA,GAAG,CAACgX,MAAJ;;AAEA,YAAI,KAAK1C,OAAL,CAAawU,WAAb,IAA4Bc,gBAAgB,CAACxlB,MAAjB,GAA0B,CAA1D,EAA4D;AAC3D;AACApE,UAAAA,GAAG,CAACiU,MAAJ,CAAW2V,gBAAgB,CAACA,gBAAgB,CAACxlB,MAAjB,GAA0B,CAA3B,CAAhB,CAA8CsE,CAAzD,EAA4D,KAAKqK,KAAL,CAAWyK,QAAvE;AACAxd,UAAAA,GAAG,CAACiU,MAAJ,CAAW2V,gBAAgB,CAAC,CAAD,CAAhB,CAAoBlhB,CAA/B,EAAkC,KAAKqK,KAAL,CAAWyK,QAA7C;AACAxd,UAAAA,GAAG,CAACka,SAAJ,GAAgBvD,OAAO,CAACI,SAAxB;AACA/W,UAAAA,GAAG,CAACmU,SAAJ;AACAnU,UAAAA,GAAG,CAAC6W,IAAJ;AACA,SAtF0C,CAwF3C;AACA;AACA;;;AACAlW,QAAAA,OAAO,CAAC+C,IAAR,CAAakmB,gBAAb,EAA8B,UAAST,KAAT,EAAe;AAC5CA,UAAAA,KAAK,CAACrU,IAAN;AACA,SAFD;AAGA,OA9FD,EA8FE,IA9FF;AA+FA;AAxTgB,GAAlB;AA4TA,CArXD,EAqXG5Q,IArXH,CAqXQ,IArXR;AAuXA,CAAC,YAAU;AACV;;AAEA,MAAIxE,IAAI,GAAG,IAAX;AAAA,MACCE,KAAK,GAAGF,IAAI,CAACE,KADd;AAAA,MAEC;AACAe,EAAAA,OAAO,GAAGf,KAAK,CAACe,OAHjB;AAKA,MAAIijB,aAAa,GAAG;AACnB;AACAoG,IAAAA,sBAAsB,EAAG,IAFN;AAInB;AACAC,IAAAA,kBAAkB,EAAG,wBALF;AAOnB;AACAroB,IAAAA,gBAAgB,EAAG,IARA;AAUnB;AACAsoB,IAAAA,qBAAqB,EAAG,CAXL;AAanB;AACAC,IAAAA,qBAAqB,EAAG,CAdL;AAgBnB;AACAC,IAAAA,aAAa,EAAG,IAjBG;AAmBnB;AACAzD,IAAAA,iBAAiB,EAAG,IApBD;AAsBnB;AACAC,IAAAA,kBAAkB,EAAG,MAvBF;AAyBnB;AACAC,IAAAA,kBAAkB,EAAG,CA1BF;AA4BnB;AACA7lB,IAAAA,cAAc,EAAG,GA7BE;AA+BnB;AACAC,IAAAA,eAAe,EAAG,eAhCC;AAkCnB;AACA8lB,IAAAA,aAAa,EAAG,IAnCG;AAqCnB;AACAC,IAAAA,YAAY,EAAG,KAtCI;AAwCnB;AACAhS,IAAAA,cAAc,EAAG;AAzCE,GAApB;AA6CApV,EAAAA,KAAK,CAACyU,IAAN,CAAWtP,MAAX,CAAkB;AACjB;AACA4T,IAAAA,IAAI,EAAE,WAFW;AAGjB;AACA9X,IAAAA,QAAQ,EAAG+iB,aAJM;AAKjB;AACA;AACApP,IAAAA,UAAU,EAAG,oBAASzI,IAAT,EAAc;AAC1B,WAAKiK,QAAL,GAAgB,EAAhB,CAD0B,CAE1B;;AACA,WAAKiR,UAAL,GAAkBrnB,KAAK,CAACua,GAAN,CAAUpV,MAAV,CAAiB;AAClCiW,QAAAA,UAAU,EAAG,KAAK1G,OAAL,CAAaqS,iBADQ;AAElC1M,QAAAA,WAAW,EAAG,KAAK3F,OAAL,CAAauS,kBAFO;AAGlC5P,QAAAA,WAAW,EAAG,KAAK3C,OAAL,CAAasS,kBAHO;AAIlC5mB,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE,GAJiB;AAKlCya,QAAAA,WAAW,EAAG,CALoB;AAMlC/R,QAAAA,CAAC,EAAG,KAAK5I,KAAL,CAAWU,KAAX,GAAiB,CANa;AAOlCoI,QAAAA,CAAC,EAAG,KAAK9I,KAAL,CAAWW,MAAX,GAAkB;AAPY,OAAjB,CAAlB;AASA,WAAKsS,KAAL,GAAa,IAAInT,KAAK,CAACugB,WAAV,CAAsB;AAClC3G,QAAAA,OAAO,EAAE,KAAKlF,OAAL,CAAapT,SADY;AAElCkS,QAAAA,SAAS,EAAE,KAAKkB,OAAL,CAAavS,cAFU;AAGlCwV,QAAAA,QAAQ,EAAE,KAAKjD,OAAL,CAAaxS,aAHW;AAIlCuR,QAAAA,UAAU,EAAE,KAAKiB,OAAL,CAAazS,eAJS;AAKlC+gB,QAAAA,SAAS,EAAE,KAAKtO,OAAL,CAAatS,cALU;AAMlCib,QAAAA,UAAU,EAAE,KAAK3I,OAAL,CAAa7S,eANS;AAOlCghB,QAAAA,iBAAiB,EAAE,KAAKnO,OAAL,CAAa0V,sBAPE;AAQlCtH,QAAAA,aAAa,EAAE,KAAKpO,OAAL,CAAa2V,kBARM;AASlC5J,QAAAA,gBAAgB,EAAG,KAAK/L,OAAL,CAAa4V,qBATE;AAUlCvH,QAAAA,gBAAgB,EAAE,KAAKrO,OAAL,CAAa6V,qBAVG;AAWlCnQ,QAAAA,SAAS,EAAG,KAAK1F,OAAL,CAAa8V,aAAd,GAA+B,KAAK9V,OAAL,CAAa9S,cAA5C,GAA6D,CAXtC;AAYlCoe,QAAAA,SAAS,EAAE,KAAKtL,OAAL,CAAa/S,cAZU;AAalCgf,QAAAA,OAAO,EAAE,IAbyB;AAclC/f,QAAAA,KAAK,EAAE,KAAKV,KAAL,CAAWU,KAdgB;AAelCC,QAAAA,MAAM,EAAE,KAAKX,KAAL,CAAWW,MAfe;AAgBlCyhB,QAAAA,OAAO,EAAE,KAAKpiB,KAAL,CAAWU,KAAX,GAAiB,CAhBQ;AAiBlC2hB,QAAAA,OAAO,EAAE,KAAKriB,KAAL,CAAWW,MAAX,GAAkB,CAjBO;AAkBlCT,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE,GAlBiB;AAmBlC0L,QAAAA,cAAc,EAAE,KAAK4I,OAAL,CAAa5S,UAnBK;AAoBlC0b,QAAAA,WAAW,EAAErR,IAAI,CAAC3H;AApBgB,OAAtB,CAAb;AAuBA,WAAKimB,gBAAL,CAAsBte,IAAtB;AAEA,WAAKgH,KAAL,CAAWoG,MAAX;AAEAxY,MAAAA,OAAO,CAAC+C,IAAR,CAAaqI,IAAb,EAAkB,UAASqb,OAAT,EAAiB7a,KAAjB,EAAuB;AACxC,aAAKia,OAAL,CAAaY,OAAb,EAAqB7a,KAArB,EAA2B,IAA3B;AACA,OAFD,EAEE,IAFF,EAvC0B,CA2C1B;;AACA,UAAI,KAAK+H,OAAL,CAAanS,YAAjB,EAA8B;AAC7BxB,QAAAA,OAAO,CAACqR,UAAR,CAAmB,IAAnB,EAAyB,KAAKsC,OAAL,CAAajS,aAAtC,EAAqD,UAASmO,GAAT,EAAa;AACjE,cAAI0W,cAAc,GAAI1W,GAAG,CAAC0U,IAAJ,KAAa,UAAd,GAA4B,KAAKiC,kBAAL,CAAwB3W,GAAxB,CAA5B,GAA2D,EAAhF;AACA7P,UAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAiB;AAC3CA,YAAAA,OAAO,CAACnO,OAAR,CAAgB,CAAC,WAAD,CAAhB;AACA,WAFD;AAGAtY,UAAAA,OAAO,CAAC+C,IAAR,CAAawjB,cAAb,EAA4B,UAASG,aAAT,EAAuB;AAClDA,YAAAA,aAAa,CAACtQ,SAAd,GAA0BsQ,aAAa,CAACC,cAAxC;AACA,WAFD;AAGA,eAAKlS,WAAL,CAAiB8R,cAAjB;AACA,SATD;AAUA;;AAED,WAAKrS,MAAL;AACA,KAjEgB;AAkEjBsS,IAAAA,kBAAkB,EAAG,4BAASxW,CAAT,EAAW;AAC/B,UAAI8W,aAAa,GAAG,EAApB;AAEA,UAAIC,QAAQ,GAAG/mB,OAAO,CAAC4P,mBAAR,CAA4BI,CAA5B,CAAf;AAEAhQ,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAiB;AAC3C,YAAIA,OAAO,CAAC3N,OAAR,CAAgBiO,QAAQ,CAAChf,CAAzB,EAA2Bgf,QAAQ,CAAC9e,CAApC,CAAJ,EAA4C6e,aAAa,CAAC7hB,IAAd,CAAmBwhB,OAAnB;AAC5C,OAFD,EAEE,IAFF;AAGA,aAAOK,aAAP;AACA,KA3EgB;AA4EjBjB,IAAAA,OAAO,EAAG,iBAASY,OAAT,EAAkBO,OAAlB,EAA2BC,MAA3B,EAAkC;AAC3C,UAAIrb,KAAK,GAAGob,OAAO,IAAI,KAAK3R,QAAL,CAAc5R,MAArC;AAEA,WAAK4R,QAAL,CAAc6R,MAAd,CAAqBtb,KAArB,EAA4B,CAA5B,EAA+B,IAAI,KAAK0a,UAAT,CAAoB;AAClDlQ,QAAAA,SAAS,EAAEqQ,OAAO,CAACU,KAD+B;AAElDR,QAAAA,cAAc,EAAEF,OAAO,CAACW,SAAR,IAAqBX,OAAO,CAACU,KAFK;AAGlD7P,QAAAA,KAAK,EAAEmP,OAAO,CAACnP,KAHmC;AAIlDrT,QAAAA,KAAK,EAAEwiB,OAAO,CAACxiB,KAJmC;AAKlD8V,QAAAA,WAAW,EAAG,KAAKpG,OAAL,CAAa0S,YAAd,GAA8B,CAA9B,GAAkC,KAAKjU,KAAL,CAAWuN,qBAAX,CAAiC8G,OAAO,CAACxiB,KAAzC,CALG;AAMlDojB,QAAAA,aAAa,EAAG,KAAK1T,OAAL,CAAayS,aAAd,GAA+B,CAA/B,GAAmC,KAAKhU,KAAL,CAAW0N,gBAAX,EANA;AAOlDnG,QAAAA,UAAU,EAAE9S,IAAI,CAACa,EAAL,GAAU;AAP4B,OAApB,CAA/B;;AASA,UAAI,CAACuf,MAAL,EAAY;AACX,aAAKhT,MAAL;AACA,aAAKuE,MAAL;AACA;AACD,KA5FgB;AA6FjBsN,IAAAA,UAAU,EAAE,oBAASkB,OAAT,EAAiB;AAC5B,UAAIQ,aAAa,GAAIxnB,OAAO,CAACsG,QAAR,CAAiB0gB,OAAjB,CAAD,GAA8BA,OAA9B,GAAwC,KAAK3R,QAAL,CAAc5R,MAAd,GAAqB,CAAjF;AACA,WAAK4R,QAAL,CAAc6R,MAAd,CAAqBM,aAArB,EAAoC,CAApC;AACA,WAAKvT,MAAL;AACA,WAAKuE,MAAL;AACA,KAlGgB;AAmGjBoO,IAAAA,cAAc,EAAE,wBAASxb,IAAT,EAAc;AAC7B,WAAKmc,KAAL,GAAa,CAAb;AACAvnB,MAAAA,OAAO,CAAC+C,IAAR,CAAaqI,IAAb,EAAkB,UAASqb,OAAT,EAAiB;AAClC,aAAKc,KAAL,IAAcd,OAAO,CAACxiB,KAAtB;AACA,OAFD,EAEE,IAFF;AAGA,WAAKmO,KAAL,CAAWqK,WAAX,GAAyB,KAAKpH,QAAL,CAAc5R,MAAvC;AACA,KAzGgB;AA0GjBimB,IAAAA,gBAAgB,EAAE,0BAASC,UAAT,EAAoB;AACrC,UAAIhgB,WAAW,GAAG,EAAlB;AACA3J,MAAAA,OAAO,CAAC+C,IAAR,CAAa4mB,UAAb,EAAwB,UAASlD,OAAT,EAAiB;AACxC9c,QAAAA,WAAW,CAAC1E,IAAZ,CAAiBwhB,OAAO,CAACxiB,KAAzB;AACA,OAFD;AAIA,UAAI2lB,UAAU,GAAI,KAAKjW,OAAL,CAAanT,aAAd,GAChB;AACCqK,QAAAA,KAAK,EAAE,KAAK8I,OAAL,CAAalT,UADrB;AAECiK,QAAAA,SAAS,EAAE,KAAKiJ,OAAL,CAAajT,cAFzB;AAGCoG,QAAAA,GAAG,EAAE,KAAK6M,OAAL,CAAahT,eAHnB;AAICgG,QAAAA,GAAG,EAAE,KAAKgN,OAAL,CAAahT,eAAb,GAAgC,KAAKgT,OAAL,CAAalT,UAAb,GAA0B,KAAKkT,OAAL,CAAajT;AAJ7E,OADgB,GAOhBV,OAAO,CAAC0J,mBAAR,CACCC,WADD,EAEC3J,OAAO,CAAC8G,GAAR,CAAY,CAAC,KAAK3H,KAAL,CAAWU,KAAZ,EAAmB,KAAKV,KAAL,CAAWW,MAA9B,CAAZ,IAAmD,CAFpD,EAGC,KAAK6T,OAAL,CAAaxS,aAHd,EAIC,KAAKwS,OAAL,CAAa1S,gBAJd,EAKC,KAAK0S,OAAL,CAAa3S,iBALd,CAPD;AAeAhB,MAAAA,OAAO,CAACoE,MAAR,CACC,KAAKgO,KADN,EAECwX,UAFD,EAGC;AACCnK,QAAAA,IAAI,EAAEzf,OAAO,CAAC8G,GAAR,CAAY,CAAC,KAAK3H,KAAL,CAAWU,KAAZ,EAAmB,KAAKV,KAAL,CAAWW,MAA9B,CAAZ,CADP;AAECyhB,QAAAA,OAAO,EAAE,KAAKpiB,KAAL,CAAWU,KAAX,GAAiB,CAF3B;AAGC2hB,QAAAA,OAAO,EAAE,KAAKriB,KAAL,CAAWW,MAAX,GAAkB;AAH5B,OAHD;AAUA,KAzIgB;AA0IjB0Y,IAAAA,MAAM,EAAG,kBAAU;AAClB,WAAKoO,cAAL,CAAoB,KAAKvR,QAAzB;AAEArV,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAiB;AAC3CA,QAAAA,OAAO,CAACpO,IAAR;AACA,OAFD;AAIA,WAAKpE,MAAL;AACA,WAAKC,MAAL;AACA,KAnJgB;AAoJjBD,IAAAA,MAAM,EAAG,kBAAU;AAClBjU,MAAAA,OAAO,CAACoE,MAAR,CAAe,KAAKkiB,UAAL,CAAgBjjB,SAA/B,EAAyC;AACxC0E,QAAAA,CAAC,EAAG,KAAK5I,KAAL,CAAWU,KAAX,GAAiB,CADmB;AAExCoI,QAAAA,CAAC,EAAG,KAAK9I,KAAL,CAAWW,MAAX,GAAkB;AAFkB,OAAzC;AAIA,WAAK4pB,gBAAL,CAAsB,KAAKrU,QAA3B;AACA,WAAKjD,KAAL,CAAWoG,MAAX;AAEAxY,MAAAA,OAAO,CAACoE,MAAR,CAAe,KAAKgO,KAApB,EAA0B;AACzBmP,QAAAA,OAAO,EAAE,KAAKpiB,KAAL,CAAWU,KAAX,GAAiB,CADD;AAEzB2hB,QAAAA,OAAO,EAAE,KAAKriB,KAAL,CAAWW,MAAX,GAAkB;AAFF,OAA1B;AAKAE,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA4B,UAASoR,OAAT,EAAiB;AAC5CA,QAAAA,OAAO,CAACjO,MAAR,CAAe;AACduB,UAAAA,WAAW,EAAG,KAAK3H,KAAL,CAAWuN,qBAAX,CAAiC8G,OAAO,CAACxiB,KAAzC;AADA,SAAf;AAGA,OAJD,EAIG,IAJH;AAMA,KAvKgB;AAwKjBkQ,IAAAA,IAAI,EAAG,cAASwE,IAAT,EAAc;AACpB,UAAIwB,aAAa,GAAGxB,IAAI,IAAI,CAA5B,CADoB,CAEpB;;AACA,WAAKtG,KAAL;AACArS,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKsS,QAAlB,EAA2B,UAASoR,OAAT,EAAkB7a,KAAlB,EAAwB;AAClD6a,QAAAA,OAAO,CAAC/N,UAAR,CAAmB;AAClB2O,UAAAA,aAAa,EAAG,KAAKjV,KAAL,CAAW0N,gBAAX,EADE;AAElB/F,UAAAA,WAAW,EAAG,KAAK3H,KAAL,CAAWuN,qBAAX,CAAiC8G,OAAO,CAACxiB,KAAzC;AAFI,SAAnB,EAGEkW,aAHF;AAKAsM,QAAAA,OAAO,CAAC7M,QAAR,GAAmB6M,OAAO,CAAC9M,UAAR,GAAqB8M,OAAO,CAACY,aAAhD,CANkD,CAQlD;AACA;;AACA,YAAIzb,KAAK,KAAK,CAAd,EAAgB;AACf6a,UAAAA,OAAO,CAAC9M,UAAR,GAAqB9S,IAAI,CAACa,EAAL,GAAU,GAA/B;AACA,SAZiD,CAclD;;;AACA,YAAIkE,KAAK,GAAG,KAAKyJ,QAAL,CAAc5R,MAAd,GAAuB,CAAnC,EAAqC;AACpC,eAAK4R,QAAL,CAAczJ,KAAK,GAAC,CAApB,EAAuB+N,UAAvB,GAAoC8M,OAAO,CAAC7M,QAA5C;AACA;;AACD6M,QAAAA,OAAO,CAACtS,IAAR;AACA,OAnBD,EAmBG,IAnBH;AAoBA,WAAK/B,KAAL,CAAW+B,IAAX;AACA;AAjMgB,GAAlB;AAoMA,CAzPD,EAyPG5Q,IAzPH,CAyPQ,IAzPR;AA0PA,CAAC,YAAU;AACV;;AAEA,MAAIxE,IAAI,GAAG,IAAX;AAAA,MACCE,KAAK,GAAGF,IAAI,CAACE,KADd;AAAA,MAECe,OAAO,GAAGf,KAAK,CAACe,OAFjB;AAMAf,EAAAA,KAAK,CAACyU,IAAN,CAAWtP,MAAX,CAAkB;AACjB4T,IAAAA,IAAI,EAAE,OADW;AAEjB9X,IAAAA,QAAQ,EAAC;AACR;AACAupB,MAAAA,aAAa,EAAG,IAFR;AAIR;AACAI,MAAAA,gBAAgB,EAAG,IALX;AAOR;AACA/oB,MAAAA,eAAe,EAAG,KARV;AAUR;AACAG,MAAAA,gBAAgB,EAAG,IAXX;AAaR;AACAkhB,MAAAA,cAAc,EAAG,gBAdT;AAgBR;AACAD,MAAAA,cAAc,EAAG,CAjBT;AAmBR;AACAnB,MAAAA,oBAAoB,EAAG,SApBf;AAsBR;AACAD,MAAAA,mBAAmB,EAAG,QAvBd;AAyBR;AACAd,MAAAA,kBAAkB,EAAG,EA1Bb;AA4BR;AACAsC,MAAAA,mBAAmB,EAAG,MA7Bd;AA+BR;AACAuF,MAAAA,QAAQ,EAAG,IAhCH;AAkCR;AACAC,MAAAA,cAAc,EAAG,CAnCT;AAqCR;AACAC,MAAAA,mBAAmB,EAAG,CAtCd;AAwCR;AACAC,MAAAA,uBAAuB,EAAG,EAzClB;AA2CR;AACAC,MAAAA,aAAa,EAAG,IA5CR;AA8CR;AACAC,MAAAA,kBAAkB,EAAG,CA/Cb;AAiDR;AACAC,MAAAA,WAAW,EAAG,IAlDN;AAoDR;AACA9T,MAAAA,cAAc,EAAG;AArDT,KAFQ;AA2DjBR,IAAAA,UAAU,EAAE,oBAASzI,IAAT,EAAc;AACzB,WAAKgd,UAAL,GAAkBnpB,KAAK,CAAC2Z,KAAN,CAAYxU,MAAZ,CAAmB;AACpCkV,QAAAA,WAAW,EAAG,KAAK3F,OAAL,CAAaoU,mBADS;AAEpC5U,QAAAA,MAAM,EAAG,KAAKQ,OAAL,CAAamU,cAFc;AAGpCjP,QAAAA,OAAO,EAAE,KAAKlF,OAAL,CAAakU,QAHc;AAIpC3O,QAAAA,kBAAkB,EAAG,KAAKvF,OAAL,CAAaqU,uBAJE;AAKpC3oB,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE;AALmB,OAAnB,CAAlB;AAQA,WAAK2V,QAAL,GAAgB,EAAhB;AAEA,WAAKkQ,UAAL,CAAgB9Z,IAAhB,EAXyB,CAazB;;AACA,UAAI,KAAKuI,OAAL,CAAanS,YAAjB,EAA8B;AAC7BxB,QAAAA,OAAO,CAACqR,UAAR,CAAmB,IAAnB,EAAyB,KAAKsC,OAAL,CAAajS,aAAtC,EAAqD,UAASmO,GAAT,EAAa;AACjE,cAAIia,sBAAsB,GAAIja,GAAG,CAAC0U,IAAJ,KAAa,UAAd,GAA4B,KAAK+D,gBAAL,CAAsBzY,GAAtB,CAA5B,GAAyD,EAAtF;AAEA,eAAK0Y,UAAL,CAAgB,UAASC,KAAT,EAAe;AAC9BA,YAAAA,KAAK,CAAClQ,OAAN,CAAc,CAAC,WAAD,EAAc,aAAd,CAAd;AACA,WAFD;AAGAtY,UAAAA,OAAO,CAAC+C,IAAR,CAAa+mB,sBAAb,EAAqC,UAASrB,WAAT,EAAqB;AACzDA,YAAAA,WAAW,CAACrS,SAAZ,GAAwBqS,WAAW,CAAC7D,aAApC;AACA6D,YAAAA,WAAW,CAACnS,WAAZ,GAA0BmS,WAAW,CAAC5D,eAAtC;AACA,WAHD;AAKA,eAAKpQ,WAAL,CAAiBqV,sBAAjB;AACA,SAZD;AAaA,OA5BwB,CA8BzB;;;AACA9pB,MAAAA,OAAO,CAAC+C,IAAR,CAAaqI,IAAI,CAAC4J,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAE3C,YAAI+O,aAAa,GAAG;AACnBzN,UAAAA,KAAK,EAAEtB,OAAO,CAACsB,KAAR,IAAiB,IADL;AAEnBlB,UAAAA,SAAS,EAAGJ,OAAO,CAACI,SAFD;AAGnBE,UAAAA,WAAW,EAAGN,OAAO,CAACM,WAHH;AAInBoS,UAAAA,UAAU,EAAG1S,OAAO,CAAC0S,UAJF;AAKnBC,UAAAA,gBAAgB,EAAG3S,OAAO,CAAC2S,gBALR;AAMnBxT,UAAAA,MAAM,EAAG;AANU,SAApB;AASA,aAAKH,QAAL,CAAc/P,IAAd,CAAmB8f,aAAnB;AAEA/kB,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAAC5K,IAArB,EAA0B,UAAS4Z,SAAT,EAAmBpZ,KAAnB,EAAyB;AAClD;AACA,cAAIqU,aAAJ;;AACA,cAAI,CAAC,KAAK7N,KAAL,CAAWhS,SAAhB,EAA0B;AACzB6f,YAAAA,aAAa,GAAG,KAAK7N,KAAL,CAAW4O,gBAAX,CAA4BpV,KAA5B,EAAmC,KAAKwG,KAAL,CAAWuN,qBAAX,CAAiCqF,SAAjC,CAAnC,CAAhB;AACA;;AACDD,UAAAA,aAAa,CAAC5P,MAAd,CAAqBlQ,IAArB,CAA0B,IAAI,KAAKmjB,UAAT,CAAoB;AAC7CnkB,YAAAA,KAAK,EAAG+gB,SADqC;AAE7C1N,YAAAA,KAAK,EAAGlM,IAAI,CAAC8L,MAAL,CAAYtL,KAAZ,CAFqC;AAG7CqZ,YAAAA,YAAY,EAAEjP,OAAO,CAACsB,KAHuB;AAI7CvP,YAAAA,CAAC,EAAG,KAAK4L,OAAL,CAAavT,SAAd,GAA2B,KAAKgS,KAAL,CAAWmP,OAAtC,GAAgDtB,aAAa,CAAClY,CAJpB;AAK7CE,YAAAA,CAAC,EAAG,KAAK0L,OAAL,CAAavT,SAAd,GAA2B,KAAKgS,KAAL,CAAWoP,OAAtC,GAAgDvB,aAAa,CAAChY,CALpB;AAM7CqO,YAAAA,WAAW,EAAGN,OAAO,CAAC2S,gBANuB;AAO7CvS,YAAAA,SAAS,EAAGJ,OAAO,CAAC0S,UAPyB;AAQ7C9D,YAAAA,aAAa,EAAG5O,OAAO,CAAC4S,kBAAR,IAA8B5S,OAAO,CAAC0S,UART;AAS7C7D,YAAAA,eAAe,EAAG7O,OAAO,CAAC6S,oBAAR,IAAgC7S,OAAO,CAAC2S;AATb,WAApB,CAA1B;AAWA,SAjBD,EAiBE,IAjBF;AAmBA,OAhCD,EAgCE,IAhCF;AAkCA,WAAKzU,MAAL;AACA,KA7HgB;AA8HjBqU,IAAAA,UAAU,EAAG,oBAAStlB,QAAT,EAAkB;AAC9BjD,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAC3ChW,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA4BlS,QAA5B,EAAqC,IAArC;AACA,OAFD,EAEE,IAFF;AAGA,KAlIgB;AAoIjBqlB,IAAAA,gBAAgB,EAAG,0BAASzY,GAAT,EAAa;AAC/B,UAAIka,aAAa,GAAG/pB,OAAO,CAAC4P,mBAAR,CAA4BC,GAA5B,CAApB;AAAA,UACCma,UAAU,GAAGhqB,OAAO,CAAC2H,iBAAR,CAA0B;AACtCI,QAAAA,CAAC,EAAE,KAAKqK,KAAL,CAAWmP,OADwB;AAEtCtZ,QAAAA,CAAC,EAAE,KAAKmK,KAAL,CAAWoP;AAFwB,OAA1B,EAGVuI,aAHU,CADd;AAMA,UAAIE,aAAa,GAAIpjB,IAAI,CAACa,EAAL,GAAU,CAAX,GAAe,KAAK0K,KAAL,CAAWqK,WAA9C;AAAA,UACCyN,UAAU,GAAGrjB,IAAI,CAAC+D,KAAL,CAAW,CAACof,UAAU,CAAC5hB,KAAX,GAAmBvB,IAAI,CAACa,EAAL,GAAU,GAA9B,IAAqCuiB,aAAhD,CADd;AAAA,UAECH,sBAAsB,GAAG,EAF1B,CAP+B,CAW/B;;AACA,UAAII,UAAU,IAAI,KAAK9X,KAAL,CAAWqK,WAAzB,IAAwCyN,UAAU,GAAG,CAAzD,EAA2D;AAC1DA,QAAAA,UAAU,GAAG,CAAb;AACA;;AAED,UAAIF,UAAU,CAAC1hB,QAAX,IAAuB,KAAK8J,KAAL,CAAW4L,WAAtC,EAAkD;AACjDhe,QAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA4B,UAASgB,OAAT,EAAiB;AAC5C8T,UAAAA,sBAAsB,CAAC7kB,IAAvB,CAA4B+Q,OAAO,CAACb,MAAR,CAAe+U,UAAf,CAA5B;AACA,SAFD;AAGA;;AAED,aAAOJ,sBAAP;AACA,KA3JgB;AA6JjB5E,IAAAA,UAAU,EAAG,oBAAS9Z,IAAT,EAAc;AAC1B,WAAKgH,KAAL,GAAa,IAAInT,KAAK,CAACugB,WAAV,CAAsB;AAClC3G,QAAAA,OAAO,EAAE,KAAKlF,OAAL,CAAapT,SADY;AAElCkS,QAAAA,SAAS,EAAE,KAAKkB,OAAL,CAAavS,cAFU;AAGlCwV,QAAAA,QAAQ,EAAE,KAAKjD,OAAL,CAAaxS,aAHW;AAIlCuR,QAAAA,UAAU,EAAE,KAAKiB,OAAL,CAAazS,eAJS;AAKlC+gB,QAAAA,SAAS,EAAE,KAAKtO,OAAL,CAAatS,cALU;AAMlCib,QAAAA,UAAU,EAAE,KAAK3I,OAAL,CAAa7S,eANS;AAOlCghB,QAAAA,iBAAiB,EAAE,KAAKnO,OAAL,CAAa0V,sBAPE;AAQlCtH,QAAAA,aAAa,EAAE,KAAKpO,OAAL,CAAa2V,kBARM;AASlC5J,QAAAA,gBAAgB,EAAG,KAAK/L,OAAL,CAAa4V,qBATE;AAUlCvH,QAAAA,gBAAgB,EAAE,KAAKrO,OAAL,CAAa6V,qBAVG;AAWlCnQ,QAAAA,SAAS,EAAG,KAAK1F,OAAL,CAAa8V,aAAd,GAA+B,KAAK9V,OAAL,CAAa9S,cAA5C,GAA6D,CAXtC;AAYlCoe,QAAAA,SAAS,EAAE,KAAKtL,OAAL,CAAa/S,cAZU;AAalCuhB,QAAAA,cAAc,EAAG,KAAKxO,OAAL,CAAawO,cAbI;AAclCD,QAAAA,cAAc,EAAI,KAAKvO,OAAL,CAAakW,gBAAd,GAAkC,KAAKlW,OAAL,CAAauO,cAA/C,GAAgE,CAd/C;AAelC;AACAI,QAAAA,mBAAmB,EAAG,KAAK3O,OAAL,CAAa2O,mBAhBD;AAiBlCtC,QAAAA,kBAAkB,EAAG,KAAKrM,OAAL,CAAaqM,kBAjBA;AAkBlCe,QAAAA,oBAAoB,EAAG,KAAKpN,OAAL,CAAaoN,oBAlBF;AAmBlCD,QAAAA,mBAAmB,EAAG,KAAKnN,OAAL,CAAamN,mBAnBD;AAoBlChhB,QAAAA,MAAM,EAAG,KAAKX,KAAL,CAAWW,MApBc;AAqBlCD,QAAAA,KAAK,EAAE,KAAKV,KAAL,CAAWU,KArBgB;AAsBlC0hB,QAAAA,OAAO,EAAE,KAAKpiB,KAAL,CAAWU,KAAX,GAAiB,CAtBQ;AAuBlC2hB,QAAAA,OAAO,EAAE,KAAKriB,KAAL,CAAWW,MAAX,GAAkB,CAvBO;AAwBlCT,QAAAA,GAAG,EAAG,KAAKF,KAAL,CAAWE,GAxBiB;AAyBlC0L,QAAAA,cAAc,EAAE,KAAK4I,OAAL,CAAa5S,UAzBK;AA0BlCmW,QAAAA,MAAM,EAAE9L,IAAI,CAAC8L,MA1BqB;AA2BlCuF,QAAAA,WAAW,EAAErR,IAAI,CAAC4J,QAAL,CAAc,CAAd,EAAiB5J,IAAjB,CAAsB3H;AA3BD,OAAtB,CAAb;AA8BA,WAAK2O,KAAL,CAAWyN,YAAX;AACA,WAAK6J,gBAAL,CAAsBte,IAAI,CAAC4J,QAA3B;AACA,WAAK5C,KAAL,CAAW6J,YAAX;AACA,KA/LgB;AAgMjByN,IAAAA,gBAAgB,EAAE,0BAAS1U,QAAT,EAAkB;AACnC,UAAIrL,WAAW,GAAI,YAAU;AAC5B,YAAIwgB,cAAc,GAAG,EAArB;AACAnqB,QAAAA,OAAO,CAAC+C,IAAR,CAAaiS,QAAb,EAAsB,UAASgB,OAAT,EAAiB;AACtC,cAAIA,OAAO,CAAC5K,IAAZ,EAAiB;AAChB+e,YAAAA,cAAc,GAAGA,cAAc,CAACvmB,MAAf,CAAsBoS,OAAO,CAAC5K,IAA9B,CAAjB;AACA,WAFD,MAGK;AACJpL,YAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA6B,UAASqT,KAAT,EAAe;AAC3C2B,cAAAA,cAAc,CAACllB,IAAf,CAAoBujB,KAAK,CAACvkB,KAA1B;AACA,aAFD;AAGA;AACD,SATD;AAUA,eAAOkmB,cAAP;AACA,OAbiB,EAAlB;;AAgBA,UAAIP,UAAU,GAAI,KAAKjW,OAAL,CAAanT,aAAd,GAChB;AACCqK,QAAAA,KAAK,EAAE,KAAK8I,OAAL,CAAalT,UADrB;AAECiK,QAAAA,SAAS,EAAE,KAAKiJ,OAAL,CAAajT,cAFzB;AAGCoG,QAAAA,GAAG,EAAE,KAAK6M,OAAL,CAAahT,eAHnB;AAICgG,QAAAA,GAAG,EAAE,KAAKgN,OAAL,CAAahT,eAAb,GAAgC,KAAKgT,OAAL,CAAalT,UAAb,GAA0B,KAAKkT,OAAL,CAAajT;AAJ7E,OADgB,GAOhBV,OAAO,CAAC0J,mBAAR,CACCC,WADD,EAEC3J,OAAO,CAAC8G,GAAR,CAAY,CAAC,KAAK3H,KAAL,CAAWU,KAAZ,EAAmB,KAAKV,KAAL,CAAWW,MAA9B,CAAZ,IAAmD,CAFpD,EAGC,KAAK6T,OAAL,CAAaxS,aAHd,EAIC,KAAKwS,OAAL,CAAa1S,gBAJd,EAKC,KAAK0S,OAAL,CAAa3S,iBALd,CAPD;AAeAhB,MAAAA,OAAO,CAACoE,MAAR,CACC,KAAKgO,KADN,EAECwX,UAFD;AAKA,KArOgB;AAsOjB/D,IAAAA,OAAO,EAAG,iBAASlc,WAAT,EAAqB2N,KAArB,EAA2B;AACpC;AACA,WAAKlF,KAAL,CAAWqK,WAAX;AACAzc,MAAAA,OAAO,CAAC+C,IAAR,CAAa4G,WAAb,EAAyB,UAAS1F,KAAT,EAAe6f,YAAf,EAA4B;AACpD,YAAI7D,aAAa,GAAG,KAAK7N,KAAL,CAAW4O,gBAAX,CAA4B,KAAK5O,KAAL,CAAWqK,WAAvC,EAAoD,KAAKrK,KAAL,CAAWuN,qBAAX,CAAiC1b,KAAjC,CAApD,CAApB;AACA,aAAK+Q,QAAL,CAAc8O,YAAd,EAA4B3O,MAA5B,CAAmClQ,IAAnC,CAAwC,IAAI,KAAKmjB,UAAT,CAAoB;AAC3DnkB,UAAAA,KAAK,EAAGA,KADmD;AAE3DqT,UAAAA,KAAK,EAAGA,KAFmD;AAG3DvP,UAAAA,CAAC,EAAEkY,aAAa,CAAClY,CAH0C;AAI3DE,UAAAA,CAAC,EAAEgY,aAAa,CAAChY,CAJ0C;AAK3DqO,UAAAA,WAAW,EAAG,KAAKtB,QAAL,CAAc8O,YAAd,EAA4B6E,gBALiB;AAM3DvS,UAAAA,SAAS,EAAG,KAAKpB,QAAL,CAAc8O,YAAd,EAA4B4E;AANmB,SAApB,CAAxC;AAQA,OAVD,EAUE,IAVF;AAYA,WAAKtW,KAAL,CAAW8E,MAAX,CAAkBjS,IAAlB,CAAuBqS,KAAvB;AAEA,WAAKrD,MAAL;AAEA,WAAKuE,MAAL;AACA,KA1PgB;AA2PjBsN,IAAAA,UAAU,EAAG,sBAAU;AACtB,WAAK1T,KAAL,CAAWqK,WAAX;AACA,WAAKrK,KAAL,CAAW8E,MAAX,CAAkByF,KAAlB;AACA3c,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAC3CA,QAAAA,OAAO,CAACb,MAAR,CAAewH,KAAf;AACA,OAFD,EAEE,IAFF;AAGA,WAAK1I,MAAL;AACA,WAAKuE,MAAL;AACA,KAnQgB;AAoQjBA,IAAAA,MAAM,EAAG,kBAAU;AAClB,WAAK+P,UAAL,CAAgB,UAASC,KAAT,EAAe;AAC9BA,QAAAA,KAAK,CAACnQ,IAAN;AACA,OAFD;AAGA,WAAKpE,MAAL;AACA,WAAKC,MAAL;AACA,KA1QgB;AA2QjBD,IAAAA,MAAM,EAAE,kBAAU;AACjBjU,MAAAA,OAAO,CAACoE,MAAR,CAAe,KAAKgO,KAApB,EAA2B;AAC1BvS,QAAAA,KAAK,EAAG,KAAKV,KAAL,CAAWU,KADO;AAE1BC,QAAAA,MAAM,EAAE,KAAKX,KAAL,CAAWW,MAFO;AAG1B2f,QAAAA,IAAI,EAAGzf,OAAO,CAAC8G,GAAR,CAAY,CAAC,KAAK3H,KAAL,CAAWU,KAAZ,EAAmB,KAAKV,KAAL,CAAWW,MAA9B,CAAZ,CAHmB;AAI1ByhB,QAAAA,OAAO,EAAE,KAAKpiB,KAAL,CAAWU,KAAX,GAAiB,CAJA;AAK1B2hB,QAAAA,OAAO,EAAE,KAAKriB,KAAL,CAAWW,MAAX,GAAkB;AALD,OAA3B;AAOA,WAAK4pB,gBAAL,CAAsB,KAAK1U,QAA3B;AACA,WAAK5C,KAAL,CAAWyN,YAAX;AACA,WAAKzN,KAAL,CAAW6J,YAAX;AACA,KAtRgB;AAuRjB9H,IAAAA,IAAI,EAAG,cAASwE,IAAT,EAAc;AACpB,UAAIhJ,WAAW,GAAGgJ,IAAI,IAAI,CAA1B;AAAA,UACCtZ,GAAG,GAAG,KAAKF,KAAL,CAAWE,GADlB;AAEA,WAAKgT,KAAL;AACA,WAAKD,KAAL,CAAW+B,IAAX;AAEAnU,MAAAA,OAAO,CAAC+C,IAAR,CAAa,KAAKiS,QAAlB,EAA2B,UAASgB,OAAT,EAAiB;AAE3C;AACAhW,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA4B,UAASqT,KAAT,EAAe5c,KAAf,EAAqB;AAChD,cAAI4c,KAAK,CAACvS,QAAN,EAAJ,EAAqB;AACpBuS,YAAAA,KAAK,CAAC9P,UAAN,CAAiB,KAAKtG,KAAL,CAAW4O,gBAAX,CAA4BpV,KAA5B,EAAmC,KAAKwG,KAAL,CAAWuN,qBAAX,CAAiC6I,KAAK,CAACvkB,KAAvC,CAAnC,CAAjB,EAAoG0L,WAApG;AACA;AACD,SAJD,EAIE,IAJF,EAH2C,CAW3C;;AACAtQ,QAAAA,GAAG,CAACga,SAAJ,GAAgB,KAAK1F,OAAL,CAAauU,kBAA7B;AACA7oB,QAAAA,GAAG,CAAC+Z,WAAJ,GAAkBpD,OAAO,CAACM,WAA1B;AACAjX,QAAAA,GAAG,CAAC+T,SAAJ;AACApT,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA4B,UAASqT,KAAT,EAAe5c,KAAf,EAAqB;AAChD,cAAIA,KAAK,KAAK,CAAd,EAAgB;AACfvM,YAAAA,GAAG,CAACgU,MAAJ,CAAWmV,KAAK,CAACzgB,CAAjB,EAAmBygB,KAAK,CAACvgB,CAAzB;AACA,WAFD,MAGI;AACH5I,YAAAA,GAAG,CAACiU,MAAJ,CAAWkV,KAAK,CAACzgB,CAAjB,EAAmBygB,KAAK,CAACvgB,CAAzB;AACA;AACD,SAPD,EAOE,IAPF;AAQA5I,QAAAA,GAAG,CAACmU,SAAJ;AACAnU,QAAAA,GAAG,CAACgX,MAAJ;AAEAhX,QAAAA,GAAG,CAACka,SAAJ,GAAgBvD,OAAO,CAACI,SAAxB;AACA/W,QAAAA,GAAG,CAAC6W,IAAJ,GA3B2C,CA6B3C;AACA;AACA;;AACAlW,QAAAA,OAAO,CAAC+C,IAAR,CAAaiT,OAAO,CAACb,MAArB,EAA4B,UAASqT,KAAT,EAAe;AAC1C,cAAIA,KAAK,CAACvS,QAAN,EAAJ,EAAqB;AACpBuS,YAAAA,KAAK,CAACrU,IAAN;AACA;AACD,SAJD;AAMA,OAtCD,EAsCE,IAtCF;AAwCA;AArUgB,GAAlB;AA6UA,CAtVD,EAsVG5Q,IAtVH,CAsVQ,IAtVR;;;AC9jGA,IAAI6mB,UAAU,GAAG,4BAAjB;AAEA,IAAIC,SAAS,GAAGvH,MAAM,CAACwH,MAAP,CAAcC,MAA9B;;AAEA,SAASA,MAAT,CAAgBC,UAAhB,EAA4B;AAC1BH,EAAAA,SAAS,CAAC9mB,IAAV,CAAe,IAAf,EAAqBinB,UAArB;AACA,OAAKC,GAAL,GAAW;AACTrf,IAAAA,IAAI,EAAE0X,MAAM,CAACwH,MAAP,CAAcI,OADX;AAETC,IAAAA,gBAAgB,EAAE,EAFT;AAGTC,IAAAA,iBAAiB,EAAE,EAHV;AAITC,IAAAA,MAAM,EAAE,UAAUxf,EAAV,EAAc;AACpB,WAAKsf,gBAAL,CAAsB1lB,IAAtB,CAA2BoG,EAAE,IAAI,YAAY,CAAE,CAA/C;AACD,KANQ;AAOTyf,IAAAA,OAAO,EAAE,UAAUzf,EAAV,EAAc;AACrB,WAAKuf,iBAAL,CAAuB3lB,IAAvB,CAA4BoG,EAA5B;AACD;AATQ,GAAX;AAYAyX,EAAAA,MAAM,CAACwH,MAAP,CAAcI,OAAd,GAAwB,IAAxB;AACD;;AAED5H,MAAM,CAACwH,MAAP,CAAcC,MAAd,GAAuBA,MAAvB;AACA,IAAIQ,aAAJ,EAAmBC,cAAnB;AAEA,IAAIxlB,MAAM,GAAGsd,MAAM,CAACwH,MAAP,CAAc9kB,MAA3B;;AACA,IAAI,CAAC,CAACA,MAAD,IAAW,CAACA,MAAM,CAACylB,eAApB,KAAwC,OAAOC,SAAP,KAAqB,WAAjE,EAA8E;AAC5E,MAAIC,QAAQ,GAAG,MAA4BpE,QAAQ,CAACoE,QAApD;AACA,MAAIC,QAAQ,GAAGrE,QAAQ,CAACqE,QAAT,KAAsB,QAAtB,GAAiC,KAAjC,GAAyC,IAAxD;AACA,MAAIC,EAAE,GAAG,IAAIH,SAAJ,CAAcE,QAAQ,GAAG,KAAX,GAAmBD,QAAnB,GAA8B,GAA9B,aAA2D,GAAzE,CAAT;;AACAE,EAAAA,EAAE,CAACC,SAAH,GAAe,UAASC,KAAT,EAAgB;AAC7BR,IAAAA,aAAa,GAAG,EAAhB;AACAC,IAAAA,cAAc,GAAG,EAAjB;AAEA,QAAI5f,IAAI,GAAGogB,IAAI,CAACC,KAAL,CAAWF,KAAK,CAACngB,IAAjB,CAAX;;AAEA,QAAIA,IAAI,CAACmZ,IAAL,KAAc,QAAlB,EAA4B;AAC1B,UAAImH,OAAO,GAAG,KAAd;AACAtgB,MAAAA,IAAI,CAACugB,MAAL,CAAYC,OAAZ,CAAoB,UAASC,KAAT,EAAgB;AAClC,YAAI,CAACA,KAAK,CAACC,KAAX,EAAkB;AAChB,cAAIC,SAAS,GAAGC,cAAc,CAAC7rB,MAAM,CAAC8rB,aAAR,EAAuBJ,KAAK,CAAC9lB,EAA7B,CAA9B;;AACA,cAAIgmB,SAAJ,EAAe;AACbL,YAAAA,OAAO,GAAG,IAAV;AACD;AACF;AACF,OAPD,EAF0B,CAW1B;;AACAA,MAAAA,OAAO,GAAGA,OAAO,IAAItgB,IAAI,CAACugB,MAAL,CAAYO,KAAZ,CAAkB,UAASL,KAAT,EAAgB;AACrD,eAAOA,KAAK,CAACtH,IAAN,KAAe,KAAf,IAAwBsH,KAAK,CAACM,SAAN,CAAgBC,EAA/C;AACD,OAFoB,CAArB;;AAIA,UAAIV,OAAJ,EAAa;AACXvlB,QAAAA,OAAO,CAACkM,KAAR;AAEAjH,QAAAA,IAAI,CAACugB,MAAL,CAAYC,OAAZ,CAAoB,UAAUC,KAAV,EAAiB;AACnCQ,UAAAA,QAAQ,CAAClsB,MAAM,CAAC8rB,aAAR,EAAuBJ,KAAvB,CAAR;AACD,SAFD;AAIAb,QAAAA,cAAc,CAACY,OAAf,CAAuB,UAAUU,CAAV,EAAa;AAClCC,UAAAA,YAAY,CAACD,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAZ;AACD,SAFD;AAGD,OAVD,MAUO,IAAIvF,QAAQ,CAACyF,MAAb,EAAqB;AAAE;AAC5BzF,QAAAA,QAAQ,CAACyF,MAAT;AACD;AACF;;AAED,QAAIphB,IAAI,CAACmZ,IAAL,KAAc,QAAlB,EAA4B;AAC1B8G,MAAAA,EAAE,CAACoB,KAAH;;AACApB,MAAAA,EAAE,CAACqB,OAAH,GAAa,YAAY;AACvB3F,QAAAA,QAAQ,CAACyF,MAAT;AACD,OAFD;AAGD;;AAED,QAAIphB,IAAI,CAACmZ,IAAL,KAAc,gBAAlB,EAAoC;AAClCpe,MAAAA,OAAO,CAACqD,GAAR,CAAY,2BAAZ;AAEAmjB,MAAAA,kBAAkB;AACnB;;AAED,QAAIvhB,IAAI,CAACmZ,IAAL,KAAc,OAAlB,EAA2B;AACzBpe,MAAAA,OAAO,CAACymB,KAAR,CAAc,kBAAkBxhB,IAAI,CAACwhB,KAAL,CAAWC,OAA7B,GAAuC,IAAvC,GAA8CzhB,IAAI,CAACwhB,KAAL,CAAWE,KAAvE;AAEAH,MAAAA,kBAAkB;AAElB,UAAII,OAAO,GAAGC,kBAAkB,CAAC5hB,IAAD,CAAhC;AACA3L,MAAAA,QAAQ,CAACwtB,IAAT,CAAcC,WAAd,CAA0BH,OAA1B;AACD;AACF,GA1DD;AA2DD;;AAED,SAASJ,kBAAT,GAA8B;AAC5B,MAAII,OAAO,GAAGttB,QAAQ,CAAC0tB,cAAT,CAAwB/C,UAAxB,CAAd;;AACA,MAAI2C,OAAJ,EAAa;AACXA,IAAAA,OAAO,CAACK,MAAR;AACD;AACF;;AAED,SAASJ,kBAAT,CAA4B5hB,IAA5B,EAAkC;AAChC,MAAI2hB,OAAO,GAAGttB,QAAQ,CAAC4tB,aAAT,CAAuB,KAAvB,CAAd;AACAN,EAAAA,OAAO,CAAChnB,EAAR,GAAaqkB,UAAb,CAFgC,CAIhC;;AACA,MAAIyC,OAAO,GAAGptB,QAAQ,CAAC4tB,aAAT,CAAuB,KAAvB,CAAd;AACA,MAAIC,UAAU,GAAG7tB,QAAQ,CAAC4tB,aAAT,CAAuB,KAAvB,CAAjB;AACAR,EAAAA,OAAO,CAACU,SAAR,GAAoBniB,IAAI,CAACwhB,KAAL,CAAWC,OAA/B;AACAS,EAAAA,UAAU,CAACC,SAAX,GAAuBniB,IAAI,CAACwhB,KAAL,CAAWE,KAAlC;AAEAC,EAAAA,OAAO,CAACS,SAAR,GACE,2NACE,mFADF,GAEE,yEAFF,GAGE,qEAHF,GAG0EX,OAAO,CAACW,SAHlF,GAG8F,QAH9F,GAIE,OAJF,GAIYF,UAAU,CAACE,SAJvB,GAImC,QAJnC,GAKA,QANF;AASA,SAAOT,OAAP;AAED;;AAED,SAASU,UAAT,CAAoBnD,MAApB,EAA4BvkB,EAA5B,EAAgC;AAC9B,MAAI2nB,OAAO,GAAGpD,MAAM,CAACoD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,MAAIC,OAAO,GAAG,EAAd;AACA,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,GAAV;;AAEA,OAAKF,CAAL,IAAUF,OAAV,EAAmB;AACjB,SAAKG,CAAL,IAAUH,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,CAAV,EAAyB;AACvBE,MAAAA,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAP,CAAW,CAAX,EAAcC,CAAd,CAAN;;AACA,UAAIC,GAAG,KAAK/nB,EAAR,IAAe3C,KAAK,CAAC2qB,OAAN,CAAcD,GAAd,KAAsBA,GAAG,CAACA,GAAG,CAACrqB,MAAJ,GAAa,CAAd,CAAH,KAAwBsC,EAAjE,EAAsE;AACpE4nB,QAAAA,OAAO,CAAC1oB,IAAR,CAAa2oB,CAAb;AACD;AACF;AACF;;AAED,MAAItD,MAAM,CAAC9kB,MAAX,EAAmB;AACjBmoB,IAAAA,OAAO,GAAGA,OAAO,CAAC/pB,MAAR,CAAe6pB,UAAU,CAACnD,MAAM,CAAC9kB,MAAR,EAAgBO,EAAhB,CAAzB,CAAV;AACD;;AAED,SAAO4nB,OAAP;AACD;;AAED,SAAStB,QAAT,CAAkB/B,MAAlB,EAA0BuB,KAA1B,EAAiC;AAC/B,MAAI6B,OAAO,GAAGpD,MAAM,CAACoD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAIA,OAAO,CAAC7B,KAAK,CAAC9lB,EAAP,CAAP,IAAqB,CAACukB,MAAM,CAAC9kB,MAAjC,EAAyC;AACvC,QAAI6F,EAAE,GAAG,IAAIJ,QAAJ,CAAa,SAAb,EAAwB,QAAxB,EAAkC,SAAlC,EAA6C4gB,KAAK,CAACM,SAAN,CAAgBC,EAA7D,CAAT;AACAP,IAAAA,KAAK,CAACC,KAAN,GAAc,CAAC4B,OAAO,CAAC7B,KAAK,CAAC9lB,EAAP,CAAtB;AACA2nB,IAAAA,OAAO,CAAC7B,KAAK,CAAC9lB,EAAP,CAAP,GAAoB,CAACsF,EAAD,EAAKwgB,KAAK,CAACmC,IAAX,CAApB;AACD,GAJD,MAIO,IAAI1D,MAAM,CAAC9kB,MAAX,EAAmB;AACxB6mB,IAAAA,QAAQ,CAAC/B,MAAM,CAAC9kB,MAAR,EAAgBqmB,KAAhB,CAAR;AACD;AACF;;AAED,SAASG,cAAT,CAAwB1B,MAAxB,EAAgCvkB,EAAhC,EAAoC;AAClC,MAAI2nB,OAAO,GAAGpD,MAAM,CAACoD,OAArB;;AACA,MAAI,CAACA,OAAL,EAAc;AACZ;AACD;;AAED,MAAI,CAACA,OAAO,CAAC3nB,EAAD,CAAR,IAAgBukB,MAAM,CAAC9kB,MAA3B,EAAmC;AACjC,WAAOwmB,cAAc,CAAC1B,MAAM,CAAC9kB,MAAR,EAAgBO,EAAhB,CAArB;AACD;;AAED,MAAIglB,aAAa,CAAChlB,EAAD,CAAjB,EAAuB;AACrB;AACD;;AACDglB,EAAAA,aAAa,CAAChlB,EAAD,CAAb,GAAoB,IAApB;AAEA,MAAIkoB,MAAM,GAAG3D,MAAM,CAACpf,KAAP,CAAanF,EAAb,CAAb;AAEAilB,EAAAA,cAAc,CAAC/lB,IAAf,CAAoB,CAACqlB,MAAD,EAASvkB,EAAT,CAApB;;AAEA,MAAIkoB,MAAM,IAAIA,MAAM,CAACxD,GAAjB,IAAwBwD,MAAM,CAACxD,GAAP,CAAWE,gBAAX,CAA4BlnB,MAAxD,EAAgE;AAC9D,WAAO,IAAP;AACD;;AAED,SAAOgqB,UAAU,CAACttB,MAAM,CAAC8rB,aAAR,EAAuBlmB,EAAvB,CAAV,CAAqCmoB,IAArC,CAA0C,UAAUnoB,EAAV,EAAc;AAC7D,WAAOimB,cAAc,CAAC7rB,MAAM,CAAC8rB,aAAR,EAAuBlmB,EAAvB,CAArB;AACD,GAFM,CAAP;AAGD;;AAED,SAASwmB,YAAT,CAAsBjC,MAAtB,EAA8BvkB,EAA9B,EAAkC;AAChC,MAAIkoB,MAAM,GAAG3D,MAAM,CAACpf,KAAP,CAAanF,EAAb,CAAb;AACAukB,EAAAA,MAAM,CAACI,OAAP,GAAiB,EAAjB;;AACA,MAAIuD,MAAJ,EAAY;AACVA,IAAAA,MAAM,CAACxD,GAAP,CAAWrf,IAAX,GAAkBkf,MAAM,CAACI,OAAzB;AACD;;AAED,MAAIuD,MAAM,IAAIA,MAAM,CAACxD,GAAjB,IAAwBwD,MAAM,CAACxD,GAAP,CAAWG,iBAAX,CAA6BnnB,MAAzD,EAAiE;AAC/DwqB,IAAAA,MAAM,CAACxD,GAAP,CAAWG,iBAAX,CAA6BgB,OAA7B,CAAqC,UAAUuC,EAAV,EAAc;AACjDA,MAAAA,EAAE,CAAC7D,MAAM,CAACI,OAAR,CAAF;AACD,KAFD;AAGD;;AAED,SAAOJ,MAAM,CAACpf,KAAP,CAAanF,EAAb,CAAP;AACAukB,EAAAA,MAAM,CAACvkB,EAAD,CAAN;AAEAkoB,EAAAA,MAAM,GAAG3D,MAAM,CAACpf,KAAP,CAAanF,EAAb,CAAT;;AACA,MAAIkoB,MAAM,IAAIA,MAAM,CAACxD,GAAjB,IAAwBwD,MAAM,CAACxD,GAAP,CAAWE,gBAAX,CAA4BlnB,MAAxD,EAAgE;AAC9DwqB,IAAAA,MAAM,CAACxD,GAAP,CAAWE,gBAAX,CAA4BiB,OAA5B,CAAoC,UAAUuC,EAAV,EAAc;AAChDA,MAAAA,EAAE;AACH,KAFD;;AAGA,WAAO,IAAP;AACD;AACF","file":"Chart.ad7301d0.js","sourceRoot":"..","sourcesContent":["/*!\r\n * Chart.js\r\n * http://chartjs.org/\r\n * Version: 1.0.2\r\n *\r\n * Copyright 2015 Nick Downie\r\n * Released under the MIT license\r\n * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md\r\n */\r\n\r\n\r\n(function(){\r\n\r\n\t\"use strict\";\r\n\r\n\t//Declare root variable - window in the browser, global on the server\r\n\tvar root = this,\r\n\t\tprevious = root.Chart;\r\n\r\n\t//Occupy the global variable of Chart, and create a simple base class\r\n\tvar Chart = function(context){\r\n\t\tvar chart = this;\r\n\t\tthis.canvas = context.canvas;\r\n\r\n\t\tthis.ctx = context;\r\n\r\n\t\t//Variables global to the chart\r\n\t\tvar computeDimension = function(element,dimension)\r\n\t\t{\r\n\t\t\tif (element['offset'+dimension])\r\n\t\t\t{\r\n\t\t\t\treturn element['offset'+dimension];\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\treturn document.defaultView.getComputedStyle(element).getPropertyValue(dimension);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tvar width = this.width = computeDimension(context.canvas,'Width');\r\n\t\tvar height = this.height = computeDimension(context.canvas,'Height');\r\n\r\n\t\t// Firefox requires this to work correctly\r\n\t\tcontext.canvas.width  = width;\r\n\t\tcontext.canvas.height = height;\r\n\r\n\t\tvar width = this.width = context.canvas.width;\r\n\t\tvar height = this.height = context.canvas.height;\r\n\t\tthis.aspectRatio = this.width / this.height;\r\n\t\t//High pixel density displays - multiply the size of the canvas height/width by the device pixel ratio, then scale.\r\n\t\thelpers.retinaScale(this);\r\n\r\n\t\treturn this;\r\n\t};\r\n\t//Globally expose the defaults to allow for user updating/changing\r\n\tChart.defaults = {\r\n\t\tglobal: {\r\n\t\t\t// Boolean - Whether to animate the chart\r\n\t\t\tanimation: true,\r\n\r\n\t\t\t// Number - Number of animation steps\r\n\t\t\tanimationSteps: 60,\r\n\r\n\t\t\t// String - Animation easing effect\r\n\t\t\tanimationEasing: \"easeOutQuart\",\r\n\r\n\t\t\t// Boolean - If we should show the scale at all\r\n\t\t\tshowScale: true,\r\n\r\n\t\t\t// Boolean - If we want to override with a hard coded scale\r\n\t\t\tscaleOverride: false,\r\n\r\n\t\t\t// ** Required if scaleOverride is true **\r\n\t\t\t// Number - The number of steps in a hard coded scale\r\n\t\t\tscaleSteps: null,\r\n\t\t\t// Number - The value jump in the hard coded scale\r\n\t\t\tscaleStepWidth: null,\r\n\t\t\t// Number - The scale starting value\r\n\t\t\tscaleStartValue: null,\r\n\r\n\t\t\t// String - Colour of the scale line\r\n\t\t\tscaleLineColor: \"rgba(0,0,0,.1)\",\r\n\r\n\t\t\t// Number - Pixel width of the scale line\r\n\t\t\tscaleLineWidth: 1,\r\n\r\n\t\t\t// Boolean - Whether to show labels on the scale\r\n\t\t\tscaleShowLabels: true,\r\n\r\n\t\t\t// Interpolated JS string - can access value\r\n\t\t\tscaleLabel: \"<%=value%>\",\r\n\r\n\t\t\t// Boolean - Whether the scale should stick to integers, and not show any floats even if drawing space is there\r\n\t\t\tscaleIntegersOnly: true,\r\n\r\n\t\t\t// Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\r\n\t\t\tscaleBeginAtZero: false,\r\n\r\n\t\t\t// String - Scale label font declaration for the scale label\r\n\t\t\tscaleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\r\n\t\t\t// Number - Scale label font size in pixels\r\n\t\t\tscaleFontSize: 12,\r\n\r\n\t\t\t// String - Scale label font weight style\r\n\t\t\tscaleFontStyle: \"normal\",\r\n\r\n\t\t\t// String - Scale label font colour\r\n\t\t\tscaleFontColor: \"#666\",\r\n\r\n\t\t\t// Boolean - whether or not the chart should be responsive and resize when the browser does.\r\n\t\t\tresponsive: false,\r\n\r\n\t\t\t// Boolean - whether to maintain the starting aspect ratio or not when responsive, if set to false, will take up entire container\r\n\t\t\tmaintainAspectRatio: true,\r\n\r\n\t\t\t// Boolean - Determines whether to draw tooltips on the canvas or not - attaches events to touchmove & mousemove\r\n\t\t\tshowTooltips: true,\r\n\r\n\t\t\t// Boolean - Determines whether to draw built-in tooltip or call custom tooltip function\r\n\t\t\tcustomTooltips: false,\r\n\r\n\t\t\t// Array - Array of string names to attach tooltip events\r\n\t\t\ttooltipEvents: [\"mousemove\", \"touchstart\", \"touchmove\", \"mouseout\"],\r\n\r\n\t\t\t// String - Tooltip background colour\r\n\t\t\ttooltipFillColor: \"rgba(0,0,0,0.8)\",\r\n\r\n\t\t\t// String - Tooltip label font declaration for the scale label\r\n\t\t\ttooltipFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\r\n\t\t\t// Number - Tooltip label font size in pixels\r\n\t\t\ttooltipFontSize: 14,\r\n\r\n\t\t\t// String - Tooltip font weight style\r\n\t\t\ttooltipFontStyle: \"normal\",\r\n\r\n\t\t\t// String - Tooltip label font colour\r\n\t\t\ttooltipFontColor: \"#fff\",\r\n\r\n\t\t\t// String - Tooltip title font declaration for the scale label\r\n\t\t\ttooltipTitleFontFamily: \"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif\",\r\n\r\n\t\t\t// Number - Tooltip title font size in pixels\r\n\t\t\ttooltipTitleFontSize: 14,\r\n\r\n\t\t\t// String - Tooltip title font weight style\r\n\t\t\ttooltipTitleFontStyle: \"bold\",\r\n\r\n\t\t\t// String - Tooltip title font colour\r\n\t\t\ttooltipTitleFontColor: \"#fff\",\r\n\r\n\t\t\t// Number - pixel width of padding around tooltip text\r\n\t\t\ttooltipYPadding: 6,\r\n\r\n\t\t\t// Number - pixel width of padding around tooltip text\r\n\t\t\ttooltipXPadding: 6,\r\n\r\n\t\t\t// Number - Size of the caret on the tooltip\r\n\t\t\ttooltipCaretSize: 8,\r\n\r\n\t\t\t// Number - Pixel radius of the tooltip border\r\n\t\t\ttooltipCornerRadius: 6,\r\n\r\n\t\t\t// Number - Pixel offset from point x to tooltip edge\r\n\t\t\ttooltipXOffset: 10,\r\n\r\n\t\t\t// String - Template string for single tooltips\r\n\t\t\ttooltipTemplate: \"<%if (label){%><%=label%>: <%}%><%= value %>\",\r\n\r\n\t\t\t// String - Template string for single tooltips\r\n\t\t\tmultiTooltipTemplate: \"<%= value %>\",\r\n\r\n\t\t\t// String - Colour behind the legend colour block\r\n\t\t\tmultiTooltipKeyBackground: '#fff',\r\n\r\n\t\t\t// Function - Will fire on animation progression.\r\n\t\t\tonAnimationProgress: function(){},\r\n\r\n\t\t\t// Function - Will fire on animation completion.\r\n\t\t\tonAnimationComplete: function(){}\r\n\r\n\t\t}\r\n\t};\r\n\r\n\t//Create a dictionary of chart types, to allow for extension of existing types\r\n\tChart.types = {};\r\n\r\n\t//Global Chart helpers object for utility methods and classes\r\n\tvar helpers = Chart.helpers = {};\r\n\r\n\t\t//-- Basic js utility methods\r\n\tvar each = helpers.each = function(loopable,callback,self){\r\n\t\t\tvar additionalArgs = Array.prototype.slice.call(arguments, 3);\r\n\t\t\t// Check to see if null or undefined firstly.\r\n\t\t\tif (loopable){\r\n\t\t\t\tif (loopable.length === +loopable.length){\r\n\t\t\t\t\tvar i;\r\n\t\t\t\t\tfor (i=0; i<loopable.length; i++){\r\n\t\t\t\t\t\tcallback.apply(self,[loopable[i], i].concat(additionalArgs));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tfor (var item in loopable){\r\n\t\t\t\t\t\tcallback.apply(self,[loopable[item],item].concat(additionalArgs));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tclone = helpers.clone = function(obj){\r\n\t\t\tvar objClone = {};\r\n\t\t\teach(obj,function(value,key){\r\n\t\t\t\tif (obj.hasOwnProperty(key)) objClone[key] = value;\r\n\t\t\t});\r\n\t\t\treturn objClone;\r\n\t\t},\r\n\t\textend = helpers.extend = function(base){\r\n\t\t\teach(Array.prototype.slice.call(arguments,1), function(extensionObject) {\r\n\t\t\t\teach(extensionObject,function(value,key){\r\n\t\t\t\t\tif (extensionObject.hasOwnProperty(key)) base[key] = value;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\treturn base;\r\n\t\t},\r\n\t\tmerge = helpers.merge = function(base,master){\r\n\t\t\t//Merge properties in left object over to a shallow clone of object right.\r\n\t\t\tvar args = Array.prototype.slice.call(arguments,0);\r\n\t\t\targs.unshift({});\r\n\t\t\treturn extend.apply(null, args);\r\n\t\t},\r\n\t\tindexOf = helpers.indexOf = function(arrayToSearch, item){\r\n\t\t\tif (Array.prototype.indexOf) {\r\n\t\t\t\treturn arrayToSearch.indexOf(item);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tfor (var i = 0; i < arrayToSearch.length; i++) {\r\n\t\t\t\t\tif (arrayToSearch[i] === item) return i;\r\n\t\t\t\t}\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t},\r\n\t\twhere = helpers.where = function(collection, filterCallback){\r\n\t\t\tvar filtered = [];\r\n\r\n\t\t\thelpers.each(collection, function(item){\r\n\t\t\t\tif (filterCallback(item)){\r\n\t\t\t\t\tfiltered.push(item);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\treturn filtered;\r\n\t\t},\r\n\t\tfindNextWhere = helpers.findNextWhere = function(arrayToSearch, filterCallback, startIndex){\r\n\t\t\t// Default to start of the array\r\n\t\t\tif (!startIndex){\r\n\t\t\t\tstartIndex = -1;\r\n\t\t\t}\r\n\t\t\tfor (var i = startIndex + 1; i < arrayToSearch.length; i++) {\r\n\t\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\t\tif (filterCallback(currentItem)){\r\n\t\t\t\t\treturn currentItem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tfindPreviousWhere = helpers.findPreviousWhere = function(arrayToSearch, filterCallback, startIndex){\r\n\t\t\t// Default to end of the array\r\n\t\t\tif (!startIndex){\r\n\t\t\t\tstartIndex = arrayToSearch.length;\r\n\t\t\t}\r\n\t\t\tfor (var i = startIndex - 1; i >= 0; i--) {\r\n\t\t\t\tvar currentItem = arrayToSearch[i];\r\n\t\t\t\tif (filterCallback(currentItem)){\r\n\t\t\t\t\treturn currentItem;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tinherits = helpers.inherits = function(extensions){\r\n\t\t\t//Basic javascript inheritance based on the model created in Backbone.js\r\n\t\t\tvar parent = this;\r\n\t\t\tvar ChartElement = (extensions && extensions.hasOwnProperty(\"constructor\")) ? extensions.constructor : function(){ return parent.apply(this, arguments); };\r\n\r\n\t\t\tvar Surrogate = function(){ this.constructor = ChartElement;};\r\n\t\t\tSurrogate.prototype = parent.prototype;\r\n\t\t\tChartElement.prototype = new Surrogate();\r\n\r\n\t\t\tChartElement.extend = inherits;\r\n\r\n\t\t\tif (extensions) extend(ChartElement.prototype, extensions);\r\n\r\n\t\t\tChartElement.__super__ = parent.prototype;\r\n\r\n\t\t\treturn ChartElement;\r\n\t\t},\r\n\t\tnoop = helpers.noop = function(){},\r\n\t\tuid = helpers.uid = (function(){\r\n\t\t\tvar id=0;\r\n\t\t\treturn function(){\r\n\t\t\t\treturn \"chart-\" + id++;\r\n\t\t\t};\r\n\t\t})(),\r\n\t\twarn = helpers.warn = function(str){\r\n\t\t\t//Method for warning of errors\r\n\t\t\tif (window.console && typeof window.console.warn == \"function\") console.warn(str);\r\n\t\t},\r\n\t\tamd = helpers.amd = (typeof define == 'function' && define.amd),\r\n\t\t//-- Math methods\r\n\t\tisNumber = helpers.isNumber = function(n){\r\n\t\t\treturn !isNaN(parseFloat(n)) && isFinite(n);\r\n\t\t},\r\n\t\tmax = helpers.max = function(array){\r\n\t\t\treturn Math.max.apply( Math, array );\r\n\t\t},\r\n\t\tmin = helpers.min = function(array){\r\n\t\t\treturn Math.min.apply( Math, array );\r\n\t\t},\r\n\t\tcap = helpers.cap = function(valueToCap,maxValue,minValue){\r\n\t\t\tif(isNumber(maxValue)) {\r\n\t\t\t\tif( valueToCap > maxValue ) {\r\n\t\t\t\t\treturn maxValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse if(isNumber(minValue)){\r\n\t\t\t\tif ( valueToCap < minValue ){\r\n\t\t\t\t\treturn minValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn valueToCap;\r\n\t\t},\r\n\t\tgetDecimalPlaces = helpers.getDecimalPlaces = function(num){\r\n\t\t\tif (num%1!==0 && isNumber(num)){\r\n\t\t\t\treturn num.toString().split(\".\")[1].length;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn 0;\r\n\t\t\t}\r\n\t\t},\r\n\t\ttoRadians = helpers.radians = function(degrees){\r\n\t\t\treturn degrees * (Math.PI/180);\r\n\t\t},\r\n\t\t// Gets the angle from vertical upright to the point about a centre.\r\n\t\tgetAngleFromPoint = helpers.getAngleFromPoint = function(centrePoint, anglePoint){\r\n\t\t\tvar distanceFromXCenter = anglePoint.x - centrePoint.x,\r\n\t\t\t\tdistanceFromYCenter = anglePoint.y - centrePoint.y,\r\n\t\t\t\tradialDistanceFromCenter = Math.sqrt( distanceFromXCenter * distanceFromXCenter + distanceFromYCenter * distanceFromYCenter);\r\n\r\n\r\n\t\t\tvar angle = Math.PI * 2 + Math.atan2(distanceFromYCenter, distanceFromXCenter);\r\n\r\n\t\t\t//If the segment is in the top left quadrant, we need to add another rotation to the angle\r\n\t\t\tif (distanceFromXCenter < 0 && distanceFromYCenter < 0){\r\n\t\t\t\tangle += Math.PI*2;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tangle: angle,\r\n\t\t\t\tdistance: radialDistanceFromCenter\r\n\t\t\t};\r\n\t\t},\r\n\t\taliasPixel = helpers.aliasPixel = function(pixelWidth){\r\n\t\t\treturn (pixelWidth % 2 === 0) ? 0 : 0.5;\r\n\t\t},\r\n\t\tsplineCurve = helpers.splineCurve = function(FirstPoint,MiddlePoint,AfterPoint,t){\r\n\t\t\t//Props to Rob Spencer at scaled innovation for his post on splining between points\r\n\t\t\t//http://scaledinnovation.com/analytics/splines/aboutSplines.html\r\n\t\t\tvar d01=Math.sqrt(Math.pow(MiddlePoint.x-FirstPoint.x,2)+Math.pow(MiddlePoint.y-FirstPoint.y,2)),\r\n\t\t\t\td12=Math.sqrt(Math.pow(AfterPoint.x-MiddlePoint.x,2)+Math.pow(AfterPoint.y-MiddlePoint.y,2)),\r\n\t\t\t\tfa=t*d01/(d01+d12),// scaling factor for triangle Ta\r\n\t\t\t\tfb=t*d12/(d01+d12);\r\n\t\t\treturn {\r\n\t\t\t\tinner : {\r\n\t\t\t\t\tx : MiddlePoint.x-fa*(AfterPoint.x-FirstPoint.x),\r\n\t\t\t\t\ty : MiddlePoint.y-fa*(AfterPoint.y-FirstPoint.y)\r\n\t\t\t\t},\r\n\t\t\t\touter : {\r\n\t\t\t\t\tx: MiddlePoint.x+fb*(AfterPoint.x-FirstPoint.x),\r\n\t\t\t\t\ty : MiddlePoint.y+fb*(AfterPoint.y-FirstPoint.y)\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\tcalculateOrderOfMagnitude = helpers.calculateOrderOfMagnitude = function(val){\r\n\t\t\treturn Math.floor(Math.log(val) / Math.LN10);\r\n\t\t},\r\n\t\tcalculateScaleRange = helpers.calculateScaleRange = function(valuesArray, drawingSize, textSize, startFromZero, integersOnly){\r\n\r\n\t\t\t//Set a minimum step of two - a point at the top of the graph, and a point at the base\r\n\t\t\tvar minSteps = 2,\r\n\t\t\t\tmaxSteps = Math.floor(drawingSize/(textSize * 1.5)),\r\n\t\t\t\tskipFitting = (minSteps >= maxSteps);\r\n\r\n\t\t\tvar maxValue = max(valuesArray),\r\n\t\t\t\tminValue = min(valuesArray);\r\n\r\n\t\t\t// We need some degree of seperation here to calculate the scales if all the values are the same\r\n\t\t\t// Adding/minusing 0.5 will give us a range of 1.\r\n\t\t\tif (maxValue === minValue){\r\n\t\t\t\tmaxValue += 0.5;\r\n\t\t\t\t// So we don't end up with a graph with a negative start value if we've said always start from zero\r\n\t\t\t\tif (minValue >= 0.5 && !startFromZero){\r\n\t\t\t\t\tminValue -= 0.5;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\t// Make up a whole number above the values\r\n\t\t\t\t\tmaxValue += 0.5;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar\tvalueRange = Math.abs(maxValue - minValue),\r\n\t\t\t\trangeOrderOfMagnitude = calculateOrderOfMagnitude(valueRange),\r\n\t\t\t\tgraphMax = Math.ceil(maxValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\r\n\t\t\t\tgraphMin = (startFromZero) ? 0 : Math.floor(minValue / (1 * Math.pow(10, rangeOrderOfMagnitude))) * Math.pow(10, rangeOrderOfMagnitude),\r\n\t\t\t\tgraphRange = graphMax - graphMin,\r\n\t\t\t\tstepValue = Math.pow(10, rangeOrderOfMagnitude),\r\n\t\t\t\tnumberOfSteps = Math.round(graphRange / stepValue);\r\n\r\n\t\t\t//If we have more space on the graph we'll use it to give more definition to the data\r\n\t\t\twhile((numberOfSteps > maxSteps || (numberOfSteps * 2) < maxSteps) && !skipFitting) {\r\n\t\t\t\tif(numberOfSteps > maxSteps){\r\n\t\t\t\t\tstepValue *=2;\r\n\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\r\n\t\t\t\t\t// Don't ever deal with a decimal number of steps - cancel fitting and just use the minimum number of steps.\r\n\t\t\t\t\tif (numberOfSteps % 1 !== 0){\r\n\t\t\t\t\t\tskipFitting = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t//We can fit in double the amount of scale points on the scale\r\n\t\t\t\telse{\r\n\t\t\t\t\t//If user has declared ints only, and the step value isn't a decimal\r\n\t\t\t\t\tif (integersOnly && rangeOrderOfMagnitude >= 0){\r\n\t\t\t\t\t\t//If the user has said integers only, we need to check that making the scale more granular wouldn't make it a float\r\n\t\t\t\t\t\tif(stepValue/2 % 1 === 0){\r\n\t\t\t\t\t\t\tstepValue /=2;\r\n\t\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t//If it would make it a float break out of the loop\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//If the scale doesn't have to be an int, make the scale more granular anyway.\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tstepValue /=2;\r\n\t\t\t\t\t\tnumberOfSteps = Math.round(graphRange/stepValue);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif (skipFitting){\r\n\t\t\t\tnumberOfSteps = minSteps;\r\n\t\t\t\tstepValue = graphRange / numberOfSteps;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tsteps : numberOfSteps,\r\n\t\t\t\tstepValue : stepValue,\r\n\t\t\t\tmin : graphMin,\r\n\t\t\t\tmax\t: graphMin + (numberOfSteps * stepValue)\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\t/* jshint ignore:start */\r\n\t\t// Blows up jshint errors based on the new Function constructor\r\n\t\t//Templating methods\r\n\t\t//Javascript micro templating by John Resig - source at http://ejohn.org/blog/javascript-micro-templating/\r\n\t\ttemplate = helpers.template = function(templateString, valuesObject){\r\n\r\n\t\t\t// If templateString is function rather than string-template - call the function for valuesObject\r\n\r\n\t\t\tif(templateString instanceof Function){\r\n\t\t\t \treturn templateString(valuesObject);\r\n\t\t \t}\r\n\r\n\t\t\tvar cache = {};\r\n\t\t\tfunction tmpl(str, data){\r\n\t\t\t\t// Figure out if we're getting a template, or if we need to\r\n\t\t\t\t// load the template - and be sure to cache the result.\r\n\t\t\t\tvar fn = !/\\W/.test(str) ?\r\n\t\t\t\tcache[str] = cache[str] :\r\n\r\n\t\t\t\t// Generate a reusable function that will serve as a template\r\n\t\t\t\t// generator (and which will be cached).\r\n\t\t\t\tnew Function(\"obj\",\r\n\t\t\t\t\t\"var p=[],print=function(){p.push.apply(p,arguments);};\" +\r\n\r\n\t\t\t\t\t// Introduce the data as local variables using with(){}\r\n\t\t\t\t\t\"with(obj){p.push('\" +\r\n\r\n\t\t\t\t\t// Convert the template into pure JavaScript\r\n\t\t\t\t\tstr\r\n\t\t\t\t\t\t.replace(/[\\r\\t\\n]/g, \" \")\r\n\t\t\t\t\t\t.split(\"<%\").join(\"\\t\")\r\n\t\t\t\t\t\t.replace(/((^|%>)[^\\t]*)'/g, \"$1\\r\")\r\n\t\t\t\t\t\t.replace(/\\t=(.*?)%>/g, \"',$1,'\")\r\n\t\t\t\t\t\t.split(\"\\t\").join(\"');\")\r\n\t\t\t\t\t\t.split(\"%>\").join(\"p.push('\")\r\n\t\t\t\t\t\t.split(\"\\r\").join(\"\\\\'\") +\r\n\t\t\t\t\t\"');}return p.join('');\"\r\n\t\t\t\t);\r\n\r\n\t\t\t\t// Provide some basic currying to the user\r\n\t\t\t\treturn data ? fn( data ) : fn;\r\n\t\t\t}\r\n\t\t\treturn tmpl(templateString,valuesObject);\r\n\t\t},\r\n\t\t/* jshint ignore:end */\r\n\t\tgenerateLabels = helpers.generateLabels = function(templateString,numberOfSteps,graphMin,stepValue){\r\n\t\t\tvar labelsArray = new Array(numberOfSteps);\r\n\t\t\tif (labelTemplateString){\r\n\t\t\t\teach(labelsArray,function(val,index){\r\n\t\t\t\t\tlabelsArray[index] = template(templateString,{value: (graphMin + (stepValue*(index+1)))});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\treturn labelsArray;\r\n\t\t},\r\n\t\t//--Animation methods\r\n\t\t//Easing functions adapted from Robert Penner's easing equations\r\n\t\t//http://www.robertpenner.com/easing/\r\n\t\teasingEffects = helpers.easingEffects = {\r\n\t\t\tlinear: function (t) {\r\n\t\t\t\treturn t;\r\n\t\t\t},\r\n\t\t\teaseInQuad: function (t) {\r\n\t\t\t\treturn t * t;\r\n\t\t\t},\r\n\t\t\teaseOutQuad: function (t) {\r\n\t\t\t\treturn -1 * t * (t - 2);\r\n\t\t\t},\r\n\t\t\teaseInOutQuad: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t;\r\n\t\t\t\treturn -1 / 2 * ((--t) * (t - 2) - 1);\r\n\t\t\t},\r\n\t\t\teaseInCubic: function (t) {\r\n\t\t\t\treturn t * t * t;\r\n\t\t\t},\r\n\t\t\teaseOutCubic: function (t) {\r\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutCubic: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t * t;\r\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t + 2);\r\n\t\t\t},\r\n\t\t\teaseInQuart: function (t) {\r\n\t\t\t\treturn t * t * t * t;\r\n\t\t\t},\r\n\t\t\teaseOutQuart: function (t) {\r\n\t\t\t\treturn -1 * ((t = t / 1 - 1) * t * t * t - 1);\r\n\t\t\t},\r\n\t\t\teaseInOutQuart: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t * t * t;\r\n\t\t\t\treturn -1 / 2 * ((t -= 2) * t * t * t - 2);\r\n\t\t\t},\r\n\t\t\teaseInQuint: function (t) {\r\n\t\t\t\treturn 1 * (t /= 1) * t * t * t * t;\r\n\t\t\t},\r\n\t\t\teaseOutQuint: function (t) {\r\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * t * t * t + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutQuint: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * t * t * t * t * t;\r\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * t * t * t + 2);\r\n\t\t\t},\r\n\t\t\teaseInSine: function (t) {\r\n\t\t\t\treturn -1 * Math.cos(t / 1 * (Math.PI / 2)) + 1;\r\n\t\t\t},\r\n\t\t\teaseOutSine: function (t) {\r\n\t\t\t\treturn 1 * Math.sin(t / 1 * (Math.PI / 2));\r\n\t\t\t},\r\n\t\t\teaseInOutSine: function (t) {\r\n\t\t\t\treturn -1 / 2 * (Math.cos(Math.PI * t / 1) - 1);\r\n\t\t\t},\r\n\t\t\teaseInExpo: function (t) {\r\n\t\t\t\treturn (t === 0) ? 1 : 1 * Math.pow(2, 10 * (t / 1 - 1));\r\n\t\t\t},\r\n\t\t\teaseOutExpo: function (t) {\r\n\t\t\t\treturn (t === 1) ? 1 : 1 * (-Math.pow(2, -10 * t / 1) + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutExpo: function (t) {\r\n\t\t\t\tif (t === 0) return 0;\r\n\t\t\t\tif (t === 1) return 1;\r\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * Math.pow(2, 10 * (t - 1));\r\n\t\t\t\treturn 1 / 2 * (-Math.pow(2, -10 * --t) + 2);\r\n\t\t\t},\r\n\t\t\teaseInCirc: function (t) {\r\n\t\t\t\tif (t >= 1) return t;\r\n\t\t\t\treturn -1 * (Math.sqrt(1 - (t /= 1) * t) - 1);\r\n\t\t\t},\r\n\t\t\teaseOutCirc: function (t) {\r\n\t\t\t\treturn 1 * Math.sqrt(1 - (t = t / 1 - 1) * t);\r\n\t\t\t},\r\n\t\t\teaseInOutCirc: function (t) {\r\n\t\t\t\tif ((t /= 1 / 2) < 1) return -1 / 2 * (Math.sqrt(1 - t * t) - 1);\r\n\t\t\t\treturn 1 / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1);\r\n\t\t\t},\r\n\t\t\teaseInElastic: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tvar p = 0;\r\n\t\t\t\tvar a = 1;\r\n\t\t\t\tif (t === 0) return 0;\r\n\t\t\t\tif ((t /= 1) == 1) return 1;\r\n\t\t\t\tif (!p) p = 1 * 0.3;\r\n\t\t\t\tif (a < Math.abs(1)) {\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\ts = p / 4;\r\n\t\t\t\t} else s = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t\t\treturn -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\r\n\t\t\t},\r\n\t\t\teaseOutElastic: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tvar p = 0;\r\n\t\t\t\tvar a = 1;\r\n\t\t\t\tif (t === 0) return 0;\r\n\t\t\t\tif ((t /= 1) == 1) return 1;\r\n\t\t\t\tif (!p) p = 1 * 0.3;\r\n\t\t\t\tif (a < Math.abs(1)) {\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\ts = p / 4;\r\n\t\t\t\t} else s = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t\t\treturn a * Math.pow(2, -10 * t) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) + 1;\r\n\t\t\t},\r\n\t\t\teaseInOutElastic: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tvar p = 0;\r\n\t\t\t\tvar a = 1;\r\n\t\t\t\tif (t === 0) return 0;\r\n\t\t\t\tif ((t /= 1 / 2) == 2) return 1;\r\n\t\t\t\tif (!p) p = 1 * (0.3 * 1.5);\r\n\t\t\t\tif (a < Math.abs(1)) {\r\n\t\t\t\t\ta = 1;\r\n\t\t\t\t\ts = p / 4;\r\n\t\t\t\t} else s = p / (2 * Math.PI) * Math.asin(1 / a);\r\n\t\t\t\tif (t < 1) return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p));\r\n\t\t\t\treturn a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * 1 - s) * (2 * Math.PI) / p) * 0.5 + 1;\r\n\t\t\t},\r\n\t\t\teaseInBack: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\treturn 1 * (t /= 1) * t * ((s + 1) * t - s);\r\n\t\t\t},\r\n\t\t\teaseOutBack: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\treturn 1 * ((t = t / 1 - 1) * t * ((s + 1) * t + s) + 1);\r\n\t\t\t},\r\n\t\t\teaseInOutBack: function (t) {\r\n\t\t\t\tvar s = 1.70158;\r\n\t\t\t\tif ((t /= 1 / 2) < 1) return 1 / 2 * (t * t * (((s *= (1.525)) + 1) * t - s));\r\n\t\t\t\treturn 1 / 2 * ((t -= 2) * t * (((s *= (1.525)) + 1) * t + s) + 2);\r\n\t\t\t},\r\n\t\t\teaseInBounce: function (t) {\r\n\t\t\t\treturn 1 - easingEffects.easeOutBounce(1 - t);\r\n\t\t\t},\r\n\t\t\teaseOutBounce: function (t) {\r\n\t\t\t\tif ((t /= 1) < (1 / 2.75)) {\r\n\t\t\t\t\treturn 1 * (7.5625 * t * t);\r\n\t\t\t\t} else if (t < (2 / 2.75)) {\r\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (1.5 / 2.75)) * t + 0.75);\r\n\t\t\t\t} else if (t < (2.5 / 2.75)) {\r\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.25 / 2.75)) * t + 0.9375);\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn 1 * (7.5625 * (t -= (2.625 / 2.75)) * t + 0.984375);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\teaseInOutBounce: function (t) {\r\n\t\t\t\tif (t < 1 / 2) return easingEffects.easeInBounce(t * 2) * 0.5;\r\n\t\t\t\treturn easingEffects.easeOutBounce(t * 2 - 1) * 0.5 + 1 * 0.5;\r\n\t\t\t}\r\n\t\t},\r\n\t\t//Request animation polyfill - http://www.paulirish.com/2011/requestanimationframe-for-smart-animating/\r\n\t\trequestAnimFrame = helpers.requestAnimFrame = (function(){\r\n\t\t\treturn window.requestAnimationFrame ||\r\n\t\t\t\twindow.webkitRequestAnimationFrame ||\r\n\t\t\t\twindow.mozRequestAnimationFrame ||\r\n\t\t\t\twindow.oRequestAnimationFrame ||\r\n\t\t\t\twindow.msRequestAnimationFrame ||\r\n\t\t\t\tfunction(callback) {\r\n\t\t\t\t\treturn window.setTimeout(callback, 1000 / 60);\r\n\t\t\t\t};\r\n\t\t})(),\r\n\t\tcancelAnimFrame = helpers.cancelAnimFrame = (function(){\r\n\t\t\treturn window.cancelAnimationFrame ||\r\n\t\t\t\twindow.webkitCancelAnimationFrame ||\r\n\t\t\t\twindow.mozCancelAnimationFrame ||\r\n\t\t\t\twindow.oCancelAnimationFrame ||\r\n\t\t\t\twindow.msCancelAnimationFrame ||\r\n\t\t\t\tfunction(callback) {\r\n\t\t\t\t\treturn window.clearTimeout(callback, 1000 / 60);\r\n\t\t\t\t};\r\n\t\t})(),\r\n\t\tanimationLoop = helpers.animationLoop = function(callback,totalSteps,easingString,onProgress,onComplete,chartInstance){\r\n\r\n\t\t\tvar currentStep = 0,\r\n\t\t\t\teasingFunction = easingEffects[easingString] || easingEffects.linear;\r\n\r\n\t\t\tvar animationFrame = function(){\r\n\t\t\t\tcurrentStep++;\r\n\t\t\t\tvar stepDecimal = currentStep/totalSteps;\r\n\t\t\t\tvar easeDecimal = easingFunction(stepDecimal);\r\n\r\n\t\t\t\tcallback.call(chartInstance,easeDecimal,stepDecimal, currentStep);\r\n\t\t\t\tonProgress.call(chartInstance,easeDecimal,stepDecimal);\r\n\t\t\t\tif (currentStep < totalSteps){\r\n\t\t\t\t\tchartInstance.animationFrame = requestAnimFrame(animationFrame);\r\n\t\t\t\t} else{\r\n\t\t\t\t\tonComplete.apply(chartInstance);\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t\trequestAnimFrame(animationFrame);\r\n\t\t},\r\n\t\t//-- DOM methods\r\n\t\tgetRelativePosition = helpers.getRelativePosition = function(evt){\r\n\t\t\tvar mouseX, mouseY;\r\n\t\t\tvar e = evt.originalEvent || evt,\r\n\t\t\t\tcanvas = evt.currentTarget || evt.srcElement,\r\n\t\t\t\tboundingRect = canvas.getBoundingClientRect();\r\n\r\n\t\t\tif (e.touches){\r\n\t\t\t\tmouseX = e.touches[0].clientX - boundingRect.left;\r\n\t\t\t\tmouseY = e.touches[0].clientY - boundingRect.top;\r\n\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tmouseX = e.clientX - boundingRect.left;\r\n\t\t\t\tmouseY = e.clientY - boundingRect.top;\r\n\t\t\t}\r\n\r\n\t\t\treturn {\r\n\t\t\t\tx : mouseX,\r\n\t\t\t\ty : mouseY\r\n\t\t\t};\r\n\r\n\t\t},\r\n\t\taddEvent = helpers.addEvent = function(node,eventType,method){\r\n\t\t\tif (node.addEventListener){\r\n\t\t\t\tnode.addEventListener(eventType,method);\r\n\t\t\t} else if (node.attachEvent){\r\n\t\t\t\tnode.attachEvent(\"on\"+eventType, method);\r\n\t\t\t} else {\r\n\t\t\t\tnode[\"on\"+eventType] = method;\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveEvent = helpers.removeEvent = function(node, eventType, handler){\r\n\t\t\tif (node.removeEventListener){\r\n\t\t\t\tnode.removeEventListener(eventType, handler, false);\r\n\t\t\t} else if (node.detachEvent){\r\n\t\t\t\tnode.detachEvent(\"on\"+eventType,handler);\r\n\t\t\t} else{\r\n\t\t\t\tnode[\"on\" + eventType] = noop;\r\n\t\t\t}\r\n\t\t},\r\n\t\tbindEvents = helpers.bindEvents = function(chartInstance, arrayOfEvents, handler){\r\n\t\t\t// Create the events object if it's not already present\r\n\t\t\tif (!chartInstance.events) chartInstance.events = {};\r\n\r\n\t\t\teach(arrayOfEvents,function(eventName){\r\n\t\t\t\tchartInstance.events[eventName] = function(){\r\n\t\t\t\t\thandler.apply(chartInstance, arguments);\r\n\t\t\t\t};\r\n\t\t\t\taddEvent(chartInstance.chart.canvas,eventName,chartInstance.events[eventName]);\r\n\t\t\t});\r\n\t\t},\r\n\t\tunbindEvents = helpers.unbindEvents = function (chartInstance, arrayOfEvents) {\r\n\t\t\teach(arrayOfEvents, function(handler,eventName){\r\n\t\t\t\tremoveEvent(chartInstance.chart.canvas, eventName, handler);\r\n\t\t\t});\r\n\t\t},\r\n\t\tgetMaximumWidth = helpers.getMaximumWidth = function(domNode){\r\n\t\t\tvar container = domNode.parentNode;\r\n\t\t\t// TODO = check cross browser stuff with this.\r\n\t\t\treturn container.clientWidth;\r\n\t\t},\r\n\t\tgetMaximumHeight = helpers.getMaximumHeight = function(domNode){\r\n\t\t\tvar container = domNode.parentNode;\r\n\t\t\t// TODO = check cross browser stuff with this.\r\n\t\t\treturn container.clientHeight;\r\n\t\t},\r\n\t\tgetMaximumSize = helpers.getMaximumSize = helpers.getMaximumWidth, // legacy support\r\n\t\tretinaScale = helpers.retinaScale = function(chart){\r\n\t\t\tvar ctx = chart.ctx,\r\n\t\t\t\twidth = chart.canvas.width,\r\n\t\t\t\theight = chart.canvas.height;\r\n\r\n\t\t\tif (window.devicePixelRatio) {\r\n\t\t\t\tctx.canvas.style.width = width + \"px\";\r\n\t\t\t\tctx.canvas.style.height = height + \"px\";\r\n\t\t\t\tctx.canvas.height = height * window.devicePixelRatio;\r\n\t\t\t\tctx.canvas.width = width * window.devicePixelRatio;\r\n\t\t\t\tctx.scale(window.devicePixelRatio, window.devicePixelRatio);\r\n\t\t\t}\r\n\t\t},\r\n\t\t//-- Canvas methods\r\n\t\tclear = helpers.clear = function(chart){\r\n\t\t\tchart.ctx.clearRect(0,0,chart.width,chart.height);\r\n\t\t},\r\n\t\tfontString = helpers.fontString = function(pixelSize,fontStyle,fontFamily){\r\n\t\t\treturn fontStyle + \" \" + pixelSize+\"px \" + fontFamily;\r\n\t\t},\r\n\t\tlongestText = helpers.longestText = function(ctx,font,arrayOfStrings){\r\n\t\t\tctx.font = font;\r\n\t\t\tvar longest = 0;\r\n\t\t\teach(arrayOfStrings,function(string){\r\n\t\t\t\tvar textWidth = ctx.measureText(string).width;\r\n\t\t\t\tlongest = (textWidth > longest) ? textWidth : longest;\r\n\t\t\t});\r\n\t\t\treturn longest;\r\n\t\t},\r\n\t\tdrawRoundedRectangle = helpers.drawRoundedRectangle = function(ctx,x,y,width,height,radius){\r\n\t\t\tctx.beginPath();\r\n\t\t\tctx.moveTo(x + radius, y);\r\n\t\t\tctx.lineTo(x + width - radius, y);\r\n\t\t\tctx.quadraticCurveTo(x + width, y, x + width, y + radius);\r\n\t\t\tctx.lineTo(x + width, y + height - radius);\r\n\t\t\tctx.quadraticCurveTo(x + width, y + height, x + width - radius, y + height);\r\n\t\t\tctx.lineTo(x + radius, y + height);\r\n\t\t\tctx.quadraticCurveTo(x, y + height, x, y + height - radius);\r\n\t\t\tctx.lineTo(x, y + radius);\r\n\t\t\tctx.quadraticCurveTo(x, y, x + radius, y);\r\n\t\t\tctx.closePath();\r\n\t\t};\r\n\r\n\r\n\t//Store a reference to each instance - allowing us to globally resize chart instances on window resize.\r\n\t//Destroy method on the chart will remove the instance of the chart from this reference.\r\n\tChart.instances = {};\r\n\r\n\tChart.Type = function(data,options,chart){\r\n\t\tthis.options = options;\r\n\t\tthis.chart = chart;\r\n\t\tthis.id = uid();\r\n\t\t//Add the chart instance to the global namespace\r\n\t\tChart.instances[this.id] = this;\r\n\r\n\t\t// Initialize is always called when a chart type is created\r\n\t\t// By default it is a no op, but it should be extended\r\n\t\tif (options.responsive){\r\n\t\t\tthis.resize();\r\n\t\t}\r\n\t\tthis.initialize.call(this,data);\r\n\t};\r\n\r\n\t//Core methods that'll be a part of every chart type\r\n\textend(Chart.Type.prototype,{\r\n\t\tinitialize : function(){return this;},\r\n\t\tclear : function(){\r\n\t\t\tclear(this.chart);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tstop : function(){\r\n\t\t\t// Stops any current animation loop occuring\r\n\t\t\tcancelAnimFrame(this.animationFrame);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tresize : function(callback){\r\n\t\t\tthis.stop();\r\n\t\t\tvar canvas = this.chart.canvas,\r\n\t\t\t\tnewWidth = getMaximumWidth(this.chart.canvas),\r\n\t\t\t\tnewHeight = this.options.maintainAspectRatio ? newWidth / this.chart.aspectRatio : getMaximumHeight(this.chart.canvas);\r\n\r\n\t\t\tcanvas.width = this.chart.width = newWidth;\r\n\t\t\tcanvas.height = this.chart.height = newHeight;\r\n\r\n\t\t\tretinaScale(this.chart);\r\n\r\n\t\t\tif (typeof callback === \"function\"){\r\n\t\t\t\tcallback.apply(this, Array.prototype.slice.call(arguments, 1));\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\treflow : noop,\r\n\t\trender : function(reflow){\r\n\t\t\tif (reflow){\r\n\t\t\t\tthis.reflow();\r\n\t\t\t}\r\n\t\t\tif (this.options.animation && !reflow){\r\n\t\t\t\thelpers.animationLoop(\r\n\t\t\t\t\tthis.draw,\r\n\t\t\t\t\tthis.options.animationSteps,\r\n\t\t\t\t\tthis.options.animationEasing,\r\n\t\t\t\t\tthis.options.onAnimationProgress,\r\n\t\t\t\t\tthis.options.onAnimationComplete,\r\n\t\t\t\t\tthis\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.draw();\r\n\t\t\t\tthis.options.onAnimationComplete.call(this);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tgenerateLegend : function(){\r\n\t\t\treturn template(this.options.legendTemplate,this);\r\n\t\t},\r\n\t\tdestroy : function(){\r\n\t\t\tthis.clear();\r\n\t\t\tunbindEvents(this, this.events);\r\n\t\t\tvar canvas = this.chart.canvas;\r\n\r\n\t\t\t// Reset canvas height/width attributes starts a fresh with the canvas context\r\n\t\t\tcanvas.width = this.chart.width;\r\n\t\t\tcanvas.height = this.chart.height;\r\n\r\n\t\t\t// < IE9 doesn't support removeProperty\r\n\t\t\tif (canvas.style.removeProperty) {\r\n\t\t\t\tcanvas.style.removeProperty('width');\r\n\t\t\t\tcanvas.style.removeProperty('height');\r\n\t\t\t} else {\r\n\t\t\t\tcanvas.style.removeAttribute('width');\r\n\t\t\t\tcanvas.style.removeAttribute('height');\r\n\t\t\t}\r\n\r\n\t\t\tdelete Chart.instances[this.id];\r\n\t\t},\r\n\t\tshowTooltip : function(ChartElements, forceRedraw){\r\n\t\t\t// Only redraw the chart if we've actually changed what we're hovering on.\r\n\t\t\tif (typeof this.activeElements === 'undefined') this.activeElements = [];\r\n\r\n\t\t\tvar isChanged = (function(Elements){\r\n\t\t\t\tvar changed = false;\r\n\r\n\t\t\t\tif (Elements.length !== this.activeElements.length){\r\n\t\t\t\t\tchanged = true;\r\n\t\t\t\t\treturn changed;\r\n\t\t\t\t}\r\n\r\n\t\t\t\teach(Elements, function(element, index){\r\n\t\t\t\t\tif (element !== this.activeElements[index]){\r\n\t\t\t\t\t\tchanged = true;\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\t\t\t\treturn changed;\r\n\t\t\t}).call(this, ChartElements);\r\n\r\n\t\t\tif (!isChanged && !forceRedraw){\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.activeElements = ChartElements;\r\n\t\t\t}\r\n\t\t\tthis.draw();\r\n\t\t\tif(this.options.customTooltips){\r\n\t\t\t\tthis.options.customTooltips(false);\r\n\t\t\t}\r\n\t\t\tif (ChartElements.length > 0){\r\n\t\t\t\t// If we have multiple datasets, show a MultiTooltip for all of the data points at that index\r\n\t\t\t\tif (this.datasets && this.datasets.length > 1) {\r\n\t\t\t\t\tvar dataArray,\r\n\t\t\t\t\t\tdataIndex;\r\n\r\n\t\t\t\t\tfor (var i = this.datasets.length - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tdataArray = this.datasets[i].points || this.datasets[i].bars || this.datasets[i].segments;\r\n\t\t\t\t\t\tdataIndex = indexOf(dataArray, ChartElements[0]);\r\n\t\t\t\t\t\tif (dataIndex !== -1){\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tvar tooltipLabels = [],\r\n\t\t\t\t\t\ttooltipColors = [],\r\n\t\t\t\t\t\tmedianPosition = (function(index) {\r\n\r\n\t\t\t\t\t\t\t// Get all the points at that particular index\r\n\t\t\t\t\t\t\tvar Elements = [],\r\n\t\t\t\t\t\t\t\tdataCollection,\r\n\t\t\t\t\t\t\t\txPositions = [],\r\n\t\t\t\t\t\t\t\tyPositions = [],\r\n\t\t\t\t\t\t\t\txMax,\r\n\t\t\t\t\t\t\t\tyMax,\r\n\t\t\t\t\t\t\t\txMin,\r\n\t\t\t\t\t\t\t\tyMin;\r\n\t\t\t\t\t\t\thelpers.each(this.datasets, function(dataset){\r\n\t\t\t\t\t\t\t\tdataCollection = dataset.points || dataset.bars || dataset.segments;\r\n\t\t\t\t\t\t\t\tif (dataCollection[dataIndex] && dataCollection[dataIndex].hasValue()){\r\n\t\t\t\t\t\t\t\t\tElements.push(dataCollection[dataIndex]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\thelpers.each(Elements, function(element) {\r\n\t\t\t\t\t\t\t\txPositions.push(element.x);\r\n\t\t\t\t\t\t\t\tyPositions.push(element.y);\r\n\r\n\r\n\t\t\t\t\t\t\t\t//Include any colour information about the element\r\n\t\t\t\t\t\t\t\ttooltipLabels.push(helpers.template(this.options.multiTooltipTemplate, element));\r\n\t\t\t\t\t\t\t\ttooltipColors.push({\r\n\t\t\t\t\t\t\t\t\tfill: element._saved.fillColor || element.fillColor,\r\n\t\t\t\t\t\t\t\t\tstroke: element._saved.strokeColor || element.strokeColor\r\n\t\t\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t\t}, this);\r\n\r\n\t\t\t\t\t\t\tyMin = min(yPositions);\r\n\t\t\t\t\t\t\tyMax = max(yPositions);\r\n\r\n\t\t\t\t\t\t\txMin = min(xPositions);\r\n\t\t\t\t\t\t\txMax = max(xPositions);\r\n\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\tx: (xMin > this.chart.width/2) ? xMin : xMax,\r\n\t\t\t\t\t\t\t\ty: (yMin + yMax)/2\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}).call(this, dataIndex);\r\n\r\n\t\t\t\t\tnew Chart.MultiTooltip({\r\n\t\t\t\t\t\tx: medianPosition.x,\r\n\t\t\t\t\t\ty: medianPosition.y,\r\n\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\r\n\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\r\n\t\t\t\t\t\txOffset: this.options.tooltipXOffset,\r\n\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\r\n\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\r\n\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\r\n\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\r\n\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\r\n\t\t\t\t\t\ttitleTextColor: this.options.tooltipTitleFontColor,\r\n\t\t\t\t\t\ttitleFontFamily: this.options.tooltipTitleFontFamily,\r\n\t\t\t\t\t\ttitleFontStyle: this.options.tooltipTitleFontStyle,\r\n\t\t\t\t\t\ttitleFontSize: this.options.tooltipTitleFontSize,\r\n\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\r\n\t\t\t\t\t\tlabels: tooltipLabels,\r\n\t\t\t\t\t\tlegendColors: tooltipColors,\r\n\t\t\t\t\t\tlegendColorBackground : this.options.multiTooltipKeyBackground,\r\n\t\t\t\t\t\ttitle: ChartElements[0].label,\r\n\t\t\t\t\t\tchart: this.chart,\r\n\t\t\t\t\t\tctx: this.chart.ctx,\r\n\t\t\t\t\t\tcustom: this.options.customTooltips\r\n\t\t\t\t\t}).draw();\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\teach(ChartElements, function(Element) {\r\n\t\t\t\t\t\tvar tooltipPosition = Element.tooltipPosition();\r\n\t\t\t\t\t\tnew Chart.Tooltip({\r\n\t\t\t\t\t\t\tx: Math.round(tooltipPosition.x),\r\n\t\t\t\t\t\t\ty: Math.round(tooltipPosition.y),\r\n\t\t\t\t\t\t\txPadding: this.options.tooltipXPadding,\r\n\t\t\t\t\t\t\tyPadding: this.options.tooltipYPadding,\r\n\t\t\t\t\t\t\tfillColor: this.options.tooltipFillColor,\r\n\t\t\t\t\t\t\ttextColor: this.options.tooltipFontColor,\r\n\t\t\t\t\t\t\tfontFamily: this.options.tooltipFontFamily,\r\n\t\t\t\t\t\t\tfontStyle: this.options.tooltipFontStyle,\r\n\t\t\t\t\t\t\tfontSize: this.options.tooltipFontSize,\r\n\t\t\t\t\t\t\tcaretHeight: this.options.tooltipCaretSize,\r\n\t\t\t\t\t\t\tcornerRadius: this.options.tooltipCornerRadius,\r\n\t\t\t\t\t\t\ttext: template(this.options.tooltipTemplate, Element),\r\n\t\t\t\t\t\t\tchart: this.chart,\r\n\t\t\t\t\t\t\tcustom: this.options.customTooltips\r\n\t\t\t\t\t\t}).draw();\r\n\t\t\t\t\t}, this);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\ttoBase64Image : function(){\r\n\t\t\treturn this.chart.canvas.toDataURL.apply(this.chart.canvas, arguments);\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Type.extend = function(extensions){\r\n\r\n\t\tvar parent = this;\r\n\r\n\t\tvar ChartType = function(){\r\n\t\t\treturn parent.apply(this,arguments);\r\n\t\t};\r\n\r\n\t\t//Copy the prototype object of the this class\r\n\t\tChartType.prototype = clone(parent.prototype);\r\n\t\t//Now overwrite some of the properties in the base class with the new extensions\r\n\t\textend(ChartType.prototype, extensions);\r\n\r\n\t\tChartType.extend = Chart.Type.extend;\r\n\r\n\t\tif (extensions.name || parent.prototype.name){\r\n\r\n\t\t\tvar chartName = extensions.name || parent.prototype.name;\r\n\t\t\t//Assign any potential default values of the new chart type\r\n\r\n\t\t\t//If none are defined, we'll use a clone of the chart type this is being extended from.\r\n\t\t\t//I.e. if we extend a line chart, we'll use the defaults from the line chart if our new chart\r\n\t\t\t//doesn't define some defaults of their own.\r\n\r\n\t\t\tvar baseDefaults = (Chart.defaults[parent.prototype.name]) ? clone(Chart.defaults[parent.prototype.name]) : {};\r\n\r\n\t\t\tChart.defaults[chartName] = extend(baseDefaults,extensions.defaults);\r\n\r\n\t\t\tChart.types[chartName] = ChartType;\r\n\r\n\t\t\t//Register this new chart type in the Chart prototype\r\n\t\t\tChart.prototype[chartName] = function(data,options){\r\n\t\t\t\tvar config = merge(Chart.defaults.global, Chart.defaults[chartName], options || {});\r\n\t\t\t\treturn new ChartType(data,config,this);\r\n\t\t\t};\r\n\t\t} else{\r\n\t\t\twarn(\"Name not provided for this chart, so it hasn't been registered\");\r\n\t\t}\r\n\t\treturn parent;\r\n\t};\r\n\r\n\tChart.Element = function(configuration){\r\n\t\textend(this,configuration);\r\n\t\tthis.initialize.apply(this,arguments);\r\n\t\tthis.save();\r\n\t};\r\n\textend(Chart.Element.prototype,{\r\n\t\tinitialize : function(){},\r\n\t\trestore : function(props){\r\n\t\t\tif (!props){\r\n\t\t\t\textend(this,this._saved);\r\n\t\t\t} else {\r\n\t\t\t\teach(props,function(key){\r\n\t\t\t\t\tthis[key] = this._saved[key];\r\n\t\t\t\t},this);\r\n\t\t\t}\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tsave : function(){\r\n\t\t\tthis._saved = clone(this);\r\n\t\t\tdelete this._saved._saved;\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\tupdate : function(newProps){\r\n\t\t\teach(newProps,function(value,key){\r\n\t\t\t\tthis._saved[key] = this[key];\r\n\t\t\t\tthis[key] = value;\r\n\t\t\t},this);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\ttransition : function(props,ease){\r\n\t\t\teach(props,function(value,key){\r\n\t\t\t\tthis[key] = ((value - this._saved[key]) * ease) + this._saved[key];\r\n\t\t\t},this);\r\n\t\t\treturn this;\r\n\t\t},\r\n\t\ttooltipPosition : function(){\r\n\t\t\treturn {\r\n\t\t\t\tx : this.x,\r\n\t\t\t\ty : this.y\r\n\t\t\t};\r\n\t\t},\r\n\t\thasValue: function(){\r\n\t\t\treturn isNumber(this.value);\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Element.extend = inherits;\r\n\r\n\r\n\tChart.Point = Chart.Element.extend({\r\n\t\tdisplay: true,\r\n\t\tinRange: function(chartX,chartY){\r\n\t\t\tvar hitDetectionRange = this.hitDetectionRadius + this.radius;\r\n\t\t\treturn ((Math.pow(chartX-this.x, 2)+Math.pow(chartY-this.y, 2)) < Math.pow(hitDetectionRange,2));\r\n\t\t},\r\n\t\tdraw : function(){\r\n\t\t\tif (this.display){\r\n\t\t\t\tvar ctx = this.ctx;\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\tctx.arc(this.x, this.y, this.radius, 0, Math.PI*2);\r\n\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\tctx.strokeStyle = this.strokeColor;\r\n\t\t\t\tctx.lineWidth = this.strokeWidth;\r\n\r\n\t\t\t\tctx.fillStyle = this.fillColor;\r\n\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//Quick debug for bezier curve splining\r\n\t\t\t//Highlights control points and the line between them.\r\n\t\t\t//Handy for dev - stripped in the min version.\r\n\r\n\t\t\t// ctx.save();\r\n\t\t\t// ctx.fillStyle = \"black\";\r\n\t\t\t// ctx.strokeStyle = \"black\"\r\n\t\t\t// ctx.beginPath();\r\n\t\t\t// ctx.arc(this.controlPoints.inner.x,this.controlPoints.inner.y, 2, 0, Math.PI*2);\r\n\t\t\t// ctx.fill();\r\n\r\n\t\t\t// ctx.beginPath();\r\n\t\t\t// ctx.arc(this.controlPoints.outer.x,this.controlPoints.outer.y, 2, 0, Math.PI*2);\r\n\t\t\t// ctx.fill();\r\n\r\n\t\t\t// ctx.moveTo(this.controlPoints.inner.x,this.controlPoints.inner.y);\r\n\t\t\t// ctx.lineTo(this.x, this.y);\r\n\t\t\t// ctx.lineTo(this.controlPoints.outer.x,this.controlPoints.outer.y);\r\n\t\t\t// ctx.stroke();\r\n\r\n\t\t\t// ctx.restore();\r\n\r\n\r\n\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Arc = Chart.Element.extend({\r\n\t\tinRange : function(chartX,chartY){\r\n\r\n\t\t\tvar pointRelativePosition = helpers.getAngleFromPoint(this, {\r\n\t\t\t\tx: chartX,\r\n\t\t\t\ty: chartY\r\n\t\t\t});\r\n\r\n\t\t\t//Check if within the range of the open/close angle\r\n\t\t\tvar betweenAngles = (pointRelativePosition.angle >= this.startAngle && pointRelativePosition.angle <= this.endAngle),\r\n\t\t\t\twithinRadius = (pointRelativePosition.distance >= this.innerRadius && pointRelativePosition.distance <= this.outerRadius);\r\n\r\n\t\t\treturn (betweenAngles && withinRadius);\r\n\t\t\t//Ensure within the outside of the arc centre, but inside arc outer\r\n\t\t},\r\n\t\ttooltipPosition : function(){\r\n\t\t\tvar centreAngle = this.startAngle + ((this.endAngle - this.startAngle) / 2),\r\n\t\t\t\trangeFromCentre = (this.outerRadius - this.innerRadius) / 2 + this.innerRadius;\r\n\t\t\treturn {\r\n\t\t\t\tx : this.x + (Math.cos(centreAngle) * rangeFromCentre),\r\n\t\t\t\ty : this.y + (Math.sin(centreAngle) * rangeFromCentre)\r\n\t\t\t};\r\n\t\t},\r\n\t\tdraw : function(animationPercent){\r\n\r\n\t\t\tvar easingDecimal = animationPercent || 1;\r\n\r\n\t\t\tvar ctx = this.ctx;\r\n\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\tctx.arc(this.x, this.y, this.outerRadius, this.startAngle, this.endAngle);\r\n\r\n\t\t\tctx.arc(this.x, this.y, this.innerRadius, this.endAngle, this.startAngle, true);\r\n\r\n\t\t\tctx.closePath();\r\n\t\t\tctx.strokeStyle = this.strokeColor;\r\n\t\t\tctx.lineWidth = this.strokeWidth;\r\n\r\n\t\t\tctx.fillStyle = this.fillColor;\r\n\r\n\t\t\tctx.fill();\r\n\t\t\tctx.lineJoin = 'bevel';\r\n\r\n\t\t\tif (this.showStroke){\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Rectangle = Chart.Element.extend({\r\n\t\tdraw : function(){\r\n\t\t\tvar ctx = this.ctx,\r\n\t\t\t\thalfWidth = this.width/2,\r\n\t\t\t\tleftX = this.x - halfWidth,\r\n\t\t\t\trightX = this.x + halfWidth,\r\n\t\t\t\ttop = this.base - (this.base - this.y),\r\n\t\t\t\thalfStroke = this.strokeWidth / 2;\r\n\r\n\t\t\t// Canvas doesn't allow us to stroke inside the width so we can\r\n\t\t\t// adjust the sizes to fit if we're setting a stroke on the line\r\n\t\t\tif (this.showStroke){\r\n\t\t\t\tleftX += halfStroke;\r\n\t\t\t\trightX -= halfStroke;\r\n\t\t\t\ttop += halfStroke;\r\n\t\t\t}\r\n\r\n\t\t\tctx.beginPath();\r\n\r\n\t\t\tctx.fillStyle = this.fillColor;\r\n\t\t\tctx.strokeStyle = this.strokeColor;\r\n\t\t\tctx.lineWidth = this.strokeWidth;\r\n\r\n\t\t\t// It'd be nice to keep this class totally generic to any rectangle\r\n\t\t\t// and simply specify which border to miss out.\r\n\t\t\tctx.moveTo(leftX, this.base);\r\n\t\t\tctx.lineTo(leftX, top);\r\n\t\t\tctx.lineTo(rightX, top);\r\n\t\t\tctx.lineTo(rightX, this.base);\r\n\t\t\tctx.fill();\r\n\t\t\tif (this.showStroke){\r\n\t\t\t\tctx.stroke();\r\n\t\t\t}\r\n\t\t},\r\n\t\theight : function(){\r\n\t\t\treturn this.base - this.y;\r\n\t\t},\r\n\t\tinRange : function(chartX,chartY){\r\n\t\t\treturn (chartX >= this.x - this.width/2 && chartX <= this.x + this.width/2) && (chartY >= this.y && chartY <= this.base);\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Tooltip = Chart.Element.extend({\r\n\t\tdraw : function(){\r\n\r\n\t\t\tvar ctx = this.chart.ctx;\r\n\r\n\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\r\n\r\n\t\t\tthis.xAlign = \"center\";\r\n\t\t\tthis.yAlign = \"above\";\r\n\r\n\t\t\t//Distance between the actual element.y position and the start of the tooltip caret\r\n\t\t\tvar caretPadding = this.caretPadding = 2;\r\n\r\n\t\t\tvar tooltipWidth = ctx.measureText(this.text).width + 2*this.xPadding,\r\n\t\t\t\ttooltipRectHeight = this.fontSize + 2*this.yPadding,\r\n\t\t\t\ttooltipHeight = tooltipRectHeight + this.caretHeight + caretPadding;\r\n\r\n\t\t\tif (this.x + tooltipWidth/2 >this.chart.width){\r\n\t\t\t\tthis.xAlign = \"left\";\r\n\t\t\t} else if (this.x - tooltipWidth/2 < 0){\r\n\t\t\t\tthis.xAlign = \"right\";\r\n\t\t\t}\r\n\r\n\t\t\tif (this.y - tooltipHeight < 0){\r\n\t\t\t\tthis.yAlign = \"below\";\r\n\t\t\t}\r\n\r\n\r\n\t\t\tvar tooltipX = this.x - tooltipWidth/2,\r\n\t\t\t\ttooltipY = this.y - tooltipHeight;\r\n\r\n\t\t\tctx.fillStyle = this.fillColor;\r\n\r\n\t\t\t// Custom Tooltips\r\n\t\t\tif(this.custom){\r\n\t\t\t\tthis.custom(this);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tswitch(this.yAlign)\r\n\t\t\t\t{\r\n\t\t\t\tcase \"above\":\r\n\t\t\t\t\t//Draw a caret above the x/y\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(this.x,this.y - caretPadding);\r\n\t\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y - (caretPadding + this.caretHeight));\r\n\t\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y - (caretPadding + this.caretHeight));\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"below\":\r\n\t\t\t\t\ttooltipY = this.y + caretPadding + this.caretHeight;\r\n\t\t\t\t\t//Draw a caret below the x/y\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(this.x, this.y + caretPadding);\r\n\t\t\t\t\tctx.lineTo(this.x + this.caretHeight, this.y + caretPadding + this.caretHeight);\r\n\t\t\t\t\tctx.lineTo(this.x - this.caretHeight, this.y + caretPadding + this.caretHeight);\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tswitch(this.xAlign)\r\n\t\t\t\t{\r\n\t\t\t\tcase \"left\":\r\n\t\t\t\t\ttooltipX = this.x - tooltipWidth + (this.cornerRadius + this.caretHeight);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase \"right\":\r\n\t\t\t\t\ttooltipX = this.x - (this.cornerRadius + this.caretHeight);\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdrawRoundedRectangle(ctx,tooltipX,tooltipY,tooltipWidth,tooltipRectHeight,this.cornerRadius);\r\n\r\n\t\t\t\tctx.fill();\r\n\r\n\t\t\t\tctx.fillStyle = this.textColor;\r\n\t\t\t\tctx.textAlign = \"center\";\r\n\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\tctx.fillText(this.text, tooltipX + tooltipWidth/2, tooltipY + tooltipRectHeight/2);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tChart.MultiTooltip = Chart.Element.extend({\r\n\t\tinitialize : function(){\r\n\t\t\tthis.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\r\n\r\n\t\t\tthis.titleFont = fontString(this.titleFontSize,this.titleFontStyle,this.titleFontFamily);\r\n\r\n\t\t\tthis.height = (this.labels.length * this.fontSize) + ((this.labels.length-1) * (this.fontSize/2)) + (this.yPadding*2) + this.titleFontSize *1.5;\r\n\r\n\t\t\tthis.ctx.font = this.titleFont;\r\n\r\n\t\t\tvar titleWidth = this.ctx.measureText(this.title).width,\r\n\t\t\t\t//Label has a legend square as well so account for this.\r\n\t\t\t\tlabelWidth = longestText(this.ctx,this.font,this.labels) + this.fontSize + 3,\r\n\t\t\t\tlongestTextWidth = max([labelWidth,titleWidth]);\r\n\r\n\t\t\tthis.width = longestTextWidth + (this.xPadding*2);\r\n\r\n\r\n\t\t\tvar halfHeight = this.height/2;\r\n\r\n\t\t\t//Check to ensure the height will fit on the canvas\r\n\t\t\tif (this.y - halfHeight < 0 ){\r\n\t\t\t\tthis.y = halfHeight;\r\n\t\t\t} else if (this.y + halfHeight > this.chart.height){\r\n\t\t\t\tthis.y = this.chart.height - halfHeight;\r\n\t\t\t}\r\n\r\n\t\t\t//Decide whether to align left or right based on position on canvas\r\n\t\t\tif (this.x > this.chart.width/2){\r\n\t\t\t\tthis.x -= this.xOffset + this.width;\r\n\t\t\t} else {\r\n\t\t\t\tthis.x += this.xOffset;\r\n\t\t\t}\r\n\r\n\r\n\t\t},\r\n\t\tgetLineHeight : function(index){\r\n\t\t\tvar baseLineHeight = this.y - (this.height/2) + this.yPadding,\r\n\t\t\t\tafterTitleIndex = index-1;\r\n\r\n\t\t\t//If the index is zero, we're getting the title\r\n\t\t\tif (index === 0){\r\n\t\t\t\treturn baseLineHeight + this.titleFontSize/2;\r\n\t\t\t} else{\r\n\t\t\t\treturn baseLineHeight + ((this.fontSize*1.5*afterTitleIndex) + this.fontSize/2) + this.titleFontSize * 1.5;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tdraw : function(){\r\n\t\t\t// Custom Tooltips\r\n\t\t\tif(this.custom){\r\n\t\t\t\tthis.custom(this);\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tdrawRoundedRectangle(this.ctx,this.x,this.y - this.height/2,this.width,this.height,this.cornerRadius);\r\n\t\t\t\tvar ctx = this.ctx;\r\n\t\t\t\tctx.fillStyle = this.fillColor;\r\n\t\t\t\tctx.fill();\r\n\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\tctx.textAlign = \"left\";\r\n\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\tctx.fillStyle = this.titleTextColor;\r\n\t\t\t\tctx.font = this.titleFont;\r\n\r\n\t\t\t\tctx.fillText(this.title,this.x + this.xPadding, this.getLineHeight(0));\r\n\r\n\t\t\t\tctx.font = this.font;\r\n\t\t\t\thelpers.each(this.labels,function(label,index){\r\n\t\t\t\t\tctx.fillStyle = this.textColor;\r\n\t\t\t\t\tctx.fillText(label,this.x + this.xPadding + this.fontSize + 3, this.getLineHeight(index + 1));\r\n\r\n\t\t\t\t\t//A bit gnarly, but clearing this rectangle breaks when using explorercanvas (clears whole canvas)\r\n\t\t\t\t\t//ctx.clearRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\r\n\t\t\t\t\t//Instead we'll make a white filled block to put the legendColour palette over.\r\n\r\n\t\t\t\t\tctx.fillStyle = this.legendColorBackground;\r\n\t\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\r\n\r\n\t\t\t\t\tctx.fillStyle = this.legendColors[index].fill;\r\n\t\t\t\t\tctx.fillRect(this.x + this.xPadding, this.getLineHeight(index + 1) - this.fontSize/2, this.fontSize, this.fontSize);\r\n\r\n\r\n\t\t\t\t},this);\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\tChart.Scale = Chart.Element.extend({\r\n\t\tinitialize : function(){\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\tbuildYLabels : function(){\r\n\t\t\tthis.yLabels = [];\r\n\r\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\r\n\r\n\t\t\tfor (var i=0; i<=this.steps; i++){\r\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\r\n\t\t\t}\r\n\t\t\tthis.yLabelWidth = (this.display && this.showLabels) ? longestText(this.ctx,this.font,this.yLabels) : 0;\r\n\t\t},\r\n\t\taddXLabel : function(label){\r\n\t\t\tthis.xLabels.push(label);\r\n\t\t\tthis.valuesCount++;\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\tremoveXLabel : function(){\r\n\t\t\tthis.xLabels.shift();\r\n\t\t\tthis.valuesCount--;\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\t// Fitting loop to rotate x Labels and figure out what fits there, and also calculate how many Y steps to use\r\n\t\tfit: function(){\r\n\t\t\t// First we need the width of the yLabels, assuming the xLabels aren't rotated\r\n\r\n\t\t\t// To do that we need the base line at the top and base of the chart, assuming there is no x label rotation\r\n\t\t\tthis.startPoint = (this.display) ? this.fontSize : 0;\r\n\t\t\tthis.endPoint = (this.display) ? this.height - (this.fontSize * 1.5) - 5 : this.height; // -5 to pad labels\r\n\r\n\t\t\t// Apply padding settings to the start and end point.\r\n\t\t\tthis.startPoint += this.padding;\r\n\t\t\tthis.endPoint -= this.padding;\r\n\r\n\t\t\t// Cache the starting height, so can determine if we need to recalculate the scale yAxis\r\n\t\t\tvar cachedHeight = this.endPoint - this.startPoint,\r\n\t\t\t\tcachedYLabelWidth;\r\n\r\n\t\t\t// Build the current yLabels so we have an idea of what size they'll be to start\r\n\t\t\t/*\r\n\t\t\t *\tThis sets what is returned from calculateScaleRange as static properties of this class:\r\n\t\t\t *\r\n\t\t\t\tthis.steps;\r\n\t\t\t\tthis.stepValue;\r\n\t\t\t\tthis.min;\r\n\t\t\t\tthis.max;\r\n\t\t\t *\r\n\t\t\t */\r\n\t\t\tthis.calculateYRange(cachedHeight);\r\n\r\n\t\t\t// With these properties set we can now build the array of yLabels\r\n\t\t\t// and also the width of the largest yLabel\r\n\t\t\tthis.buildYLabels();\r\n\r\n\t\t\tthis.calculateXLabelRotation();\r\n\r\n\t\t\twhile((cachedHeight > this.endPoint - this.startPoint)){\r\n\t\t\t\tcachedHeight = this.endPoint - this.startPoint;\r\n\t\t\t\tcachedYLabelWidth = this.yLabelWidth;\r\n\r\n\t\t\t\tthis.calculateYRange(cachedHeight);\r\n\t\t\t\tthis.buildYLabels();\r\n\r\n\t\t\t\t// Only go through the xLabel loop again if the yLabel width has changed\r\n\t\t\t\tif (cachedYLabelWidth < this.yLabelWidth){\r\n\t\t\t\t\tthis.calculateXLabelRotation();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcalculateXLabelRotation : function(){\r\n\t\t\t//Get the width of each grid by calculating the difference\r\n\t\t\t//between x offsets between 0 and 1.\r\n\r\n\t\t\tthis.ctx.font = this.font;\r\n\r\n\t\t\tvar firstWidth = this.ctx.measureText(this.xLabels[0]).width,\r\n\t\t\t\tlastWidth = this.ctx.measureText(this.xLabels[this.xLabels.length - 1]).width,\r\n\t\t\t\tfirstRotated,\r\n\t\t\t\tlastRotated;\r\n\r\n\r\n\t\t\tthis.xScalePaddingRight = lastWidth/2 + 3;\r\n\t\t\tthis.xScalePaddingLeft = (firstWidth/2 > this.yLabelWidth + 10) ? firstWidth/2 : this.yLabelWidth + 10;\r\n\r\n\t\t\tthis.xLabelRotation = 0;\r\n\t\t\tif (this.display){\r\n\t\t\t\tvar originalLabelWidth = longestText(this.ctx,this.font,this.xLabels),\r\n\t\t\t\t\tcosRotation,\r\n\t\t\t\t\tfirstRotatedWidth;\r\n\t\t\t\tthis.xLabelWidth = originalLabelWidth;\r\n\t\t\t\t//Allow 3 pixels x2 padding either side for label readability\r\n\t\t\t\tvar xGridWidth = Math.floor(this.calculateX(1) - this.calculateX(0)) - 6;\r\n\r\n\t\t\t\t//Max label rotate should be 90 - also act as a loop counter\r\n\t\t\t\twhile ((this.xLabelWidth > xGridWidth && this.xLabelRotation === 0) || (this.xLabelWidth > xGridWidth && this.xLabelRotation <= 90 && this.xLabelRotation > 0)){\r\n\t\t\t\t\tcosRotation = Math.cos(toRadians(this.xLabelRotation));\r\n\r\n\t\t\t\t\tfirstRotated = cosRotation * firstWidth;\r\n\t\t\t\t\tlastRotated = cosRotation * lastWidth;\r\n\r\n\t\t\t\t\t// We're right aligning the text now.\r\n\t\t\t\t\tif (firstRotated + this.fontSize / 2 > this.yLabelWidth + 8){\r\n\t\t\t\t\t\tthis.xScalePaddingLeft = firstRotated + this.fontSize / 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.xScalePaddingRight = this.fontSize/2;\r\n\r\n\r\n\t\t\t\t\tthis.xLabelRotation++;\r\n\t\t\t\t\tthis.xLabelWidth = cosRotation * originalLabelWidth;\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif (this.xLabelRotation > 0){\r\n\t\t\t\t\tthis.endPoint -= Math.sin(toRadians(this.xLabelRotation))*originalLabelWidth + 3;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse{\r\n\t\t\t\tthis.xLabelWidth = 0;\r\n\t\t\t\tthis.xScalePaddingRight = this.padding;\r\n\t\t\t\tthis.xScalePaddingLeft = this.padding;\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\t// Needs to be overidden in each Chart type\r\n\t\t// Otherwise we need to pass all the data into the scale class\r\n\t\tcalculateYRange: noop,\r\n\t\tdrawingArea: function(){\r\n\t\t\treturn this.startPoint - this.endPoint;\r\n\t\t},\r\n\t\tcalculateY : function(value){\r\n\t\t\tvar scalingFactor = this.drawingArea() / (this.min - this.max);\r\n\t\t\treturn this.endPoint - (scalingFactor * (value - this.min));\r\n\t\t},\r\n\t\tcalculateX : function(index){\r\n\t\t\tvar isRotated = (this.xLabelRotation > 0),\r\n\t\t\t\t// innerWidth = (this.offsetGridLines) ? this.width - offsetLeft - this.padding : this.width - (offsetLeft + halfLabelWidth * 2) - this.padding,\r\n\t\t\t\tinnerWidth = this.width - (this.xScalePaddingLeft + this.xScalePaddingRight),\r\n\t\t\t\tvalueWidth = innerWidth/Math.max((this.valuesCount - ((this.offsetGridLines) ? 0 : 1)), 1),\r\n\t\t\t\tvalueOffset = (valueWidth * index) + this.xScalePaddingLeft;\r\n\r\n\t\t\tif (this.offsetGridLines){\r\n\t\t\t\tvalueOffset += (valueWidth/2);\r\n\t\t\t}\r\n\r\n\t\t\treturn Math.round(valueOffset);\r\n\t\t},\r\n\t\tupdate : function(newProps){\r\n\t\t\thelpers.extend(this, newProps);\r\n\t\t\tthis.fit();\r\n\t\t},\r\n\t\tdraw : function(){\r\n\t\t\tvar ctx = this.ctx,\r\n\t\t\t\tyLabelGap = (this.endPoint - this.startPoint) / this.steps,\r\n\t\t\t\txStart = Math.round(this.xScalePaddingLeft);\r\n\t\t\tif (this.display){\r\n\t\t\t\tctx.fillStyle = this.textColor;\r\n\t\t\t\tctx.font = this.font;\r\n\t\t\t\teach(this.yLabels,function(labelString,index){\r\n\t\t\t\t\tvar yLabelCenter = this.endPoint - (yLabelGap * index),\r\n\t\t\t\t\t\tlinePositionY = Math.round(yLabelCenter),\r\n\t\t\t\t\t\tdrawHorizontalLine = this.showHorizontalLines;\r\n\r\n\t\t\t\t\tctx.textAlign = \"right\";\r\n\t\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\t\tif (this.showLabels){\r\n\t\t\t\t\t\tctx.fillText(labelString,xStart - 10,yLabelCenter);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// This is X axis, so draw it\r\n\t\t\t\t\tif (index === 0 && !drawHorizontalLine){\r\n\t\t\t\t\t\tdrawHorizontalLine = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (drawHorizontalLine){\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (index > 0){\r\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\r\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// This is the first line on the scale\r\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlinePositionY += helpers.aliasPixel(ctx.lineWidth);\r\n\r\n\t\t\t\t\tif(drawHorizontalLine){\r\n\t\t\t\t\t\tctx.moveTo(xStart, linePositionY);\r\n\t\t\t\t\t\tctx.lineTo(this.width, linePositionY);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(xStart - 5, linePositionY);\r\n\t\t\t\t\tctx.lineTo(xStart, linePositionY);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\t},this);\r\n\r\n\t\t\t\teach(this.xLabels,function(label,index){\r\n\t\t\t\t\tvar xPos = this.calculateX(index) + aliasPixel(this.lineWidth),\r\n\t\t\t\t\t\t// Check to see if line/bar here and decide where to place the line\r\n\t\t\t\t\t\tlinePos = this.calculateX(index - (this.offsetGridLines ? 0.5 : 0)) + aliasPixel(this.lineWidth),\r\n\t\t\t\t\t\tisRotated = (this.xLabelRotation > 0),\r\n\t\t\t\t\t\tdrawVerticalLine = this.showVerticalLines;\r\n\r\n\t\t\t\t\t// This is Y axis, so draw it\r\n\t\t\t\t\tif (index === 0 && !drawVerticalLine){\r\n\t\t\t\t\t\tdrawVerticalLine = true;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (drawVerticalLine){\r\n\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (index > 0){\r\n\t\t\t\t\t\t// This is a grid line in the centre, so drop that\r\n\t\t\t\t\t\tctx.lineWidth = this.gridLineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.gridLineColor;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// This is the first line on the scale\r\n\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (drawVerticalLine){\r\n\t\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\r\n\t\t\t\t\t\tctx.lineTo(linePos,this.startPoint - 3);\r\n\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\r\n\r\n\t\t\t\t\t// Small lines at the bottom of the base grid line\r\n\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\tctx.moveTo(linePos,this.endPoint);\r\n\t\t\t\t\tctx.lineTo(linePos,this.endPoint + 5);\r\n\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\tctx.closePath();\r\n\r\n\t\t\t\t\tctx.save();\r\n\t\t\t\t\tctx.translate(xPos,(isRotated) ? this.endPoint + 12 : this.endPoint + 8);\r\n\t\t\t\t\tctx.rotate(toRadians(this.xLabelRotation)*-1);\r\n\t\t\t\t\tctx.font = this.font;\r\n\t\t\t\t\tctx.textAlign = (isRotated) ? \"right\" : \"center\";\r\n\t\t\t\t\tctx.textBaseline = (isRotated) ? \"middle\" : \"top\";\r\n\t\t\t\t\tctx.fillText(label, 0, 0);\r\n\t\t\t\t\tctx.restore();\r\n\t\t\t\t},this);\r\n\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tChart.RadialScale = Chart.Element.extend({\r\n\t\tinitialize: function(){\r\n\t\t\tthis.size = min([this.height, this.width]);\r\n\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\r\n\t\t},\r\n\t\tcalculateCenterOffset: function(value){\r\n\t\t\t// Take into account half font size + the yPadding of the top value\r\n\t\t\tvar scalingFactor = this.drawingArea / (this.max - this.min);\r\n\r\n\t\t\treturn (value - this.min) * scalingFactor;\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tif (!this.lineArc){\r\n\t\t\t\tthis.setScaleSize();\r\n\t\t\t} else {\r\n\t\t\t\tthis.drawingArea = (this.display) ? (this.size/2) - (this.fontSize/2 + this.backdropPaddingY) : (this.size/2);\r\n\t\t\t}\r\n\t\t\tthis.buildYLabels();\r\n\t\t},\r\n\t\tbuildYLabels: function(){\r\n\t\t\tthis.yLabels = [];\r\n\r\n\t\t\tvar stepDecimalPlaces = getDecimalPlaces(this.stepValue);\r\n\r\n\t\t\tfor (var i=0; i<=this.steps; i++){\r\n\t\t\t\tthis.yLabels.push(template(this.templateString,{value:(this.min + (i * this.stepValue)).toFixed(stepDecimalPlaces)}));\r\n\t\t\t}\r\n\t\t},\r\n\t\tgetCircumference : function(){\r\n\t\t\treturn ((Math.PI*2) / this.valuesCount);\r\n\t\t},\r\n\t\tsetScaleSize: function(){\r\n\t\t\t/*\r\n\t\t\t * Right, this is really confusing and there is a lot of maths going on here\r\n\t\t\t * The gist of the problem is here: https://gist.github.com/nnnick/696cc9c55f4b0beb8fe9\r\n\t\t\t *\r\n\t\t\t * Reaction: https://dl.dropboxusercontent.com/u/34601363/toomuchscience.gif\r\n\t\t\t *\r\n\t\t\t * Solution:\r\n\t\t\t *\r\n\t\t\t * We assume the radius of the polygon is half the size of the canvas at first\r\n\t\t\t * at each index we check if the text overlaps.\r\n\t\t\t *\r\n\t\t\t * Where it does, we store that angle and that index.\r\n\t\t\t *\r\n\t\t\t * After finding the largest index and angle we calculate how much we need to remove\r\n\t\t\t * from the shape radius to move the point inwards by that x.\r\n\t\t\t *\r\n\t\t\t * We average the left and right distances to get the maximum shape radius that can fit in the box\r\n\t\t\t * along with labels.\r\n\t\t\t *\r\n\t\t\t * Once we have that, we can find the centre point for the chart, by taking the x text protrusion\r\n\t\t\t * on each side, removing that from the size, halving it and adding the left x protrusion width.\r\n\t\t\t *\r\n\t\t\t * This will mean we have a shape fitted to the canvas, as large as it can be with the labels\r\n\t\t\t * and position it in the most space efficient manner\r\n\t\t\t *\r\n\t\t\t * https://dl.dropboxusercontent.com/u/34601363/yeahscience.gif\r\n\t\t\t */\r\n\r\n\r\n\t\t\t// Get maximum radius of the polygon. Either half the height (minus the text width) or half the width.\r\n\t\t\t// Use this to calculate the offset + change. - Make sure L/R protrusion is at least 0 to stop issues with centre points\r\n\t\t\tvar largestPossibleRadius = min([(this.height/2 - this.pointLabelFontSize - 5), this.width/2]),\r\n\t\t\t\tpointPosition,\r\n\t\t\t\ti,\r\n\t\t\t\ttextWidth,\r\n\t\t\t\thalfTextWidth,\r\n\t\t\t\tfurthestRight = this.width,\r\n\t\t\t\tfurthestRightIndex,\r\n\t\t\t\tfurthestRightAngle,\r\n\t\t\t\tfurthestLeft = 0,\r\n\t\t\t\tfurthestLeftIndex,\r\n\t\t\t\tfurthestLeftAngle,\r\n\t\t\t\txProtrusionLeft,\r\n\t\t\t\txProtrusionRight,\r\n\t\t\t\tradiusReductionRight,\r\n\t\t\t\tradiusReductionLeft,\r\n\t\t\t\tmaxWidthRadius;\r\n\t\t\tthis.ctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\r\n\t\t\tfor (i=0;i<this.valuesCount;i++){\r\n\t\t\t\t// 5px to space the text slightly out - similar to what we do in the draw function.\r\n\t\t\t\tpointPosition = this.getPointPosition(i, largestPossibleRadius);\r\n\t\t\t\ttextWidth = this.ctx.measureText(template(this.templateString, { value: this.labels[i] })).width + 5;\r\n\t\t\t\tif (i === 0 || i === this.valuesCount/2){\r\n\t\t\t\t\t// If we're at index zero, or exactly the middle, we're at exactly the top/bottom\r\n\t\t\t\t\t// of the radar chart, so text will be aligned centrally, so we'll half it and compare\r\n\t\t\t\t\t// w/left and right text sizes\r\n\t\t\t\t\thalfTextWidth = textWidth/2;\r\n\t\t\t\t\tif (pointPosition.x + halfTextWidth > furthestRight) {\r\n\t\t\t\t\t\tfurthestRight = pointPosition.x + halfTextWidth;\r\n\t\t\t\t\t\tfurthestRightIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (pointPosition.x - halfTextWidth < furthestLeft) {\r\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - halfTextWidth;\r\n\t\t\t\t\t\tfurthestLeftIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (i < this.valuesCount/2) {\r\n\t\t\t\t\t// Less than half the values means we'll left align the text\r\n\t\t\t\t\tif (pointPosition.x + textWidth > furthestRight) {\r\n\t\t\t\t\t\tfurthestRight = pointPosition.x + textWidth;\r\n\t\t\t\t\t\tfurthestRightIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse if (i > this.valuesCount/2){\r\n\t\t\t\t\t// More than half the values means we'll right align the text\r\n\t\t\t\t\tif (pointPosition.x - textWidth < furthestLeft) {\r\n\t\t\t\t\t\tfurthestLeft = pointPosition.x - textWidth;\r\n\t\t\t\t\t\tfurthestLeftIndex = i;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\txProtrusionLeft = furthestLeft;\r\n\r\n\t\t\txProtrusionRight = Math.ceil(furthestRight - this.width);\r\n\r\n\t\t\tfurthestRightAngle = this.getIndexAngle(furthestRightIndex);\r\n\r\n\t\t\tfurthestLeftAngle = this.getIndexAngle(furthestLeftIndex);\r\n\r\n\t\t\tradiusReductionRight = xProtrusionRight / Math.sin(furthestRightAngle + Math.PI/2);\r\n\r\n\t\t\tradiusReductionLeft = xProtrusionLeft / Math.sin(furthestLeftAngle + Math.PI/2);\r\n\r\n\t\t\t// Ensure we actually need to reduce the size of the chart\r\n\t\t\tradiusReductionRight = (isNumber(radiusReductionRight)) ? radiusReductionRight : 0;\r\n\t\t\tradiusReductionLeft = (isNumber(radiusReductionLeft)) ? radiusReductionLeft : 0;\r\n\r\n\t\t\tthis.drawingArea = largestPossibleRadius - (radiusReductionLeft + radiusReductionRight)/2;\r\n\r\n\t\t\t//this.drawingArea = min([maxWidthRadius, (this.height - (2 * (this.pointLabelFontSize + 5)))/2])\r\n\t\t\tthis.setCenterPoint(radiusReductionLeft, radiusReductionRight);\r\n\r\n\t\t},\r\n\t\tsetCenterPoint: function(leftMovement, rightMovement){\r\n\r\n\t\t\tvar maxRight = this.width - rightMovement - this.drawingArea,\r\n\t\t\t\tmaxLeft = leftMovement + this.drawingArea;\r\n\r\n\t\t\tthis.xCenter = (maxLeft + maxRight)/2;\r\n\t\t\t// Always vertically in the centre as the text height doesn't change\r\n\t\t\tthis.yCenter = (this.height/2);\r\n\t\t},\r\n\r\n\t\tgetIndexAngle : function(index){\r\n\t\t\tvar angleMultiplier = (Math.PI * 2) / this.valuesCount;\r\n\t\t\t// Start from the top instead of right, so remove a quarter of the circle\r\n\r\n\t\t\treturn index * angleMultiplier - (Math.PI/2);\r\n\t\t},\r\n\t\tgetPointPosition : function(index, distanceFromCenter){\r\n\t\t\tvar thisAngle = this.getIndexAngle(index);\r\n\t\t\treturn {\r\n\t\t\t\tx : (Math.cos(thisAngle) * distanceFromCenter) + this.xCenter,\r\n\t\t\t\ty : (Math.sin(thisAngle) * distanceFromCenter) + this.yCenter\r\n\t\t\t};\r\n\t\t},\r\n\t\tdraw: function(){\r\n\t\t\tif (this.display){\r\n\t\t\t\tvar ctx = this.ctx;\r\n\t\t\t\teach(this.yLabels, function(label, index){\r\n\t\t\t\t\t// Don't draw a centre value\r\n\t\t\t\t\tif (index > 0){\r\n\t\t\t\t\t\tvar yCenterOffset = index * (this.drawingArea/this.steps),\r\n\t\t\t\t\t\t\tyHeight = this.yCenter - yCenterOffset,\r\n\t\t\t\t\t\t\tpointPosition;\r\n\r\n\t\t\t\t\t\t// Draw circular lines around the scale\r\n\t\t\t\t\t\tif (this.lineWidth > 0){\r\n\t\t\t\t\t\t\tctx.strokeStyle = this.lineColor;\r\n\t\t\t\t\t\t\tctx.lineWidth = this.lineWidth;\r\n\r\n\t\t\t\t\t\t\tif(this.lineArc){\r\n\t\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\t\tctx.arc(this.xCenter, this.yCenter, yCenterOffset, 0, Math.PI*2);\r\n\t\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t\t} else{\r\n\t\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\t\tfor (var i=0;i<this.valuesCount;i++)\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tpointPosition = this.getPointPosition(i, this.calculateCenterOffset(this.min + (index * this.stepValue)));\r\n\t\t\t\t\t\t\t\t\tif (i === 0){\r\n\t\t\t\t\t\t\t\t\t\tctx.moveTo(pointPosition.x, pointPosition.y);\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tctx.lineTo(pointPosition.x, pointPosition.y);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(this.showLabels){\r\n\t\t\t\t\t\t\tctx.font = fontString(this.fontSize,this.fontStyle,this.fontFamily);\r\n\t\t\t\t\t\t\tif (this.showLabelBackdrop){\r\n\t\t\t\t\t\t\t\tvar labelWidth = ctx.measureText(label).width;\r\n\t\t\t\t\t\t\t\tctx.fillStyle = this.backdropColor;\r\n\t\t\t\t\t\t\t\tctx.fillRect(\r\n\t\t\t\t\t\t\t\t\tthis.xCenter - labelWidth/2 - this.backdropPaddingX,\r\n\t\t\t\t\t\t\t\t\tyHeight - this.fontSize/2 - this.backdropPaddingY,\r\n\t\t\t\t\t\t\t\t\tlabelWidth + this.backdropPaddingX*2,\r\n\t\t\t\t\t\t\t\t\tthis.fontSize + this.backdropPaddingY*2\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\t\tctx.textBaseline = \"middle\";\r\n\t\t\t\t\t\t\tctx.fillStyle = this.fontColor;\r\n\t\t\t\t\t\t\tctx.fillText(label, this.xCenter, yHeight);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tif (!this.lineArc){\r\n\t\t\t\t\tctx.lineWidth = this.angleLineWidth;\r\n\t\t\t\t\tctx.strokeStyle = this.angleLineColor;\r\n\t\t\t\t\tfor (var i = this.valuesCount - 1; i >= 0; i--) {\r\n\t\t\t\t\t\tif (this.angleLineWidth > 0){\r\n\t\t\t\t\t\t\tvar outerPosition = this.getPointPosition(i, this.calculateCenterOffset(this.max));\r\n\t\t\t\t\t\t\tctx.beginPath();\r\n\t\t\t\t\t\t\tctx.moveTo(this.xCenter, this.yCenter);\r\n\t\t\t\t\t\t\tctx.lineTo(outerPosition.x, outerPosition.y);\r\n\t\t\t\t\t\t\tctx.stroke();\r\n\t\t\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Extra 3px out for some label spacing\r\n\t\t\t\t\t\tvar pointLabelPosition = this.getPointPosition(i, this.calculateCenterOffset(this.max) + 5);\r\n\t\t\t\t\t\tctx.font = fontString(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily);\r\n\t\t\t\t\t\tctx.fillStyle = this.pointLabelFontColor;\r\n\r\n\t\t\t\t\t\tvar labelsCount = this.labels.length,\r\n\t\t\t\t\t\t\thalfLabelsCount = this.labels.length/2,\r\n\t\t\t\t\t\t\tquarterLabelsCount = halfLabelsCount/2,\r\n\t\t\t\t\t\t\tupperHalf = (i < quarterLabelsCount || i > labelsCount - quarterLabelsCount),\r\n\t\t\t\t\t\t\texactQuarter = (i === quarterLabelsCount || i === labelsCount - quarterLabelsCount);\r\n\t\t\t\t\t\tif (i === 0){\r\n\t\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\t} else if(i === halfLabelsCount){\r\n\t\t\t\t\t\t\tctx.textAlign = 'center';\r\n\t\t\t\t\t\t} else if (i < halfLabelsCount){\r\n\t\t\t\t\t\t\tctx.textAlign = 'left';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tctx.textAlign = 'right';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Set the correct text baseline based on outer positioning\r\n\t\t\t\t\t\tif (exactQuarter){\r\n\t\t\t\t\t\t\tctx.textBaseline = 'middle';\r\n\t\t\t\t\t\t} else if (upperHalf){\r\n\t\t\t\t\t\t\tctx.textBaseline = 'bottom';\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tctx.textBaseline = 'top';\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tctx.fillText(this.labels[i], pointLabelPosition.x, pointLabelPosition.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n\r\n\t// Attach global event to resize each chart instance when the browser resizes\r\n\thelpers.addEvent(window, \"resize\", (function(){\r\n\t\t// Basic debounce of resize function so it doesn't hurt performance when resizing browser.\r\n\t\tvar timeout;\r\n\t\treturn function(){\r\n\t\t\tclearTimeout(timeout);\r\n\t\t\ttimeout = setTimeout(function(){\r\n\t\t\t\teach(Chart.instances,function(instance){\r\n\t\t\t\t\t// If the responsive flag is set in the chart instance config\r\n\t\t\t\t\t// Cascade the resize event down to the chart.\r\n\t\t\t\t\tif (instance.options.responsive){\r\n\t\t\t\t\t\tinstance.resize(instance.render, true);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t}, 50);\r\n\t\t};\r\n\t})());\r\n\r\n\r\n\tif (amd) {\r\n\t\tdefine(function(){\r\n\t\t\treturn Chart;\r\n\t\t});\r\n\t} else if (typeof module === 'object' && module.exports) {\r\n\t\tmodule.exports = Chart;\r\n\t}\r\n\r\n\troot.Chart = Chart;\r\n\r\n\tChart.noConflict = function(){\r\n\t\troot.Chart = previous;\r\n\t\treturn Chart;\r\n\t};\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\thelpers = Chart.helpers;\r\n\r\n\r\n\tvar defaultConfig = {\r\n\t\t//Boolean - Whether the scale should start at zero, or an order of magnitude down from the lowest value\r\n\t\tscaleBeginAtZero : true,\r\n\r\n\t\t//Boolean - Whether grid lines are shown across the chart\r\n\t\tscaleShowGridLines : true,\r\n\r\n\t\t//String - Colour of the grid lines\r\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\r\n\r\n\t\t//Number - Width of the grid lines\r\n\t\tscaleGridLineWidth : 1,\r\n\r\n\t\t//Boolean - Whether to show horizontal lines (except X axis)\r\n\t\tscaleShowHorizontalLines: true,\r\n\r\n\t\t//Boolean - Whether to show vertical lines (except Y axis)\r\n\t\tscaleShowVerticalLines: true,\r\n\r\n\t\t//Boolean - If there is a stroke on each bar\r\n\t\tbarShowStroke : true,\r\n\r\n\t\t//Number - Pixel width of the bar stroke\r\n\t\tbarStrokeWidth : 2,\r\n\r\n\t\t//Number - Spacing between each of the X value sets\r\n\t\tbarValueSpacing : 5,\r\n\r\n\t\t//Number - Spacing between data sets within X values\r\n\t\tbarDatasetSpacing : 1,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\\\"background-color:<%=datasets[i].fillColor%>\\\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>\"\r\n\r\n\t};\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\tname: \"Bar\",\r\n\t\tdefaults : defaultConfig,\r\n\t\tinitialize:  function(data){\r\n\r\n\t\t\t//Expose options as a scope variable here so we can access it in the ScaleClass\r\n\t\t\tvar options = this.options;\r\n\r\n\t\t\tthis.ScaleClass = Chart.Scale.extend({\r\n\t\t\t\toffsetGridLines : true,\r\n\t\t\t\tcalculateBarX : function(datasetCount, datasetIndex, barIndex){\r\n\t\t\t\t\t//Reusable method for calculating the xPosition of a given bar based on datasetIndex & width of the bar\r\n\t\t\t\t\tvar xWidth = this.calculateBaseWidth(),\r\n\t\t\t\t\t\txAbsolute = this.calculateX(barIndex) - (xWidth/2),\r\n\t\t\t\t\t\tbarWidth = this.calculateBarWidth(datasetCount);\r\n\r\n\t\t\t\t\treturn xAbsolute + (barWidth * datasetIndex) + (datasetIndex * options.barDatasetSpacing) + barWidth/2;\r\n\t\t\t\t},\r\n\t\t\t\tcalculateBaseWidth : function(){\r\n\t\t\t\t\treturn (this.calculateX(1) - this.calculateX(0)) - (2*options.barValueSpacing);\r\n\t\t\t\t},\r\n\t\t\t\tcalculateBarWidth : function(datasetCount){\r\n\t\t\t\t\t//The padding between datasets is to the right of each bar, providing that there are more than 1 dataset\r\n\t\t\t\t\tvar baseWidth = this.calculateBaseWidth() - ((datasetCount - 1) * options.barDatasetSpacing);\r\n\r\n\t\t\t\t\treturn (baseWidth / datasetCount);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.datasets = [];\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activeBars = (evt.type !== 'mouseout') ? this.getBarsAtEvent(evt) : [];\r\n\r\n\t\t\t\t\tthis.eachBars(function(bar){\r\n\t\t\t\t\t\tbar.restore(['fillColor', 'strokeColor']);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activeBars, function(activeBar){\r\n\t\t\t\t\t\tactiveBar.fillColor = activeBar.highlightFill;\r\n\t\t\t\t\t\tactiveBar.strokeColor = activeBar.highlightStroke;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activeBars);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\r\n\t\t\tthis.BarClass = Chart.Rectangle.extend({\r\n\t\t\t\tstrokeWidth : this.options.barStrokeWidth,\r\n\t\t\t\tshowStroke : this.options.barShowStroke,\r\n\t\t\t\tctx : this.chart.ctx\r\n\t\t\t});\r\n\r\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\r\n\t\t\thelpers.each(data.datasets,function(dataset,datasetIndex){\r\n\r\n\t\t\t\tvar datasetObject = {\r\n\t\t\t\t\tlabel : dataset.label || null,\r\n\t\t\t\t\tfillColor : dataset.fillColor,\r\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\r\n\t\t\t\t\tbars : []\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.datasets.push(datasetObject);\r\n\r\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\r\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\t\tdatasetObject.bars.push(new this.BarClass({\r\n\t\t\t\t\t\tvalue : dataPoint,\r\n\t\t\t\t\t\tlabel : data.labels[index],\r\n\t\t\t\t\t\tdatasetLabel: dataset.label,\r\n\t\t\t\t\t\tstrokeColor : dataset.strokeColor,\r\n\t\t\t\t\t\tfillColor : dataset.fillColor,\r\n\t\t\t\t\t\thighlightFill : dataset.highlightFill || dataset.fillColor,\r\n\t\t\t\t\t\thighlightStroke : dataset.highlightStroke || dataset.strokeColor\r\n\t\t\t\t\t}));\r\n\t\t\t\t},this);\r\n\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.buildScale(data.labels);\r\n\r\n\t\t\tthis.BarClass.prototype.base = this.scale.endPoint;\r\n\r\n\t\t\tthis.eachBars(function(bar, index, datasetIndex){\r\n\t\t\t\thelpers.extend(bar, {\r\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\r\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\r\n\t\t\t\t\ty: this.scale.endPoint\r\n\t\t\t\t});\r\n\t\t\t\tbar.save();\r\n\t\t\t}, this);\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.scale.update();\r\n\t\t\t// Reset any highlight colours before updating.\r\n\t\t\thelpers.each(this.activeElements, function(activeElement){\r\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\r\n\t\t\t});\r\n\r\n\t\t\tthis.eachBars(function(bar){\r\n\t\t\t\tbar.save();\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\teachBars : function(callback){\r\n\t\t\thelpers.each(this.datasets,function(dataset, datasetIndex){\r\n\t\t\t\thelpers.each(dataset.bars, callback, this, datasetIndex);\r\n\t\t\t},this);\r\n\t\t},\r\n\t\tgetBarsAtEvent : function(e){\r\n\t\t\tvar barsArray = [],\r\n\t\t\t\teventPosition = helpers.getRelativePosition(e),\r\n\t\t\t\tdatasetIterator = function(dataset){\r\n\t\t\t\t\tbarsArray.push(dataset.bars[barIndex]);\r\n\t\t\t\t},\r\n\t\t\t\tbarIndex;\r\n\r\n\t\t\tfor (var datasetIndex = 0; datasetIndex < this.datasets.length; datasetIndex++) {\r\n\t\t\t\tfor (barIndex = 0; barIndex < this.datasets[datasetIndex].bars.length; barIndex++) {\r\n\t\t\t\t\tif (this.datasets[datasetIndex].bars[barIndex].inRange(eventPosition.x,eventPosition.y)){\r\n\t\t\t\t\t\thelpers.each(this.datasets, datasetIterator);\r\n\t\t\t\t\t\treturn barsArray;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\treturn barsArray;\r\n\t\t},\r\n\t\tbuildScale : function(labels){\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar dataTotal = function(){\r\n\t\t\t\tvar values = [];\r\n\t\t\t\tself.eachBars(function(bar){\r\n\t\t\t\t\tvalues.push(bar.value);\r\n\t\t\t\t});\r\n\t\t\t\treturn values;\r\n\t\t\t};\r\n\r\n\t\t\tvar scaleOptions = {\r\n\t\t\t\ttemplateString : this.options.scaleLabel,\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttextColor : this.options.scaleFontColor,\r\n\t\t\t\tfontSize : this.options.scaleFontSize,\r\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\r\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\r\n\t\t\t\tvaluesCount : labels.length,\r\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\r\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\r\n\t\t\t\tcalculateYRange: function(currentHeight){\r\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\r\n\t\t\t\t\t\tdataTotal(),\r\n\t\t\t\t\t\tcurrentHeight,\r\n\t\t\t\t\t\tthis.fontSize,\r\n\t\t\t\t\t\tthis.beginAtZero,\r\n\t\t\t\t\t\tthis.integersOnly\r\n\t\t\t\t\t);\r\n\t\t\t\t\thelpers.extend(this, updatedRanges);\r\n\t\t\t\t},\r\n\t\t\t\txLabels : labels,\r\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\r\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\r\n\t\t\t\tlineColor : this.options.scaleLineColor,\r\n\t\t\t\tshowHorizontalLines : this.options.scaleShowHorizontalLines,\r\n\t\t\t\tshowVerticalLines : this.options.scaleShowVerticalLines,\r\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\r\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\r\n\t\t\t\tpadding : (this.options.showScale) ? 0 : (this.options.barShowStroke) ? this.options.barStrokeWidth : 0,\r\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\r\n\t\t\t\tdisplay : this.options.showScale\r\n\t\t\t};\r\n\r\n\t\t\tif (this.options.scaleOverride){\r\n\t\t\t\thelpers.extend(scaleOptions, {\r\n\t\t\t\t\tcalculateYRange: helpers.noop,\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.scale = new this.ScaleClass(scaleOptions);\r\n\t\t},\r\n\t\taddData : function(valuesArray,label){\r\n\t\t\t//Map the values array for each of the datasets\r\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\r\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\tthis.datasets[datasetIndex].bars.push(new this.BarClass({\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tlabel : label,\r\n\t\t\t\t\tx: this.scale.calculateBarX(this.datasets.length, datasetIndex, this.scale.valuesCount+1),\r\n\t\t\t\t\ty: this.scale.endPoint,\r\n\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length),\r\n\t\t\t\t\tbase : this.scale.endPoint,\r\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].strokeColor,\r\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].fillColor\r\n\t\t\t\t}));\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.scale.addXLabel(label);\r\n\t\t\t//Then re-render the chart.\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tremoveData : function(){\r\n\t\t\tthis.scale.removeXLabel();\r\n\t\t\t//Then re-render the chart.\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tdataset.bars.shift();\r\n\t\t\t},this);\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\treflow : function(){\r\n\t\t\thelpers.extend(this.BarClass.prototype,{\r\n\t\t\t\ty: this.scale.endPoint,\r\n\t\t\t\tbase : this.scale.endPoint\r\n\t\t\t});\r\n\t\t\tvar newScaleProps = helpers.extend({\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width\r\n\t\t\t});\r\n\t\t\tthis.scale.update(newScaleProps);\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easingDecimal = ease || 1;\r\n\t\t\tthis.clear();\r\n\r\n\t\t\tvar ctx = this.chart.ctx;\r\n\r\n\t\t\tthis.scale.draw(easingDecimal);\r\n\r\n\t\t\t//Draw all the bars for each dataset\r\n\t\t\thelpers.each(this.datasets,function(dataset,datasetIndex){\r\n\t\t\t\thelpers.each(dataset.bars,function(bar,index){\r\n\t\t\t\t\tif (bar.hasValue()){\r\n\t\t\t\t\t\tbar.base = this.scale.endPoint;\r\n\t\t\t\t\t\t//Transition then draw\r\n\t\t\t\t\t\tbar.transition({\r\n\t\t\t\t\t\t\tx : this.scale.calculateBarX(this.datasets.length, datasetIndex, index),\r\n\t\t\t\t\t\t\ty : this.scale.calculateY(bar.value),\r\n\t\t\t\t\t\t\twidth : this.scale.calculateBarWidth(this.datasets.length)\r\n\t\t\t\t\t\t}, easingDecimal).draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\r\n\t\t\t},this);\r\n\t\t}\r\n\t});\r\n\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\t//Cache a local reference to Chart.helpers\r\n\t\thelpers = Chart.helpers;\r\n\r\n\tvar defaultConfig = {\r\n\t\t//Boolean - Whether we should show a stroke on each segment\r\n\t\tsegmentShowStroke : true,\r\n\r\n\t\t//String - The colour of each segment stroke\r\n\t\tsegmentStrokeColor : \"#fff\",\r\n\r\n\t\t//Number - The width of each segment stroke\r\n\t\tsegmentStrokeWidth : 2,\r\n\r\n\t\t//The percentage of the chart that we cut out of the middle.\r\n\t\tpercentageInnerCutout : 50,\r\n\r\n\t\t//Number - Amount of animation steps\r\n\t\tanimationSteps : 100,\r\n\r\n\t\t//String - Animation easing effect\r\n\t\tanimationEasing : \"easeOutBounce\",\r\n\r\n\t\t//Boolean - Whether we animate the rotation of the Doughnut\r\n\t\tanimateRotate : true,\r\n\r\n\t\t//Boolean - Whether we animate scaling the Doughnut from the centre\r\n\t\tanimateScale : false,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>\"\r\n\r\n\t};\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\t//Passing in a name registers this chart in the Chart namespace\r\n\t\tname: \"Doughnut\",\r\n\t\t//Providing a defaults will also register the deafults in the chart namespace\r\n\t\tdefaults : defaultConfig,\r\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\r\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\r\n\t\tinitialize:  function(data){\r\n\r\n\t\t\t//Declare segments as a static property to prevent inheriting across the Chart type prototype\r\n\t\t\tthis.segments = [];\r\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\r\n\r\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\r\n\r\n\t\t\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\r\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activeSegments);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.calculateTotal(data);\r\n\r\n\t\t\thelpers.each(data,function(datapoint, index){\r\n\t\t\t\tthis.addData(datapoint, index, true);\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tgetSegmentsAtEvent : function(e){\r\n\t\t\tvar segmentsArray = [];\r\n\r\n\t\t\tvar location = helpers.getRelativePosition(e);\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\r\n\t\t\t},this);\r\n\t\t\treturn segmentsArray;\r\n\t\t},\r\n\t\taddData : function(segment, atIndex, silent){\r\n\t\t\tvar index = atIndex || this.segments.length;\r\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\r\n\t\t\t\tvalue : segment.value,\r\n\t\t\t\touterRadius : (this.options.animateScale) ? 0 : this.outerRadius,\r\n\t\t\t\tinnerRadius : (this.options.animateScale) ? 0 : (this.outerRadius/100) * this.options.percentageInnerCutout,\r\n\t\t\t\tfillColor : segment.color,\r\n\t\t\t\thighlightColor : segment.highlight || segment.color,\r\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\r\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\r\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\r\n\t\t\t\tstartAngle : Math.PI * 1.5,\r\n\t\t\t\tcircumference : (this.options.animateRotate) ? 0 : this.calculateCircumference(segment.value),\r\n\t\t\t\tlabel : segment.label\r\n\t\t\t}));\r\n\t\t\tif (!silent){\r\n\t\t\t\tthis.reflow();\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t},\r\n\t\tcalculateCircumference : function(value){\r\n\t\t\treturn (Math.PI*2)*(Math.abs(value) / this.total);\r\n\t\t},\r\n\t\tcalculateTotal : function(data){\r\n\t\t\tthis.total = 0;\r\n\t\t\thelpers.each(data,function(segment){\r\n\t\t\t\tthis.total += Math.abs(segment.value);\r\n\t\t\t},this);\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.calculateTotal(this.segments);\r\n\r\n\t\t\t// Reset any highlight colours before updating.\r\n\t\t\thelpers.each(this.activeElements, function(activeElement){\r\n\t\t\t\tactiveElement.restore(['fillColor']);\r\n\t\t\t});\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tsegment.save();\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\r\n\t\tremoveData: function(atIndex){\r\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\r\n\t\t\tthis.segments.splice(indexToDelete, 1);\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.update();\r\n\t\t},\r\n\r\n\t\treflow : function(){\r\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.outerRadius = (helpers.min([this.chart.width,this.chart.height]) -\tthis.options.segmentStrokeWidth/2)/2;\r\n\t\t\thelpers.each(this.segments, function(segment){\r\n\t\t\t\tsegment.update({\r\n\t\t\t\t\touterRadius : this.outerRadius,\r\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\r\n\t\t\t\t});\r\n\t\t\t}, this);\r\n\t\t},\r\n\t\tdraw : function(easeDecimal){\r\n\t\t\tvar animDecimal = (easeDecimal) ? easeDecimal : 1;\r\n\t\t\tthis.clear();\r\n\t\t\thelpers.each(this.segments,function(segment,index){\r\n\t\t\t\tsegment.transition({\r\n\t\t\t\t\tcircumference : this.calculateCircumference(segment.value),\r\n\t\t\t\t\touterRadius : this.outerRadius,\r\n\t\t\t\t\tinnerRadius : (this.outerRadius/100) * this.options.percentageInnerCutout\r\n\t\t\t\t},animDecimal);\r\n\r\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\r\n\r\n\t\t\t\tsegment.draw();\r\n\t\t\t\tif (index === 0){\r\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\r\n\t\t\t\t}\r\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\r\n\t\t\t\tif (index < this.segments.length-1){\r\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\r\n\t\t\t\t}\r\n\t\t\t},this);\r\n\r\n\t\t}\r\n\t});\r\n\r\n\tChart.types.Doughnut.extend({\r\n\t\tname : \"Pie\",\r\n\t\tdefaults : helpers.merge(defaultConfig,{percentageInnerCutout : 0})\r\n\t});\r\n\r\n}).call(this);\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\thelpers = Chart.helpers;\r\n\r\n\tvar defaultConfig = {\r\n\r\n\t\t///Boolean - Whether grid lines are shown across the chart\r\n\t\tscaleShowGridLines : true,\r\n\r\n\t\t//String - Colour of the grid lines\r\n\t\tscaleGridLineColor : \"rgba(0,0,0,.05)\",\r\n\r\n\t\t//Number - Width of the grid lines\r\n\t\tscaleGridLineWidth : 1,\r\n\r\n\t\t//Boolean - Whether to show horizontal lines (except X axis)\r\n\t\tscaleShowHorizontalLines: true,\r\n\r\n\t\t//Boolean - Whether to show vertical lines (except Y axis)\r\n\t\tscaleShowVerticalLines: true,\r\n\r\n\t\t//Boolean - Whether the line is curved between points\r\n\t\tbezierCurve : true,\r\n\r\n\t\t//Number - Tension of the bezier curve between points\r\n\t\tbezierCurveTension : 0.4,\r\n\r\n\t\t//Boolean - Whether to show a dot for each point\r\n\t\tpointDot : true,\r\n\r\n\t\t//Number - Radius of each point dot in pixels\r\n\t\tpointDotRadius : 4,\r\n\r\n\t\t//Number - Pixel width of point dot stroke\r\n\t\tpointDotStrokeWidth : 1,\r\n\r\n\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\r\n\t\tpointHitDetectionRadius : 20,\r\n\r\n\t\t//Boolean - Whether to show a stroke for datasets\r\n\t\tdatasetStroke : true,\r\n\r\n\t\t//Number - Pixel width of dataset stroke\r\n\t\tdatasetStrokeWidth : 2,\r\n\r\n\t\t//Boolean - Whether to fill the dataset with a colour\r\n\t\tdatasetFill : true,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>\"\r\n\r\n\t};\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\tname: \"Line\",\r\n\t\tdefaults : defaultConfig,\r\n\t\tinitialize:  function(data){\r\n\t\t\t//Declare the extension of the default point, to cater for the options passed in to the constructor\r\n\t\t\tthis.PointClass = Chart.Point.extend({\r\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\r\n\t\t\t\tradius : this.options.pointDotRadius,\r\n\t\t\t\tdisplay: this.options.pointDot,\r\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\tinRange : function(mouseX){\r\n\t\t\t\t\treturn (Math.pow(mouseX-this.x, 2) < Math.pow(this.radius + this.hitDetectionRadius,2));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\t\t\tthis.datasets = [];\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activePoints = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\r\n\t\t\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activePoints, function(activePoint){\r\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\r\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activePoints);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\r\n\t\t\thelpers.each(data.datasets,function(dataset){\r\n\r\n\t\t\t\tvar datasetObject = {\r\n\t\t\t\t\tlabel : dataset.label || null,\r\n\t\t\t\t\tfillColor : dataset.fillColor,\r\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\r\n\t\t\t\t\tpointColor : dataset.pointColor,\r\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\tpoints : []\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.datasets.push(datasetObject);\r\n\r\n\r\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\r\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\r\n\t\t\t\t\t\tvalue : dataPoint,\r\n\t\t\t\t\t\tlabel : data.labels[index],\r\n\t\t\t\t\t\tdatasetLabel: dataset.label,\r\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\t\tfillColor : dataset.pointColor,\r\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\r\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\r\n\t\t\t\t\t}));\r\n\t\t\t\t},this);\r\n\r\n\t\t\t\tthis.buildScale(data.labels);\r\n\r\n\r\n\t\t\t\tthis.eachPoints(function(point, index){\r\n\t\t\t\t\thelpers.extend(point, {\r\n\t\t\t\t\t\tx: this.scale.calculateX(index),\r\n\t\t\t\t\t\ty: this.scale.endPoint\r\n\t\t\t\t\t});\r\n\t\t\t\t\tpoint.save();\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t},this);\r\n\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.scale.update();\r\n\t\t\t// Reset any highlight colours before updating.\r\n\t\t\thelpers.each(this.activeElements, function(activeElement){\r\n\t\t\t\tactiveElement.restore(['fillColor', 'strokeColor']);\r\n\t\t\t});\r\n\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\tpoint.save();\r\n\t\t\t});\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\teachPoints : function(callback){\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\thelpers.each(dataset.points,callback,this);\r\n\t\t\t},this);\r\n\t\t},\r\n\t\tgetPointsAtEvent : function(e){\r\n\t\t\tvar pointsArray = [],\r\n\t\t\t\teventPosition = helpers.getRelativePosition(e);\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\thelpers.each(dataset.points,function(point){\r\n\t\t\t\t\tif (point.inRange(eventPosition.x,eventPosition.y)) pointsArray.push(point);\r\n\t\t\t\t});\r\n\t\t\t},this);\r\n\t\t\treturn pointsArray;\r\n\t\t},\r\n\t\tbuildScale : function(labels){\r\n\t\t\tvar self = this;\r\n\r\n\t\t\tvar dataTotal = function(){\r\n\t\t\t\tvar values = [];\r\n\t\t\t\tself.eachPoints(function(point){\r\n\t\t\t\t\tvalues.push(point.value);\r\n\t\t\t\t});\r\n\r\n\t\t\t\treturn values;\r\n\t\t\t};\r\n\r\n\t\t\tvar scaleOptions = {\r\n\t\t\t\ttemplateString : this.options.scaleLabel,\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttextColor : this.options.scaleFontColor,\r\n\t\t\t\tfontSize : this.options.scaleFontSize,\r\n\t\t\t\tfontStyle : this.options.scaleFontStyle,\r\n\t\t\t\tfontFamily : this.options.scaleFontFamily,\r\n\t\t\t\tvaluesCount : labels.length,\r\n\t\t\t\tbeginAtZero : this.options.scaleBeginAtZero,\r\n\t\t\t\tintegersOnly : this.options.scaleIntegersOnly,\r\n\t\t\t\tcalculateYRange : function(currentHeight){\r\n\t\t\t\t\tvar updatedRanges = helpers.calculateScaleRange(\r\n\t\t\t\t\t\tdataTotal(),\r\n\t\t\t\t\t\tcurrentHeight,\r\n\t\t\t\t\t\tthis.fontSize,\r\n\t\t\t\t\t\tthis.beginAtZero,\r\n\t\t\t\t\t\tthis.integersOnly\r\n\t\t\t\t\t);\r\n\t\t\t\t\thelpers.extend(this, updatedRanges);\r\n\t\t\t\t},\r\n\t\t\t\txLabels : labels,\r\n\t\t\t\tfont : helpers.fontString(this.options.scaleFontSize, this.options.scaleFontStyle, this.options.scaleFontFamily),\r\n\t\t\t\tlineWidth : this.options.scaleLineWidth,\r\n\t\t\t\tlineColor : this.options.scaleLineColor,\r\n\t\t\t\tshowHorizontalLines : this.options.scaleShowHorizontalLines,\r\n\t\t\t\tshowVerticalLines : this.options.scaleShowVerticalLines,\r\n\t\t\t\tgridLineWidth : (this.options.scaleShowGridLines) ? this.options.scaleGridLineWidth : 0,\r\n\t\t\t\tgridLineColor : (this.options.scaleShowGridLines) ? this.options.scaleGridLineColor : \"rgba(0,0,0,0)\",\r\n\t\t\t\tpadding: (this.options.showScale) ? 0 : this.options.pointDotRadius + this.options.pointDotStrokeWidth,\r\n\t\t\t\tshowLabels : this.options.scaleShowLabels,\r\n\t\t\t\tdisplay : this.options.showScale\r\n\t\t\t};\r\n\r\n\t\t\tif (this.options.scaleOverride){\r\n\t\t\t\thelpers.extend(scaleOptions, {\r\n\t\t\t\t\tcalculateYRange: helpers.noop,\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\tthis.scale = new Chart.Scale(scaleOptions);\r\n\t\t},\r\n\t\taddData : function(valuesArray,label){\r\n\t\t\t//Map the values array for each of the datasets\r\n\r\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\r\n\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tlabel : label,\r\n\t\t\t\t\tx: this.scale.calculateX(this.scale.valuesCount+1),\r\n\t\t\t\t\ty: this.scale.endPoint,\r\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\r\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\r\n\t\t\t\t}));\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.scale.addXLabel(label);\r\n\t\t\t//Then re-render the chart.\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tremoveData : function(){\r\n\t\t\tthis.scale.removeXLabel();\r\n\t\t\t//Then re-render the chart.\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tdataset.points.shift();\r\n\t\t\t},this);\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\treflow : function(){\r\n\t\t\tvar newScaleProps = helpers.extend({\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth : this.chart.width\r\n\t\t\t});\r\n\t\t\tthis.scale.update(newScaleProps);\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easingDecimal = ease || 1;\r\n\t\t\tthis.clear();\r\n\r\n\t\t\tvar ctx = this.chart.ctx;\r\n\r\n\t\t\t// Some helper methods for getting the next/prev points\r\n\t\t\tvar hasValue = function(item){\r\n\t\t\t\treturn item.value !== null;\r\n\t\t\t},\r\n\t\t\tnextPoint = function(point, collection, index){\r\n\t\t\t\treturn helpers.findNextWhere(collection, hasValue, index) || point;\r\n\t\t\t},\r\n\t\t\tpreviousPoint = function(point, collection, index){\r\n\t\t\t\treturn helpers.findPreviousWhere(collection, hasValue, index) || point;\r\n\t\t\t};\r\n\r\n\t\t\tthis.scale.draw(easingDecimal);\r\n\r\n\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tvar pointsWithValues = helpers.where(dataset.points, hasValue);\r\n\r\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\r\n\t\t\t\t//We can use this extra loop to calculate the control points of this dataset also in this loop\r\n\r\n\t\t\t\thelpers.each(dataset.points, function(point, index){\r\n\t\t\t\t\tif (point.hasValue()){\r\n\t\t\t\t\t\tpoint.transition({\r\n\t\t\t\t\t\t\ty : this.scale.calculateY(point.value),\r\n\t\t\t\t\t\t\tx : this.scale.calculateX(index)\r\n\t\t\t\t\t\t}, easingDecimal);\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\r\n\r\n\t\t\t\t// Control points need to be calculated in a seperate loop, because we need to know the current x/y of the point\r\n\t\t\t\t// This would cause issues when there is no animation, because the y of the next point would be 0, so beziers would be skewed\r\n\t\t\t\tif (this.options.bezierCurve){\r\n\t\t\t\t\thelpers.each(pointsWithValues, function(point, index){\r\n\t\t\t\t\t\tvar tension = (index > 0 && index < pointsWithValues.length - 1) ? this.options.bezierCurveTension : 0;\r\n\t\t\t\t\t\tpoint.controlPoints = helpers.splineCurve(\r\n\t\t\t\t\t\t\tpreviousPoint(point, pointsWithValues, index),\r\n\t\t\t\t\t\t\tpoint,\r\n\t\t\t\t\t\t\tnextPoint(point, pointsWithValues, index),\r\n\t\t\t\t\t\t\ttension\r\n\t\t\t\t\t\t);\r\n\r\n\t\t\t\t\t\t// Prevent the bezier going outside of the bounds of the graph\r\n\r\n\t\t\t\t\t\t// Cap puter bezier handles to the upper/lower scale bounds\r\n\t\t\t\t\t\tif (point.controlPoints.outer.y > this.scale.endPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.endPoint;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (point.controlPoints.outer.y < this.scale.startPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.outer.y = this.scale.startPoint;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Cap inner bezier handles to the upper/lower scale bounds\r\n\t\t\t\t\t\tif (point.controlPoints.inner.y > this.scale.endPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.endPoint;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (point.controlPoints.inner.y < this.scale.startPoint){\r\n\t\t\t\t\t\t\tpoint.controlPoints.inner.y = this.scale.startPoint;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},this);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t//Draw the line between all the points\r\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\r\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\r\n\t\t\t\tctx.beginPath();\r\n\r\n\t\t\t\thelpers.each(pointsWithValues, function(point, index){\r\n\t\t\t\t\tif (index === 0){\r\n\t\t\t\t\t\tctx.moveTo(point.x, point.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tif(this.options.bezierCurve){\r\n\t\t\t\t\t\t\tvar previous = previousPoint(point, pointsWithValues, index);\r\n\r\n\t\t\t\t\t\t\tctx.bezierCurveTo(\r\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.x,\r\n\t\t\t\t\t\t\t\tprevious.controlPoints.outer.y,\r\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.x,\r\n\t\t\t\t\t\t\t\tpoint.controlPoints.inner.y,\r\n\t\t\t\t\t\t\t\tpoint.x,\r\n\t\t\t\t\t\t\t\tpoint.y\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\tctx.lineTo(point.x,point.y);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, this);\r\n\r\n\t\t\t\tctx.stroke();\r\n\r\n\t\t\t\tif (this.options.datasetFill && pointsWithValues.length > 0){\r\n\t\t\t\t\t//Round off the line by going to the base of the chart, back to the start, then fill.\r\n\t\t\t\t\tctx.lineTo(pointsWithValues[pointsWithValues.length - 1].x, this.scale.endPoint);\r\n\t\t\t\t\tctx.lineTo(pointsWithValues[0].x, this.scale.endPoint);\r\n\t\t\t\t\tctx.fillStyle = dataset.fillColor;\r\n\t\t\t\t\tctx.closePath();\r\n\t\t\t\t\tctx.fill();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Now draw the points over the line\r\n\t\t\t\t//A little inefficient double looping, but better than the line\r\n\t\t\t\t//lagging behind the point positions\r\n\t\t\t\thelpers.each(pointsWithValues,function(point){\r\n\t\t\t\t\tpoint.draw();\r\n\t\t\t\t});\r\n\t\t\t},this);\r\n\t\t}\r\n\t});\r\n\r\n\r\n}).call(this);\r\n\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\t//Cache a local reference to Chart.helpers\r\n\t\thelpers = Chart.helpers;\r\n\r\n\tvar defaultConfig = {\r\n\t\t//Boolean - Show a backdrop to the scale label\r\n\t\tscaleShowLabelBackdrop : true,\r\n\r\n\t\t//String - The colour of the label backdrop\r\n\t\tscaleBackdropColor : \"rgba(255,255,255,0.75)\",\r\n\r\n\t\t// Boolean - Whether the scale should begin at zero\r\n\t\tscaleBeginAtZero : true,\r\n\r\n\t\t//Number - The backdrop padding above & below the label in pixels\r\n\t\tscaleBackdropPaddingY : 2,\r\n\r\n\t\t//Number - The backdrop padding to the side of the label in pixels\r\n\t\tscaleBackdropPaddingX : 2,\r\n\r\n\t\t//Boolean - Show line for each value in the scale\r\n\t\tscaleShowLine : true,\r\n\r\n\t\t//Boolean - Stroke a line around each segment in the chart\r\n\t\tsegmentShowStroke : true,\r\n\r\n\t\t//String - The colour of the stroke on each segement.\r\n\t\tsegmentStrokeColor : \"#fff\",\r\n\r\n\t\t//Number - The width of the stroke value in pixels\r\n\t\tsegmentStrokeWidth : 2,\r\n\r\n\t\t//Number - Amount of animation steps\r\n\t\tanimationSteps : 100,\r\n\r\n\t\t//String - Animation easing effect.\r\n\t\tanimationEasing : \"easeOutBounce\",\r\n\r\n\t\t//Boolean - Whether to animate the rotation of the chart\r\n\t\tanimateRotate : true,\r\n\r\n\t\t//Boolean - Whether to animate scaling the chart from the centre\r\n\t\tanimateScale : false,\r\n\r\n\t\t//String - A legend template\r\n\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<segments.length; i++){%><li><span style=\\\"background-color:<%=segments[i].fillColor%>\\\"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>\"\r\n\t};\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\t//Passing in a name registers this chart in the Chart namespace\r\n\t\tname: \"PolarArea\",\r\n\t\t//Providing a defaults will also register the deafults in the chart namespace\r\n\t\tdefaults : defaultConfig,\r\n\t\t//Initialize is fired when the chart is initialized - Data is passed in as a parameter\r\n\t\t//Config is automatically merged by the core of Chart.js, and is available at this.options\r\n\t\tinitialize:  function(data){\r\n\t\t\tthis.segments = [];\r\n\t\t\t//Declare segment class as a chart instance specific class, so it can share props for this instance\r\n\t\t\tthis.SegmentArc = Chart.Arc.extend({\r\n\t\t\t\tshowStroke : this.options.segmentShowStroke,\r\n\t\t\t\tstrokeWidth : this.options.segmentStrokeWidth,\r\n\t\t\t\tstrokeColor : this.options.segmentStrokeColor,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\tinnerRadius : 0,\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.scale = new Chart.RadialScale({\r\n\t\t\t\tdisplay: this.options.showScale,\r\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\r\n\t\t\t\tfontSize: this.options.scaleFontSize,\r\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\r\n\t\t\t\tfontColor: this.options.scaleFontColor,\r\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\r\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\r\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\r\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\r\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\r\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\r\n\t\t\t\tlineColor: this.options.scaleLineColor,\r\n\t\t\t\tlineArc: true,\r\n\t\t\t\twidth: this.chart.width,\r\n\t\t\t\theight: this.chart.height,\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttemplateString: this.options.scaleLabel,\r\n\t\t\t\tvaluesCount: data.length\r\n\t\t\t});\r\n\r\n\t\t\tthis.updateScaleRange(data);\r\n\r\n\t\t\tthis.scale.update();\r\n\r\n\t\t\thelpers.each(data,function(segment,index){\r\n\t\t\t\tthis.addData(segment,index,true);\r\n\t\t\t},this);\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activeSegments = (evt.type !== 'mouseout') ? this.getSegmentsAtEvent(evt) : [];\r\n\t\t\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\t\t\tsegment.restore([\"fillColor\"]);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activeSegments,function(activeSegment){\r\n\t\t\t\t\t\tactiveSegment.fillColor = activeSegment.highlightColor;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.showTooltip(activeSegments);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\tgetSegmentsAtEvent : function(e){\r\n\t\t\tvar segmentsArray = [];\r\n\r\n\t\t\tvar location = helpers.getRelativePosition(e);\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tif (segment.inRange(location.x,location.y)) segmentsArray.push(segment);\r\n\t\t\t},this);\r\n\t\t\treturn segmentsArray;\r\n\t\t},\r\n\t\taddData : function(segment, atIndex, silent){\r\n\t\t\tvar index = atIndex || this.segments.length;\r\n\r\n\t\t\tthis.segments.splice(index, 0, new this.SegmentArc({\r\n\t\t\t\tfillColor: segment.color,\r\n\t\t\t\thighlightColor: segment.highlight || segment.color,\r\n\t\t\t\tlabel: segment.label,\r\n\t\t\t\tvalue: segment.value,\r\n\t\t\t\touterRadius: (this.options.animateScale) ? 0 : this.scale.calculateCenterOffset(segment.value),\r\n\t\t\t\tcircumference: (this.options.animateRotate) ? 0 : this.scale.getCircumference(),\r\n\t\t\t\tstartAngle: Math.PI * 1.5\r\n\t\t\t}));\r\n\t\t\tif (!silent){\r\n\t\t\t\tthis.reflow();\r\n\t\t\t\tthis.update();\r\n\t\t\t}\r\n\t\t},\r\n\t\tremoveData: function(atIndex){\r\n\t\t\tvar indexToDelete = (helpers.isNumber(atIndex)) ? atIndex : this.segments.length-1;\r\n\t\t\tthis.segments.splice(indexToDelete, 1);\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tcalculateTotal: function(data){\r\n\t\t\tthis.total = 0;\r\n\t\t\thelpers.each(data,function(segment){\r\n\t\t\t\tthis.total += segment.value;\r\n\t\t\t},this);\r\n\t\t\tthis.scale.valuesCount = this.segments.length;\r\n\t\t},\r\n\t\tupdateScaleRange: function(datapoints){\r\n\t\t\tvar valuesArray = [];\r\n\t\t\thelpers.each(datapoints,function(segment){\r\n\t\t\t\tvaluesArray.push(segment.value);\r\n\t\t\t});\r\n\r\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\r\n\t\t\t\t{\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t} :\r\n\t\t\t\thelpers.calculateScaleRange(\r\n\t\t\t\t\tvaluesArray,\r\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\r\n\t\t\t\t\tthis.options.scaleFontSize,\r\n\t\t\t\t\tthis.options.scaleBeginAtZero,\r\n\t\t\t\t\tthis.options.scaleIntegersOnly\r\n\t\t\t\t);\r\n\r\n\t\t\thelpers.extend(\r\n\t\t\t\tthis.scale,\r\n\t\t\t\tscaleSizes,\r\n\t\t\t\t{\r\n\t\t\t\t\tsize: helpers.min([this.chart.width, this.chart.height]),\r\n\t\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\t\tyCenter: this.chart.height/2\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.calculateTotal(this.segments);\r\n\r\n\t\t\thelpers.each(this.segments,function(segment){\r\n\t\t\t\tsegment.save();\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\treflow : function(){\r\n\t\t\thelpers.extend(this.SegmentArc.prototype,{\r\n\t\t\t\tx : this.chart.width/2,\r\n\t\t\t\ty : this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.updateScaleRange(this.segments);\r\n\t\t\tthis.scale.update();\r\n\r\n\t\t\thelpers.extend(this.scale,{\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2\r\n\t\t\t});\r\n\r\n\t\t\thelpers.each(this.segments, function(segment){\r\n\t\t\t\tsegment.update({\r\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\r\n\t\t\t\t});\r\n\t\t\t}, this);\r\n\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easingDecimal = ease || 1;\r\n\t\t\t//Clear & draw the canvas\r\n\t\t\tthis.clear();\r\n\t\t\thelpers.each(this.segments,function(segment, index){\r\n\t\t\t\tsegment.transition({\r\n\t\t\t\t\tcircumference : this.scale.getCircumference(),\r\n\t\t\t\t\touterRadius : this.scale.calculateCenterOffset(segment.value)\r\n\t\t\t\t},easingDecimal);\r\n\r\n\t\t\t\tsegment.endAngle = segment.startAngle + segment.circumference;\r\n\r\n\t\t\t\t// If we've removed the first segment we need to set the first one to\r\n\t\t\t\t// start at the top.\r\n\t\t\t\tif (index === 0){\r\n\t\t\t\t\tsegment.startAngle = Math.PI * 1.5;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//Check to see if it's the last segment, if not get the next and update the start angle\r\n\t\t\t\tif (index < this.segments.length - 1){\r\n\t\t\t\t\tthis.segments[index+1].startAngle = segment.endAngle;\r\n\t\t\t\t}\r\n\t\t\t\tsegment.draw();\r\n\t\t\t}, this);\r\n\t\t\tthis.scale.draw();\r\n\t\t}\r\n\t});\r\n\r\n}).call(this);\r\n(function(){\r\n\t\"use strict\";\r\n\r\n\tvar root = this,\r\n\t\tChart = root.Chart,\r\n\t\thelpers = Chart.helpers;\r\n\r\n\r\n\r\n\tChart.Type.extend({\r\n\t\tname: \"Radar\",\r\n\t\tdefaults:{\r\n\t\t\t//Boolean - Whether to show lines for each scale point\r\n\t\t\tscaleShowLine : true,\r\n\r\n\t\t\t//Boolean - Whether we show the angle lines out of the radar\r\n\t\t\tangleShowLineOut : true,\r\n\r\n\t\t\t//Boolean - Whether to show labels on the scale\r\n\t\t\tscaleShowLabels : false,\r\n\r\n\t\t\t// Boolean - Whether the scale should begin at zero\r\n\t\t\tscaleBeginAtZero : true,\r\n\r\n\t\t\t//String - Colour of the angle line\r\n\t\t\tangleLineColor : \"rgba(0,0,0,.1)\",\r\n\r\n\t\t\t//Number - Pixel width of the angle line\r\n\t\t\tangleLineWidth : 1,\r\n\r\n\t\t\t//String - Point label font declaration\r\n\t\t\tpointLabelFontFamily : \"'Arial'\",\r\n\r\n\t\t\t//String - Point label font weight\r\n\t\t\tpointLabelFontStyle : \"normal\",\r\n\r\n\t\t\t//Number - Point label font size in pixels\r\n\t\t\tpointLabelFontSize : 10,\r\n\r\n\t\t\t//String - Point label font colour\r\n\t\t\tpointLabelFontColor : \"#666\",\r\n\r\n\t\t\t//Boolean - Whether to show a dot for each point\r\n\t\t\tpointDot : true,\r\n\r\n\t\t\t//Number - Radius of each point dot in pixels\r\n\t\t\tpointDotRadius : 3,\r\n\r\n\t\t\t//Number - Pixel width of point dot stroke\r\n\t\t\tpointDotStrokeWidth : 1,\r\n\r\n\t\t\t//Number - amount extra to add to the radius to cater for hit detection outside the drawn point\r\n\t\t\tpointHitDetectionRadius : 20,\r\n\r\n\t\t\t//Boolean - Whether to show a stroke for datasets\r\n\t\t\tdatasetStroke : true,\r\n\r\n\t\t\t//Number - Pixel width of dataset stroke\r\n\t\t\tdatasetStrokeWidth : 2,\r\n\r\n\t\t\t//Boolean - Whether to fill the dataset with a colour\r\n\t\t\tdatasetFill : true,\r\n\r\n\t\t\t//String - A legend template\r\n\t\t\tlegendTemplate : \"<ul class=\\\"<%=name.toLowerCase()%>-legend\\\"><% for (var i=0; i<datasets.length; i++){%><li><span style=\\\"background-color:<%=datasets[i].strokeColor%>\\\"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>\"\r\n\r\n\t\t},\r\n\r\n\t\tinitialize: function(data){\r\n\t\t\tthis.PointClass = Chart.Point.extend({\r\n\t\t\t\tstrokeWidth : this.options.pointDotStrokeWidth,\r\n\t\t\t\tradius : this.options.pointDotRadius,\r\n\t\t\t\tdisplay: this.options.pointDot,\r\n\t\t\t\thitDetectionRadius : this.options.pointHitDetectionRadius,\r\n\t\t\t\tctx : this.chart.ctx\r\n\t\t\t});\r\n\r\n\t\t\tthis.datasets = [];\r\n\r\n\t\t\tthis.buildScale(data);\r\n\r\n\t\t\t//Set up tooltip events on the chart\r\n\t\t\tif (this.options.showTooltips){\r\n\t\t\t\thelpers.bindEvents(this, this.options.tooltipEvents, function(evt){\r\n\t\t\t\t\tvar activePointsCollection = (evt.type !== 'mouseout') ? this.getPointsAtEvent(evt) : [];\r\n\r\n\t\t\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\t\t\tpoint.restore(['fillColor', 'strokeColor']);\r\n\t\t\t\t\t});\r\n\t\t\t\t\thelpers.each(activePointsCollection, function(activePoint){\r\n\t\t\t\t\t\tactivePoint.fillColor = activePoint.highlightFill;\r\n\t\t\t\t\t\tactivePoint.strokeColor = activePoint.highlightStroke;\r\n\t\t\t\t\t});\r\n\r\n\t\t\t\t\tthis.showTooltip(activePointsCollection);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\t//Iterate through each of the datasets, and build this into a property of the chart\r\n\t\t\thelpers.each(data.datasets,function(dataset){\r\n\r\n\t\t\t\tvar datasetObject = {\r\n\t\t\t\t\tlabel: dataset.label || null,\r\n\t\t\t\t\tfillColor : dataset.fillColor,\r\n\t\t\t\t\tstrokeColor : dataset.strokeColor,\r\n\t\t\t\t\tpointColor : dataset.pointColor,\r\n\t\t\t\t\tpointStrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\tpoints : []\r\n\t\t\t\t};\r\n\r\n\t\t\t\tthis.datasets.push(datasetObject);\r\n\r\n\t\t\t\thelpers.each(dataset.data,function(dataPoint,index){\r\n\t\t\t\t\t//Add a new point for each piece of data, passing any required data to draw.\r\n\t\t\t\t\tvar pointPosition;\r\n\t\t\t\t\tif (!this.scale.animation){\r\n\t\t\t\t\t\tpointPosition = this.scale.getPointPosition(index, this.scale.calculateCenterOffset(dataPoint));\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdatasetObject.points.push(new this.PointClass({\r\n\t\t\t\t\t\tvalue : dataPoint,\r\n\t\t\t\t\t\tlabel : data.labels[index],\r\n\t\t\t\t\t\tdatasetLabel: dataset.label,\r\n\t\t\t\t\t\tx: (this.options.animation) ? this.scale.xCenter : pointPosition.x,\r\n\t\t\t\t\t\ty: (this.options.animation) ? this.scale.yCenter : pointPosition.y,\r\n\t\t\t\t\t\tstrokeColor : dataset.pointStrokeColor,\r\n\t\t\t\t\t\tfillColor : dataset.pointColor,\r\n\t\t\t\t\t\thighlightFill : dataset.pointHighlightFill || dataset.pointColor,\r\n\t\t\t\t\t\thighlightStroke : dataset.pointHighlightStroke || dataset.pointStrokeColor\r\n\t\t\t\t\t}));\r\n\t\t\t\t},this);\r\n\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\teachPoints : function(callback){\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\thelpers.each(dataset.points,callback,this);\r\n\t\t\t},this);\r\n\t\t},\r\n\r\n\t\tgetPointsAtEvent : function(evt){\r\n\t\t\tvar mousePosition = helpers.getRelativePosition(evt),\r\n\t\t\t\tfromCenter = helpers.getAngleFromPoint({\r\n\t\t\t\t\tx: this.scale.xCenter,\r\n\t\t\t\t\ty: this.scale.yCenter\r\n\t\t\t\t}, mousePosition);\r\n\r\n\t\t\tvar anglePerIndex = (Math.PI * 2) /this.scale.valuesCount,\r\n\t\t\t\tpointIndex = Math.round((fromCenter.angle - Math.PI * 1.5) / anglePerIndex),\r\n\t\t\t\tactivePointsCollection = [];\r\n\r\n\t\t\t// If we're at the top, make the pointIndex 0 to get the first of the array.\r\n\t\t\tif (pointIndex >= this.scale.valuesCount || pointIndex < 0){\r\n\t\t\t\tpointIndex = 0;\r\n\t\t\t}\r\n\r\n\t\t\tif (fromCenter.distance <= this.scale.drawingArea){\r\n\t\t\t\thelpers.each(this.datasets, function(dataset){\r\n\t\t\t\t\tactivePointsCollection.push(dataset.points[pointIndex]);\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\treturn activePointsCollection;\r\n\t\t},\r\n\r\n\t\tbuildScale : function(data){\r\n\t\t\tthis.scale = new Chart.RadialScale({\r\n\t\t\t\tdisplay: this.options.showScale,\r\n\t\t\t\tfontStyle: this.options.scaleFontStyle,\r\n\t\t\t\tfontSize: this.options.scaleFontSize,\r\n\t\t\t\tfontFamily: this.options.scaleFontFamily,\r\n\t\t\t\tfontColor: this.options.scaleFontColor,\r\n\t\t\t\tshowLabels: this.options.scaleShowLabels,\r\n\t\t\t\tshowLabelBackdrop: this.options.scaleShowLabelBackdrop,\r\n\t\t\t\tbackdropColor: this.options.scaleBackdropColor,\r\n\t\t\t\tbackdropPaddingY : this.options.scaleBackdropPaddingY,\r\n\t\t\t\tbackdropPaddingX: this.options.scaleBackdropPaddingX,\r\n\t\t\t\tlineWidth: (this.options.scaleShowLine) ? this.options.scaleLineWidth : 0,\r\n\t\t\t\tlineColor: this.options.scaleLineColor,\r\n\t\t\t\tangleLineColor : this.options.angleLineColor,\r\n\t\t\t\tangleLineWidth : (this.options.angleShowLineOut) ? this.options.angleLineWidth : 0,\r\n\t\t\t\t// Point labels at the edge of each line\r\n\t\t\t\tpointLabelFontColor : this.options.pointLabelFontColor,\r\n\t\t\t\tpointLabelFontSize : this.options.pointLabelFontSize,\r\n\t\t\t\tpointLabelFontFamily : this.options.pointLabelFontFamily,\r\n\t\t\t\tpointLabelFontStyle : this.options.pointLabelFontStyle,\r\n\t\t\t\theight : this.chart.height,\r\n\t\t\t\twidth: this.chart.width,\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2,\r\n\t\t\t\tctx : this.chart.ctx,\r\n\t\t\t\ttemplateString: this.options.scaleLabel,\r\n\t\t\t\tlabels: data.labels,\r\n\t\t\t\tvaluesCount: data.datasets[0].data.length\r\n\t\t\t});\r\n\r\n\t\t\tthis.scale.setScaleSize();\r\n\t\t\tthis.updateScaleRange(data.datasets);\r\n\t\t\tthis.scale.buildYLabels();\r\n\t\t},\r\n\t\tupdateScaleRange: function(datasets){\r\n\t\t\tvar valuesArray = (function(){\r\n\t\t\t\tvar totalDataArray = [];\r\n\t\t\t\thelpers.each(datasets,function(dataset){\r\n\t\t\t\t\tif (dataset.data){\r\n\t\t\t\t\t\ttotalDataArray = totalDataArray.concat(dataset.data);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\thelpers.each(dataset.points, function(point){\r\n\t\t\t\t\t\t\ttotalDataArray.push(point.value);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn totalDataArray;\r\n\t\t\t})();\r\n\r\n\r\n\t\t\tvar scaleSizes = (this.options.scaleOverride) ?\r\n\t\t\t\t{\r\n\t\t\t\t\tsteps: this.options.scaleSteps,\r\n\t\t\t\t\tstepValue: this.options.scaleStepWidth,\r\n\t\t\t\t\tmin: this.options.scaleStartValue,\r\n\t\t\t\t\tmax: this.options.scaleStartValue + (this.options.scaleSteps * this.options.scaleStepWidth)\r\n\t\t\t\t} :\r\n\t\t\t\thelpers.calculateScaleRange(\r\n\t\t\t\t\tvaluesArray,\r\n\t\t\t\t\thelpers.min([this.chart.width, this.chart.height])/2,\r\n\t\t\t\t\tthis.options.scaleFontSize,\r\n\t\t\t\t\tthis.options.scaleBeginAtZero,\r\n\t\t\t\t\tthis.options.scaleIntegersOnly\r\n\t\t\t\t);\r\n\r\n\t\t\thelpers.extend(\r\n\t\t\t\tthis.scale,\r\n\t\t\t\tscaleSizes\r\n\t\t\t);\r\n\r\n\t\t},\r\n\t\taddData : function(valuesArray,label){\r\n\t\t\t//Map the values array for each of the datasets\r\n\t\t\tthis.scale.valuesCount++;\r\n\t\t\thelpers.each(valuesArray,function(value,datasetIndex){\r\n\t\t\t\tvar pointPosition = this.scale.getPointPosition(this.scale.valuesCount, this.scale.calculateCenterOffset(value));\r\n\t\t\t\tthis.datasets[datasetIndex].points.push(new this.PointClass({\r\n\t\t\t\t\tvalue : value,\r\n\t\t\t\t\tlabel : label,\r\n\t\t\t\t\tx: pointPosition.x,\r\n\t\t\t\t\ty: pointPosition.y,\r\n\t\t\t\t\tstrokeColor : this.datasets[datasetIndex].pointStrokeColor,\r\n\t\t\t\t\tfillColor : this.datasets[datasetIndex].pointColor\r\n\t\t\t\t}));\r\n\t\t\t},this);\r\n\r\n\t\t\tthis.scale.labels.push(label);\r\n\r\n\t\t\tthis.reflow();\r\n\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tremoveData : function(){\r\n\t\t\tthis.scale.valuesCount--;\r\n\t\t\tthis.scale.labels.shift();\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\t\t\t\tdataset.points.shift();\r\n\t\t\t},this);\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.update();\r\n\t\t},\r\n\t\tupdate : function(){\r\n\t\t\tthis.eachPoints(function(point){\r\n\t\t\t\tpoint.save();\r\n\t\t\t});\r\n\t\t\tthis.reflow();\r\n\t\t\tthis.render();\r\n\t\t},\r\n\t\treflow: function(){\r\n\t\t\thelpers.extend(this.scale, {\r\n\t\t\t\twidth : this.chart.width,\r\n\t\t\t\theight: this.chart.height,\r\n\t\t\t\tsize : helpers.min([this.chart.width, this.chart.height]),\r\n\t\t\t\txCenter: this.chart.width/2,\r\n\t\t\t\tyCenter: this.chart.height/2\r\n\t\t\t});\r\n\t\t\tthis.updateScaleRange(this.datasets);\r\n\t\t\tthis.scale.setScaleSize();\r\n\t\t\tthis.scale.buildYLabels();\r\n\t\t},\r\n\t\tdraw : function(ease){\r\n\t\t\tvar easeDecimal = ease || 1,\r\n\t\t\t\tctx = this.chart.ctx;\r\n\t\t\tthis.clear();\r\n\t\t\tthis.scale.draw();\r\n\r\n\t\t\thelpers.each(this.datasets,function(dataset){\r\n\r\n\t\t\t\t//Transition each point first so that the line and point drawing isn't out of sync\r\n\t\t\t\thelpers.each(dataset.points,function(point,index){\r\n\t\t\t\t\tif (point.hasValue()){\r\n\t\t\t\t\t\tpoint.transition(this.scale.getPointPosition(index, this.scale.calculateCenterOffset(point.value)), easeDecimal);\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\r\n\r\n\r\n\t\t\t\t//Draw the line between all the points\r\n\t\t\t\tctx.lineWidth = this.options.datasetStrokeWidth;\r\n\t\t\t\tctx.strokeStyle = dataset.strokeColor;\r\n\t\t\t\tctx.beginPath();\r\n\t\t\t\thelpers.each(dataset.points,function(point,index){\r\n\t\t\t\t\tif (index === 0){\r\n\t\t\t\t\t\tctx.moveTo(point.x,point.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tctx.lineTo(point.x,point.y);\r\n\t\t\t\t\t}\r\n\t\t\t\t},this);\r\n\t\t\t\tctx.closePath();\r\n\t\t\t\tctx.stroke();\r\n\r\n\t\t\t\tctx.fillStyle = dataset.fillColor;\r\n\t\t\t\tctx.fill();\r\n\r\n\t\t\t\t//Now draw the points over the line\r\n\t\t\t\t//A little inefficient double looping, but better than the line\r\n\t\t\t\t//lagging behind the point positions\r\n\t\t\t\thelpers.each(dataset.points,function(point){\r\n\t\t\t\t\tif (point.hasValue()){\r\n\t\t\t\t\t\tpoint.draw();\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t},this);\r\n\r\n\t\t}\r\n\r\n\t});\r\n\r\n\r\n\r\n\r\n\r\n}).call(this);","var OVERLAY_ID = '__parcel__error__overlay__';\n\nvar OldModule = module.bundle.Module;\n\nfunction Module(moduleName) {\n  OldModule.call(this, moduleName);\n  this.hot = {\n    data: module.bundle.hotData,\n    _acceptCallbacks: [],\n    _disposeCallbacks: [],\n    accept: function (fn) {\n      this._acceptCallbacks.push(fn || function () {});\n    },\n    dispose: function (fn) {\n      this._disposeCallbacks.push(fn);\n    }\n  };\n\n  module.bundle.hotData = null;\n}\n\nmodule.bundle.Module = Module;\nvar checkedAssets, assetsToAccept;\n\nvar parent = module.bundle.parent;\nif ((!parent || !parent.isParcelRequire) && typeof WebSocket !== 'undefined') {\n  var hostname = process.env.HMR_HOSTNAME || location.hostname;\n  var protocol = location.protocol === 'https:' ? 'wss' : 'ws';\n  var ws = new WebSocket(protocol + '://' + hostname + ':' + process.env.HMR_PORT + '/');\n  ws.onmessage = function(event) {\n    checkedAssets = {};\n    assetsToAccept = [];\n\n    var data = JSON.parse(event.data);\n\n    if (data.type === 'update') {\n      var handled = false;\n      data.assets.forEach(function(asset) {\n        if (!asset.isNew) {\n          var didAccept = hmrAcceptCheck(global.parcelRequire, asset.id);\n          if (didAccept) {\n            handled = true;\n          }\n        }\n      });\n\n      // Enable HMR for CSS by default.\n      handled = handled || data.assets.every(function(asset) {\n        return asset.type === 'css' && asset.generated.js;\n      });\n\n      if (handled) {\n        console.clear();\n\n        data.assets.forEach(function (asset) {\n          hmrApply(global.parcelRequire, asset);\n        });\n\n        assetsToAccept.forEach(function (v) {\n          hmrAcceptRun(v[0], v[1]);\n        });\n      } else if (location.reload) { // `location` global exists in a web worker context but lacks `.reload()` function.\n        location.reload();\n      }\n    }\n\n    if (data.type === 'reload') {\n      ws.close();\n      ws.onclose = function () {\n        location.reload();\n      }\n    }\n\n    if (data.type === 'error-resolved') {\n      console.log('[parcel] ✨ Error resolved');\n\n      removeErrorOverlay();\n    }\n\n    if (data.type === 'error') {\n      console.error('[parcel] 🚨  ' + data.error.message + '\\n' + data.error.stack);\n\n      removeErrorOverlay();\n\n      var overlay = createErrorOverlay(data);\n      document.body.appendChild(overlay);\n    }\n  };\n}\n\nfunction removeErrorOverlay() {\n  var overlay = document.getElementById(OVERLAY_ID);\n  if (overlay) {\n    overlay.remove();\n  }\n}\n\nfunction createErrorOverlay(data) {\n  var overlay = document.createElement('div');\n  overlay.id = OVERLAY_ID;\n\n  // html encode message and stack trace\n  var message = document.createElement('div');\n  var stackTrace = document.createElement('pre');\n  message.innerText = data.error.message;\n  stackTrace.innerText = data.error.stack;\n\n  overlay.innerHTML = (\n    '<div style=\"background: black; font-size: 16px; color: white; position: fixed; height: 100%; width: 100%; top: 0px; left: 0px; padding: 30px; opacity: 0.85; font-family: Menlo, Consolas, monospace; z-index: 9999;\">' +\n      '<span style=\"background: red; padding: 2px 4px; border-radius: 2px;\">ERROR</span>' +\n      '<span style=\"top: 2px; margin-left: 5px; position: relative;\">🚨</span>' +\n      '<div style=\"font-size: 18px; font-weight: bold; margin-top: 20px;\">' + message.innerHTML + '</div>' +\n      '<pre>' + stackTrace.innerHTML + '</pre>' +\n    '</div>'\n  );\n\n  return overlay;\n\n}\n\nfunction getParents(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return [];\n  }\n\n  var parents = [];\n  var k, d, dep;\n\n  for (k in modules) {\n    for (d in modules[k][1]) {\n      dep = modules[k][1][d];\n      if (dep === id || (Array.isArray(dep) && dep[dep.length - 1] === id)) {\n        parents.push(k);\n      }\n    }\n  }\n\n  if (bundle.parent) {\n    parents = parents.concat(getParents(bundle.parent, id));\n  }\n\n  return parents;\n}\n\nfunction hmrApply(bundle, asset) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (modules[asset.id] || !bundle.parent) {\n    var fn = new Function('require', 'module', 'exports', asset.generated.js);\n    asset.isNew = !modules[asset.id];\n    modules[asset.id] = [fn, asset.deps];\n  } else if (bundle.parent) {\n    hmrApply(bundle.parent, asset);\n  }\n}\n\nfunction hmrAcceptCheck(bundle, id) {\n  var modules = bundle.modules;\n  if (!modules) {\n    return;\n  }\n\n  if (!modules[id] && bundle.parent) {\n    return hmrAcceptCheck(bundle.parent, id);\n  }\n\n  if (checkedAssets[id]) {\n    return;\n  }\n  checkedAssets[id] = true;\n\n  var cached = bundle.cache[id];\n\n  assetsToAccept.push([bundle, id]);\n\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    return true;\n  }\n\n  return getParents(global.parcelRequire, id).some(function (id) {\n    return hmrAcceptCheck(global.parcelRequire, id)\n  });\n}\n\nfunction hmrAcceptRun(bundle, id) {\n  var cached = bundle.cache[id];\n  bundle.hotData = {};\n  if (cached) {\n    cached.hot.data = bundle.hotData;\n  }\n\n  if (cached && cached.hot && cached.hot._disposeCallbacks.length) {\n    cached.hot._disposeCallbacks.forEach(function (cb) {\n      cb(bundle.hotData);\n    });\n  }\n\n  delete bundle.cache[id];\n  bundle(id);\n\n  cached = bundle.cache[id];\n  if (cached && cached.hot && cached.hot._acceptCallbacks.length) {\n    cached.hot._acceptCallbacks.forEach(function (cb) {\n      cb();\n    });\n    return true;\n  }\n}\n"]}